import{C as M,c as st,S as D,P as Kt,a as kt,b as B,T as k,d as Pt,i as U,G as z,m as Zt,I as rt,r as qt,e as Jt,f as Qt,g as te,h as Z,j as q,k as ee,n as J,A as ie,R as O,l as Ht,o as at,p as gt,q as P,w,s as L,t as G,E as W,u as ne,v as ht,x as mt,y as se,z as $t,B as ae,D as he,F as oe,H as re,J as de,K as ot,L as Gt,M as le,N as ce,O as X,Q as R,U as j,V as K,W as xt,X as Mt,Y as pe,Z as fe,_ as ue,$ as it,a0 as Et,a1 as Nt,a2 as vt,a3 as ge,a4 as me,a5 as xe,a6 as S,a7 as yt,a8 as Wt,a9 as Me,aa as wt,ab as Ee,ac as Ne,ad as _t,ae as ve,af as Ut,ag as ye,ah as we,ai as _e,aj as Ce}from"./index.D5LvTkl4.js";class Te{constructor(t={}){this.opt=t,this.mindMap=this.opt.mindMap,this.scale=1,this.sx=0,this.sy=0,this.x=0,this.y=0,this.firstDrag=!0,this.setTransformData(this.mindMap.opt.viewData),this.bind()}bind(){this.mindMap.keyCommand.addShortcut("Control+=",()=>{this.enlarge()}),this.mindMap.keyCommand.addShortcut("Control+-",()=>{this.narrow()}),this.mindMap.keyCommand.addShortcut("Control+i",()=>{this.fit()}),this.mindMap.event.on("mousedown",t=>{const{isDisableDrag:e,mousedownEventPreventDefault:i}=this.mindMap.opt;e||(i&&t.preventDefault(),this.sx=this.x,this.sy=this.y)}),this.mindMap.event.on("drag",(t,e)=>{t.ctrlKey||t.metaKey||this.mindMap.opt.isDisableDrag||(this.firstDrag&&(this.firstDrag=!1,this.mindMap.renderer.activeNodeList.length>0&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")),this.x=this.sx+e.mousemoveOffset.x,this.y=this.sy+e.mousemoveOffset.y,this.transform())}),this.mindMap.event.on("mouseup",()=>{this.firstDrag=!0}),this.mindMap.event.on("mousewheel",(t,e,i,n)=>{const{customHandleMousewheel:s,mousewheelAction:a,mouseScaleCenterUseMousePosition:h,mousewheelMoveStep:o,mousewheelZoomActionReverse:r,disableMouseWheelZoom:c,translateRatio:d}=this.mindMap.opt;if(s&&typeof s=="function")return s(t);if(a===M.MOUSE_WHEEL_ACTION.ZOOM||t.ctrlKey||t.metaKey){if(c)return;const{x:f,y:g}=this.mindMap.toPos(t.clientX,t.clientY),l=h?f:void 0,m=h?g:void 0;switch(n&&(e.includes(M.DIR.LEFT)||e.includes(M.DIR.RIGHT))&&(e=e.filter(u=>![M.DIR.LEFT,M.DIR.RIGHT].includes(u))),!0){case e.includes(M.DIR.UP):r?this.enlarge(l,m,n):this.narrow(l,m,n);break;case e.includes(M.DIR.DOWN):r?this.narrow(l,m,n):this.enlarge(l,m,n);break}}else{let f=0,g=0;n?(f=Math.abs(t.wheelDeltaX),g=Math.abs(t.wheelDeltaY)):f=g=o;let l=0,m=0;e.includes(M.DIR.DOWN)&&(m=-g),e.includes(M.DIR.UP)&&(m=g),e.includes(M.DIR.LEFT)&&(l=f),e.includes(M.DIR.RIGHT)&&(l=-f),this.translateXY(l*d,m*d)}}),this.mindMap.on("resize",()=>{this.checkNeedMindMapInCanvas()&&this.transform()})}getTransformData(){return{transform:this.mindMap.draw.transform(),state:{scale:this.scale,x:this.x,y:this.y,sx:this.sx,sy:this.sy}}}setTransformData(t){t&&(Object.keys(t.state).forEach(e=>{this[e]=t.state[e]}),this.mindMap.draw.transform({...t.transform}),this.mindMap.emit("view_data_change",this.getTransformData()),this.emitEvent("scale"),this.emitEvent("translate"))}translateXY(t,e){t===0&&e===0||(this.x+=t,this.y+=e,this.transform(),this.emitEvent("translate"))}translateX(t){t!==0&&(this.x+=t,this.transform(),this.emitEvent("translate"))}translateXTo(t){this.x=t,this.transform(),this.emitEvent("translate")}translateY(t){t!==0&&(this.y+=t,this.transform(),this.emitEvent("translate"))}translateYTo(t){this.y=t,this.transform(),this.emitEvent("translate")}transform(){try{this.limitMindMapInCanvas()}catch{}this.mindMap.draw.transform({origin:[0,0],scale:this.scale,translate:[this.x,this.y]}),this.mindMap.emit("view_data_change",this.getTransformData())}reset(){const t=this.scale!==1,e=this.x!==0||this.y!==0;this.scale=1,this.x=0,this.y=0,this.transform(),t&&this.emitEvent("scale"),e&&this.emitEvent("translate")}narrow(t,e,i){let{scaleRatio:n,minZoomRatio:s}=this.mindMap.opt;n=n/(i?5:1);const a=Math.max(this.scale-n,s/100);this.scaleInCenter(a,t,e),this.transform(),this.emitEvent("scale")}enlarge(t,e,i){let{scaleRatio:n,maxZoomRatio:s}=this.mindMap.opt;n=n/(i?5:1);let a=0;s===-1?a=this.scale+n:a=Math.min(this.scale+n,s/100),this.scaleInCenter(a,t,e),this.transform(),this.emitEvent("scale")}scaleInCenter(t,e,i){(e===void 0||i===void 0)&&(e=this.mindMap.width/2,i=this.mindMap.height/2);const n=this.scale,s=1-t/n,a=(e-this.x)*s,h=(i-this.y)*s;this.x+=a,this.y+=h,this.scale=t}setScale(t,e,i){e!==void 0&&i!==void 0?this.scaleInCenter(t,e,i):this.scale=t,this.transform(),this.emitEvent("scale")}fit(t=()=>{},e=!1,i){i=i===void 0?this.mindMap.opt.fitPadding:i;const n=this.mindMap.draw,s=n.transform(),a=t()||n.rbox(),h=a.width/s.scaleX,o=a.height/s.scaleY,r=h/o;let{width:c,height:d}=this.mindMap.elRect;c=c-i*2,d=d-i*2;const f=c/d;let g=0,l="";if(h<=c&&o<=d&&!e)g=1,l=1;else{let E=0;r>f?(E=c,l=2):(E=d*r,l=3),g=E/h}this.setScale(g);const m=t()||n.rbox();m.x-=this.mindMap.elRect.left,m.y-=this.mindMap.elRect.top;let u=0,x=0;l===1?(u=-m.x+i+(c-m.width)/2,x=-m.y+i+(d-m.height)/2):l===2?(u=-m.x+i,x=-m.y+i+(d-m.height)/2):l===3&&(u=-m.x+i+(c-m.width)/2,x=-m.y+i),this.translateXY(u,x)}checkNeedMindMapInCanvas(){if(this.mindMap.demonstrate&&this.mindMap.demonstrate.isInDemonstrate)return!1;const{isLimitMindMapInCanvasWhenHasScrollbar:t,isLimitMindMapInCanvas:e}=this.mindMap.opt;return this.mindMap.scrollbar?t:e}limitMindMapInCanvas(){if(!this.checkNeedMindMapInCanvas())return;let{scale:t,left:e,top:i,right:n,bottom:s}=this.getPositionLimit();const a=(this.mindMap.width-this.mindMap.initWidth)/2*t,h=(this.mindMap.height-this.mindMap.initHeight)/2*t,o=this.scale/t;e*=o,n*=o,i*=o,s*=o;const r=this.mindMap.width/2,c=this.mindMap.height/2,d=this.scale-1;e-=d*r-a,n-=d*r-a,i-=d*c-h,s-=d*c-h,this.x>e&&(this.x=e),this.x<n&&(this.x=n),this.y>i&&(this.y=i),this.y<s&&(this.y=s)}getPositionLimit(){const{scaleX:t,scaleY:e}=this.mindMap.draw.transform(),i=this.mindMap.draw.rbox(),n=this.mindMap.renderer.root.group.rbox(),s=this.mindMap.renderer.layout.getRootCenterOffset(n.width,n.height),a=n.x-i.x-s.x*t,h=n.x-i.x2-s.x*t,o=n.y-i.y-s.y*e,r=n.y-i.y2-s.y*e;return{scale:t,left:a,right:h,top:o,bottom:r}}emitEvent(t){switch(t){case"scale":this.mindMap.emit("scale",this.scale);case"translate":this.mindMap.emit("translate",this.x,this.y)}}}function Le(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var Yt={exports:{}};(function(p){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(o,r,c){this.fn=o,this.context=r,this.once=c||!1}function s(o,r,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new n(c,d||o,f),l=e?e+r:r;return o._events[l]?o._events[l].fn?o._events[l]=[o._events[l],g]:o._events[l].push(g):(o._events[l]=g,o._eventsCount++),o}function a(o,r){--o._eventsCount===0?o._events=new i:delete o._events[r]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var r=[],c,d;if(this._eventsCount===0)return r;for(d in c=this._events)t.call(c,d)&&r.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(c)):r},h.prototype.listeners=function(r){var c=e?e+r:r,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,g=d.length,l=new Array(g);f<g;f++)l[f]=d[f].fn;return l},h.prototype.listenerCount=function(r){var c=e?e+r:r,d=this._events[c];return d?d.fn?1:d.length:0},h.prototype.emit=function(r,c,d,f,g,l){var m=e?e+r:r;if(!this._events[m])return!1;var u=this._events[m],x=arguments.length,E,N;if(u.fn){switch(u.once&&this.removeListener(r,u.fn,void 0,!0),x){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,c),!0;case 3:return u.fn.call(u.context,c,d),!0;case 4:return u.fn.call(u.context,c,d,f),!0;case 5:return u.fn.call(u.context,c,d,f,g),!0;case 6:return u.fn.call(u.context,c,d,f,g,l),!0}for(N=1,E=new Array(x-1);N<x;N++)E[N-1]=arguments[N];u.fn.apply(u.context,E)}else{var v=u.length,y;for(N=0;N<v;N++)switch(u[N].once&&this.removeListener(r,u[N].fn,void 0,!0),x){case 1:u[N].fn.call(u[N].context);break;case 2:u[N].fn.call(u[N].context,c);break;case 3:u[N].fn.call(u[N].context,c,d);break;case 4:u[N].fn.call(u[N].context,c,d,f);break;default:if(!E)for(y=1,E=new Array(x-1);y<x;y++)E[y-1]=arguments[y];u[N].fn.apply(u[N].context,E)}}return!0},h.prototype.on=function(r,c,d){return s(this,r,c,d,!1)},h.prototype.once=function(r,c,d){return s(this,r,c,d,!0)},h.prototype.removeListener=function(r,c,d,f){var g=e?e+r:r;if(!this._events[g])return this;if(!c)return a(this,g),this;var l=this._events[g];if(l.fn)l.fn===c&&(!f||l.once)&&(!d||l.context===d)&&a(this,g);else{for(var m=0,u=[],x=l.length;m<x;m++)(l[m].fn!==c||f&&!l[m].once||d&&l[m].context!==d)&&u.push(l[m]);u.length?this._events[g]=u.length===1?u[0]:u:a(this,g)}return this},h.prototype.removeAllListeners=function(r){var c;return r?(c=e?e+r:r,this._events[c]&&a(this,c)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,p.exports=h})(Yt);var De=Yt.exports;const Se=Le(De);class Re extends Se{constructor(t={}){super(),this.opt=t,this.mindMap=t.mindMap,this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1,this.mousedownPos={x:0,y:0},this.mousemovePos={x:0,y:0},this.mousemoveOffset={x:0,y:0},this.bindFn(),this.bind()}bindFn(){this.onBodyMousedown=this.onBodyMousedown.bind(this),this.onBodyClick=this.onBodyClick.bind(this),this.onDrawClick=this.onDrawClick.bind(this),this.onMousedown=this.onMousedown.bind(this),this.onMousemove=this.onMousemove.bind(this),this.onMouseup=this.onMouseup.bind(this),this.onNodeMouseup=this.onNodeMouseup.bind(this),this.onMousewheel=this.onMousewheel.bind(this),this.onContextmenu=this.onContextmenu.bind(this),this.onSvgMousedown=this.onSvgMousedown.bind(this),this.onKeyup=this.onKeyup.bind(this),this.onMouseenter=this.onMouseenter.bind(this),this.onMouseleave=this.onMouseleave.bind(this)}bind(){document.body.addEventListener("mousedown",this.onBodyMousedown),document.body.addEventListener("click",this.onBodyClick),this.mindMap.svg.on("click",this.onDrawClick),this.mindMap.el.addEventListener("mousedown",this.onMousedown),this.mindMap.svg.on("mousedown",this.onSvgMousedown),window.addEventListener("mousemove",this.onMousemove),window.addEventListener("mouseup",this.onMouseup),this.on("node_mouseup",this.onNodeMouseup),this.mindMap.el.addEventListener("wheel",this.onMousewheel),this.mindMap.svg.on("contextmenu",this.onContextmenu),this.mindMap.svg.on("mouseenter",this.onMouseenter),this.mindMap.svg.on("mouseleave",this.onMouseleave),window.addEventListener("keyup",this.onKeyup)}unbind(){document.body.removeEventListener("mousedown",this.onBodyMousedown),document.body.removeEventListener("click",this.onBodyClick),this.mindMap.svg.off("click",this.onDrawClick),this.mindMap.el.removeEventListener("mousedown",this.onMousedown),window.removeEventListener("mousemove",this.onMousemove),window.removeEventListener("mouseup",this.onMouseup),this.off("node_mouseup",this.onNodeMouseup),this.mindMap.el.removeEventListener("wheel",this.onMousewheel),this.mindMap.svg.off("contextmenu",this.onContextmenu),this.mindMap.svg.off("mouseenter",this.onMouseenter),this.mindMap.svg.off("mouseleave",this.onMouseleave),window.removeEventListener("keyup",this.onKeyup)}onDrawClick(t){this.emit("draw_click",t)}onBodyMousedown(t){this.emit("body_mousedown",t)}onBodyClick(t){this.emit("body_click",t)}onSvgMousedown(t){this.emit("svg_mousedown",t)}onMousedown(t){t.which===1?this.isLeftMousedown=!0:t.which===3?this.isRightMousedown=!0:t.which===2&&(this.isMiddleMousedown=!0),this.mousedownPos.x=t.clientX,this.mousedownPos.y=t.clientY,this.emit("mousedown",t,this)}onMousemove(t){let{useLeftKeySelectionRightKeyDrag:e}=this.mindMap.opt;this.mousemovePos.x=t.clientX,this.mousemovePos.y=t.clientY,this.mousemoveOffset.x=t.clientX-this.mousedownPos.x,this.mousemoveOffset.y=t.clientY-this.mousedownPos.y,this.emit("mousemove",t,this),(this.isMiddleMousedown||(e?this.isRightMousedown:this.isLeftMousedown))&&(t.preventDefault(),this.emit("drag",t,this))}onMouseup(t){this.onNodeMouseup(),this.emit("mouseup",t,this)}onNodeMouseup(){this.isLeftMousedown=!1,this.isRightMousedown=!1,this.isMiddleMousedown=!1}onMousewheel(t){t.stopPropagation(),t.preventDefault();const e=[];t.deltaY<0&&e.push(M.DIR.UP),t.deltaY>0&&e.push(M.DIR.DOWN),t.deltaX<0&&e.push(M.DIR.LEFT),t.deltaX>0&&e.push(M.DIR.RIGHT);let i=!1;const{customCheckIsTouchPad:n}=this.mindMap.opt;typeof n=="function"?i=n(t):i=Math.abs(t.deltaY)<=10,this.emit("mousewheel",t,e,this,i)}onContextmenu(t){t.preventDefault(),!t.ctrlKey&&this.emit("contextmenu",t)}onKeyup(t){this.emit("keyup",t)}onMouseenter(t){this.emit("svg_mouseenter",t)}onMouseleave(t){this.emit("svg_mouseleave",t)}}const Ct=["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize"];class A{static setBackgroundStyle(t,e){if(!t)return;if(!A.cacheStyle){A.cacheStyle={};let o=window.getComputedStyle(t);Ct.forEach(r=>{A.cacheStyle[r]=o[r]})}let{backgroundColor:i,backgroundImage:n,backgroundRepeat:s,backgroundPosition:a,backgroundSize:h}=e;t.style.backgroundColor=i,n&&n!=="none"?(t.style.backgroundImage=`url(${n})`,t.style.backgroundRepeat=s,t.style.backgroundPosition=a,t.style.backgroundSize=h):t.style.backgroundImage="none"}static removeBackgroundStyle(t){A.cacheStyle&&(Ct.forEach(e=>{t.style[e]=A.cacheStyle[e]}),A.cacheStyle=null)}constructor(t){this.ctx=t,this._markerPath=null,this._marker=null,this._gradient=null}merge(t,e){let i=this.ctx.mindMap.themeConfig,n=null,s=!1;e?(s=!0,n=i):this.ctx.isGeneralization?n=i.generalization:this.ctx.layerIndex===0?n=i.root:this.ctx.layerIndex===1?n=i.second:n=i.node;let a="";return this.getSelfStyle(t)!==void 0?a=this.getSelfStyle(t):n[t]!==void 0?a=n[t]:a=i[t],s||this.addToEffectiveStyles({[t]:a}),a}getStyle(t,e){return this.merge(t,e)}getSelfStyle(t){return this.ctx.getData(t)}addToEffectiveStyles(t){this.ctx.effectiveStyles={...this.ctx.effectiveStyles,...t}}rect(t){this.shape(t),t.radius(this.merge("borderRadius"))}shape(t){const e={gradientStyle:this.merge("gradientStyle"),startColor:this.merge("startColor"),endColor:this.merge("endColor"),startDir:this.merge("startDir"),endDir:this.merge("endDir"),fillColor:this.merge("fillColor"),borderColor:this.merge("borderColor"),borderWidth:this.merge("borderWidth"),borderDasharray:this.merge("borderDasharray")};e.gradientStyle?(this._gradient||(this._gradient=this.ctx.nodeDraw.gradient("linear")),this._gradient.update(i=>{i.stop(0,e.startColor),i.stop(1,e.endColor)}),this._gradient.from(...e.startDir).to(...e.endDir),t.fill(this._gradient)):t.fill({color:e.fillColor}),t.stroke({color:e.borderColor,width:e.borderWidth,dasharray:e.borderDasharray})}text(t){const e={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};t.fill({color:e.color}).css({"font-family":e.fontFamily,"font-size":e.fontSize+"px","font-weight":e.fontWeight,"font-style":e.fontStyle,"text-decoration":e.textDecoration})}createStyleText(t={}){const e={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration"),...t};return`
      color: ${e.color};
      font-family: ${e.fontFamily};
      font-size: ${e.fontSize+"px"};
      font-weight: ${e.fontWeight};
      font-style: ${e.fontStyle};
      text-decoration: ${e.textDecoration}
    `}getTextFontStyle(){const t={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};return{italic:t.fontStyle==="italic",bold:t.fontWeight,fontSize:t.fontSize,fontFamily:t.fontFamily}}domText(t,e=1){const i={color:this.merge("color"),fontFamily:this.merge("fontFamily"),fontSize:this.merge("fontSize"),fontWeight:this.merge("fontWeight"),fontStyle:this.merge("fontStyle"),textDecoration:this.merge("textDecoration")};t.style.color=i.color,t.style.textDecoration=i.textDecoration,t.style.fontFamily=i.fontFamily,t.style.fontSize=i.fontSize*e+"px",t.style.fontWeight=i.fontWeight||"normal",t.style.fontStyle=i.fontStyle}tagText(t,e){t.fill({color:"#fff"}).css({"font-size":e.fontSize+"px"})}tagRect(t,e){t.fill({color:e.fill}),e.radius&&t.radius(e.radius)}iconNode(t,e){t.attr({fill:e||this.merge("color")})}line(t,{width:e,color:i,dasharray:n}={},s,a){const{customHandleLine:h}=this.ctx.mindMap.opt;if(typeof h=="function"&&h(this.ctx,t,{width:e,color:i,dasharray:n}),t.stroke({color:i,dasharray:n,width:e}).fill({color:"none"}),s){const o=this.merge("showLineMarker",!0),r=a.style;if(o){r._marker=r._marker||r.createMarker(),r._markerPath.stroke({color:i}).fill({color:i}),t.attr("marker-start",""),t.attr("marker-end","");const c=r.merge("lineMarkerDir");t.marker(c,r._marker)}else r._marker&&(t.attr("marker-start",""),t.attr("marker-end",""),r._marker.remove(),r._marker=null)}}createMarker(){return this.ctx.lineDraw.marker(20,20,t=>{t.ref(8,5),t.size(20,20),t.attr("markerUnits","userSpaceOnUse"),t.attr("orient","auto-start-reverse"),this._markerPath=t.path("M0,0 L2,5 L0,10 L10,5 Z")})}generalizationLine(t){t.stroke({width:this.merge("generalizationLineWidth",!0),color:this.merge("generalizationLineColor",!0)}).fill({color:"none"})}iconBtn(t,e,i){let{color:n,fill:s,fontSize:a,fontColor:h}=this.ctx.mindMap.opt.expandBtnStyle||{color:"#808080",fill:"#fff",fontSize:12,strokeColor:"#333333",fontColor:"#333333"};t.fill({color:n}),e.fill({color:n}),i.fill({color:s}),this.ctx.mindMap.opt.isShowExpandNum&&t.attr({"font-size":a+"px","font-color":h})}hasCustomStyle(){let t=!1;return Object.keys(this.ctx.getData()).forEach(e=>{st(e)&&(t=!0)}),t}getCustomStyle(){const t={};return Object.keys(this.ctx.getData()).forEach(e=>{st(e)&&(t[e]=this.ctx.getData(e))}),t}hoverNode(t){const e=this.merge("hoverRectColor")||this.ctx.mindMap.opt.hoverRectColor,i=this.merge("hoverRectRadius");t.radius(i).fill("none").stroke({color:e})}onRemove(){this._marker&&(this._marker.remove(),this._marker=null),this._markerPath&&(this._markerPath.remove(),this._markerPath=null),this._gradient&&(this._gradient.remove(),this._gradient=null)}}A.cacheStyle=null;class ze{constructor(t){this.node=t,this.mindMap=t.mindMap}getShapePadding(t,e,i,n){const s=this.node.getShape(),a=15,h=5,o=t+i*2,r=e+n*2,c=Math.abs(o-r);switch(s){case M.SHAPE.ROUNDED_RECTANGLE:return{paddingX:e>t?(e-t)/2:0,paddingY:0};case M.SHAPE.DIAMOND:return{paddingX:t/2,paddingY:e/2};case M.SHAPE.PARALLELOGRAM:return{paddingX:i<=0?a:0,paddingY:0};case M.SHAPE.OUTER_TRIANGULAR_RECTANGLE:return{paddingX:i<=0?a:0,paddingY:0};case M.SHAPE.INNER_TRIANGULAR_RECTANGLE:return{paddingX:i<=0?a:0,paddingY:0};case M.SHAPE.ELLIPSE:return{paddingX:i<=0?a:0,paddingY:n<=0?h:0};case M.SHAPE.CIRCLE:return{paddingX:r>o?c/2:0,paddingY:r<o?c/2:0};default:return{paddingX:0,paddingY:0}}}createShape(){const t=this.node.getShape();let e=null;return t===M.SHAPE.RECTANGLE?e=this.createRect():t===M.SHAPE.DIAMOND?e=this.createDiamond():t===M.SHAPE.PARALLELOGRAM?e=this.createParallelogram():t===M.SHAPE.ROUNDED_RECTANGLE?e=this.createRoundedRectangle():t===M.SHAPE.OCTAGONAL_RECTANGLE?e=this.createOctagonalRectangle():t===M.SHAPE.OUTER_TRIANGULAR_RECTANGLE?e=this.createOuterTriangularRectangle():t===M.SHAPE.INNER_TRIANGULAR_RECTANGLE?e=this.createInnerTriangularRectangle():t===M.SHAPE.ELLIPSE?e=this.createEllipse():t===M.SHAPE.CIRCLE&&(e=this.createCircle()),e}getNodeSize(){const t=this.node.getBorderWidth();let{width:e,height:i}=this.node;return e-=t,i-=t,{width:e,height:i}}createPath(t){const{customCreateNodePath:e}=this.mindMap.opt;return e?D(e(t)):new Kt().plot(t)}createPolygon(t){const{customCreateNodePolygon:e}=this.mindMap.opt;return e?D(e(t)):new kt().plot(t)}createRect(){let{width:t,height:e}=this.getNodeSize(),i=this.node.style.merge("borderRadius");const n=`
      M${i},0
      L${t-i},0
      C${t-i},0 ${t},0 ${t},${i}
      L${t},${e-i}
      C${t},${e-i} ${t},${e} ${t-i},${e}
      L${i},${e}
      C${i},${e} 0,${e} 0,${e-i}
      L0,${i}
      C0,${i} 0,0 ${i},0
      Z
    `;return this.createPath(n)}createDiamond(){let{width:t,height:e}=this.getNodeSize(),i=t/2,n=e/2;const g=[[i,0],[t,n],[i,e],[0,n]];return this.createPolygon(g)}createParallelogram(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:i}=this.getNodeSize();const n=[[t,0],[e,0],[e-t,i],[0,i]];return this.createPolygon(n)}createRoundedRectangle(){let{width:t,height:e}=this.getNodeSize(),i=e/2;const n=`
      M${i},0
      L${t-i},0
      A${e/2},${e/2} 0 0,1 ${t-i},${e} 
      L${i},${e}
      A${e/2},${e/2} 0 0,1 ${i},0
    `;return this.createPath(n)}createOctagonalRectangle(){let t=5,{width:e,height:i}=this.getNodeSize();const n=[[0,t],[t,0],[e-t,0],[e,t],[e,i-t],[e-t,i],[t,i],[0,i-t]];return this.createPolygon(n)}createOuterTriangularRectangle(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:i}=this.getNodeSize();const n=[[t,0],[e-t,0],[e,i/2],[e-t,i],[t,i],[0,i/2]];return this.createPolygon(n)}createInnerTriangularRectangle(){let{paddingX:t}=this.node.getPaddingVale();t=t||this.node.shapePadding.paddingX;let{width:e,height:i}=this.getNodeSize();const n=[[0,0],[e,0],[e-t/2,i/2],[e,i],[0,i],[t/2,i/2]];return this.createPolygon(n)}createEllipse(){let{width:t,height:e}=this.getNodeSize(),i=t/2,n=e/2;const s=`
      M${i},0
      A${i},${n} 0 0,1 ${i},${e} 
      M${i},${e} 
      A${i},${n} 0 0,1 ${i},0 
    `;return this.createPath(s)}createCircle(){let{width:t,height:e}=this.getNodeSize(),i=t/2,n=e/2;const s=`
      M${i},0
      A${i},${n} 0 0,1 ${i},${e} 
      M${i},${e} 
      A${i},${n} 0 0,1 ${i},0 
    `;return this.createPath(s)}}const Ae=[M.SHAPE.RECTANGLE,M.SHAPE.DIAMOND,M.SHAPE.PARALLELOGRAM,M.SHAPE.ROUNDED_RECTANGLE,M.SHAPE.OCTAGONAL_RECTANGLE,M.SHAPE.OUTER_TRIANGULAR_RECTANGLE,M.SHAPE.INNER_TRIANGULAR_RECTANGLE,M.SHAPE.ELLIPSE,M.SHAPE.CIRCLE];function Ie(){const p=this.getData("generalization");return Array.isArray(p)?p:p?[p]:[]}function Oe(){return this.formatGetGeneralization().length>0}function Fe(){return!!this.formatGetGeneralization().find(t=>!t.range||t.range.length<=0)}function Be(p){return this._generalizationList.findIndex(t=>t.generalizationNode.uid===p.uid)}function be(){if(this.isGeneralization||!this.checkHasGeneralization())return;let p=0,t=0;this.formatGetGeneralization().forEach((i,n)=>{let s=this._generalizationList[n];s||(s=this._generalizationList[n]={}),s.node=this,s.range=i.range,s.generalizationLine||(s.generalizationLine=this.lineDraw.path()),s.generalizationNode||(s.generalizationNode=new tt({data:{inserting:i.inserting,data:i},uid:B(),renderer:this.renderer,mindMap:this.mindMap,isGeneralization:!0})),delete i.inserting,s.generalizationNode.generalizationBelongNode=this,s.generalizationNode.width>p&&(p=s.generalizationNode.width),s.generalizationNode.height>t&&(t=s.generalizationNode.height),i.isActive&&this.renderer.addNodeToActiveList(s.generalizationNode)}),this._generalizationNodeWidth=p,this._generalizationNodeHeight=t}function ke(){this.isGeneralization||(this.removeGeneralization(),this.createGeneralizationNode())}function Pe(p){if(this.isGeneralization)return;this.updateGeneralizationData();const t=this.formatGetGeneralization();if(t.length<=0||this.getData("expand")===!1){this.removeGeneralization();return}t.length!==this._generalizationList.length&&this.removeGeneralization(),this.createGeneralizationNode(),this.renderer.layout.renderGeneralization(this._generalizationList),this._generalizationList.forEach(e=>{this.style.generalizationLine(e.generalizationLine),e.generalizationNode.render(()=>{},p)})}function He(){const p=this.nodeData.children.length,t=this.formatGetGeneralization(),e=[];t.forEach(i=>{if(!i.range){e.push(i);return}i.range.length>0&&i.range[0]<=p-1&&i.range[1]<=p-1&&e.push(i)}),e.length!==t.length&&this.setData({generalization:e})}function $e(){this.isGeneralization||(this._generalizationList.forEach(p=>{p.generalizationNode.style.onRemove(),p.generalizationLine&&(p.generalizationLine.remove(),p.generalizationLine=null),p.generalizationNode&&(this.renderer.removeNodeFromActiveList(p.generalizationNode),p.generalizationNode.remove(),p.generalizationNode=null)}),this._generalizationList=[],this.generalizationBelongNode&&this.nodeDraw.find(".generalization_"+this.generalizationBelongNode.uid).remove())}function Ge(){this.isGeneralization||this._generalizationList.forEach(p=>{p.generalizationLine&&p.generalizationLine.hide(),p.generalizationNode&&p.generalizationNode.hide()})}function We(){this.isGeneralization||this._generalizationList.forEach(p=>{p.generalizationLine&&p.generalizationLine.show(),p.generalizationNode&&p.generalizationNode.show()})}function Ue(p){this._generalizationList.forEach(t=>{t.generalizationLine.opacity(p),t.generalizationNode.group.opacity(p)})}function Ye(){const p=this.generalizationBelongNode,t=p.formatGetGeneralization(),e=p.getGeneralizationNodeIndex(this),i=t[e],s=this.getStyle("hoverRectColor")||this.mindMap.opt.hoverRectColor,a=s?{stroke:s}:null;Array.isArray(i.range)&&i.range.length>0?this.mindMap.renderer.highlightNode(p,i.range,a):this.mindMap.renderer.highlightNode(p,null,a)}function Ve(){this.mindMap.renderer.closeHighlightNode()}const Tt={formatGetGeneralization:Ie,checkHasGeneralization:Oe,checkHasSelfGeneralization:Fe,getGeneralizationNodeIndex:Be,createGeneralizationNode:be,updateGeneralization:ke,updateGeneralizationData:He,renderGeneralization:Pe,removeGeneralization:$e,hideGeneralization:Ge,showGeneralization:We,setGeneralizationOpacity:Ue,handleGeneralizationMouseenter:Ye,handleGeneralizationMouseleave:Ve},Xe='<svg t="1618141562310" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13476" width="200" height="200"><path d="M475.136 327.168v147.968h-147.968v74.24h147.968v147.968h74.24v-147.968h147.968v-74.24h-147.968v-147.968h-74.24z m36.864-222.208c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13477"></path></svg>',je='<svg t="1618141589243" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13611" width="200" height="200"><path d="M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13612"></path><path d="M252.928 474.624h518.144v74.24h-518.144z" p-id="13613"></path></svg>',Ke='<svg width="14px" height="14px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13611" width="200" height="200"><path fill="#ffffff" d="M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z" p-id="13612"></path><path fill="#ffffff" d="M252.928 474.624h518.144v74.24h-518.144z" p-id="13613"></path></svg>',Ze='<svg width="12px" height="12px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#ffffff" d="M1008.128 614.4a25.6 25.6 0 0 0-27.648 5.632l-142.848 142.848L259.072 186.88 401.92 43.52A25.6 25.6 0 0 0 384 0h-358.4a25.6 25.6 0 0 0-25.6 25.6v358.4a25.6 25.6 0 0 0 43.52 17.92l143.36-142.848 578.048 578.048-142.848 142.848a25.6 25.6 0 0 0 17.92 43.52h358.4a25.6 25.6 0 0 0 25.6-25.6v-358.4a25.6 25.6 0 0 0-15.872-25.088z"  /></svg>',Lt={open:Xe,close:je,remove:Ke,imgAdjust:Ze};function qe(){if(this._openExpandNode)return;let{close:p,open:t}=this.mindMap.opt.expandBtnIcon||{};this.mindMap.opt.isShowExpandNum?(this._openExpandNode=new k,this._openExpandNode.addClass("smm-expand-btn-text"),this._openExpandNode.attr({"text-anchor":"middle","dominant-baseline":"middle",x:this.expandBtnSize/2,y:2})):(this._openExpandNode=D(t||Lt.open).size(this.expandBtnSize,this.expandBtnSize),this._openExpandNode.x(0).y(-this.expandBtnSize/2)),this._closeExpandNode=D(p||Lt.close).size(this.expandBtnSize,this.expandBtnSize),this._closeExpandNode.x(0).y(-this.expandBtnSize/2),this._fillExpandNode=new Pt().size(this.expandBtnSize),this._fillExpandNode.x(0).y(-this.expandBtnSize/2),this.style.iconBtn(this._openExpandNode,this._closeExpandNode,this._fillExpandNode)}function Je(p=[]){return p.reduce((t,e)=>t+this.sumNode(e.children||[]),p.length)}function Qe(){let{expand:p}=this.getData();if(p===this._lastExpandBtnType)return;this._expandBtn&&this._expandBtn.clear(),this.createExpandNodeContent();let t;if(p===!1?(t=this._openExpandNode,this._lastExpandBtnType=!1):(t=this._closeExpandNode,this._lastExpandBtnType=!0),this._expandBtn){let{isShowExpandNum:e,expandBtnStyle:i,expandBtnNumHandler:n}=this.mindMap.opt;if(e)if(p)this._fillExpandNode.stroke("none");else{this._fillExpandNode.stroke({color:i.strokeColor});let s=this.sumNode(this.nodeData.children);if(typeof n=="function"){const a=n(s,this);U(a)||(s=a)}t.text(String(s))}this._expandBtn.add(this._fillExpandNode).add(t)}}function ti(){this._expandBtn&&this.renderer.layout.renderExpandBtn(this,this._expandBtn)}function ei(){!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot||(this._expandBtn?this.group.add(this._expandBtn):(this._expandBtn=new z,this._expandBtn.on("mouseover",p=>{p.stopPropagation(),this._expandBtn.css({cursor:"pointer"})}),this._expandBtn.on("mouseout",p=>{p.stopPropagation(),this._expandBtn.css({cursor:"auto"})}),this._expandBtn.on("click",p=>{p.stopPropagation(),this.mindMap.execCommand("SET_NODE_EXPAND",this,!this.getData("expand")),this.mindMap.emit("expand_btn_click",this)}),this._expandBtn.on("dblclick",p=>{p.stopPropagation()}),this._expandBtn.addClass("smm-expand-btn"),this.group.add(this._expandBtn)),this._showExpandBtn=!0,this.updateExpandBtnNode(),this.updateExpandBtnPos())}function ii(){this._expandBtn&&this._showExpandBtn&&(this._expandBtn.remove(),this._showExpandBtn=!1)}function ni(){const{alwaysShowExpandBtn:p,notShowExpandBtn:t}=this.mindMap.opt;p||t||setTimeout(()=>{this.renderExpandBtn()},0)}function si(){const{alwaysShowExpandBtn:p,notShowExpandBtn:t}=this.mindMap.opt;if(p||this._isMouseenter||t)return;let{isActive:e,expand:i}=this.getData();!e&&i&&setTimeout(()=>{this.removeExpandBtn()},0)}const Dt={createExpandNodeContent:qe,updateExpandBtnNode:Qe,updateExpandBtnPos:ti,renderExpandBtn:ei,removeExpandBtn:ii,showExpandBtn:ni,hideExpandBtn:si,sumNode:Je};function ai(p={}){this.mindMap.execCommand("SET_NODE_DATA",this,p)}function hi(p,t,e){this.mindMap.execCommand("SET_NODE_TEXT",this,p,t,e)}function oi(p){this.mindMap.execCommand("SET_NODE_IMAGE",this,p)}function ri(p){this.mindMap.execCommand("SET_NODE_ICON",this,p)}function di(p,t){this.mindMap.execCommand("SET_NODE_HYPERLINK",this,p,t)}function li(p){this.mindMap.execCommand("SET_NODE_NOTE",this,p)}function ci(p,t){this.mindMap.execCommand("SET_NODE_ATTACHMENT",this,p,t)}function pi(p){this.mindMap.execCommand("SET_NODE_TAG",this,p)}function fi(p){this.mindMap.execCommand("SET_NODE_SHAPE",this,p)}function ui(p,t){this.mindMap.execCommand("SET_NODE_STYLE",this,p,t)}function gi(p){this.mindMap.execCommand("SET_NODE_STYLES",this,p)}const St={setData:ai,setText:hi,setImage:oi,setIcon:ri,setHyperlink:di,setNote:li,setAttachment:ci,setTag:pi,setShape:fi,setStyle:ui,setStyles:gi},mi='<svg t="1624174958075" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7982" ><path d="M435.484444 251.733333v68.892445L295.822222 320.682667a168.504889 168.504889 0 0 0-2.844444 336.952889h142.506666v68.892444H295.822222a237.397333 237.397333 0 0 1 0-474.794667h139.662222z m248.945778 0a237.397333 237.397333 0 0 1 0 474.851556H544.654222v-69.006222l139.776 0.056889a168.504889 168.504889 0 0 0 2.844445-336.952889H544.597333V251.676444h139.776z m-25.827555 203.946667a34.474667 34.474667 0 0 1 0 68.892444H321.649778a34.474667 34.474667 0 0 1 0-68.892444h336.952889z" p-id="7983"></path></svg>',xi='<svg t="1624195132675" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8792" ><path d="M152.768 985.984 152.768 49.856l434.56 0 66.816 0 234.048 267.392 0 66.816 0 601.92L152.768 985.984 152.768 985.984zM654.144 193.088l0 124.16 108.736 0L654.144 193.088 654.144 193.088zM821.312 384.064l-167.168 0L587.328 384.064 587.328 317.312 587.328 116.736 219.584 116.736 219.584 919.04l601.728 0L821.312 384.064 821.312 384.064zM386.688 517.888 319.808 517.888 319.808 450.944l66.816 0L386.624 517.888 386.688 517.888zM386.688 651.584 319.808 651.584 319.808 584.704l66.816 0L386.624 651.584 386.688 651.584zM386.688 785.344 319.808 785.344l0-66.88 66.816 0L386.624 785.344 386.688 785.344zM721.024 517.888 453.632 517.888 453.632 450.944l267.392 0L721.024 517.888 721.024 517.888zM654.144 651.584 453.632 651.584 453.632 584.704l200.512 0L654.144 651.584 654.144 651.584zM620.672 785.344l-167.04 0 0-66.88 167.04 0L620.672 785.344 620.672 785.344z" p-id="8793"></path></svg>',Mi='<svg t="1711935375590" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3864" xmlns:xlink="http://www.w3.org/1999/xlink" width="128" height="128"><path d="M516.373333 375.978667l136.576-136.576a147.797333 147.797333 0 0 1 208.853334-0.021334 147.690667 147.690667 0 0 1-0.042667 208.832l-204.8 204.778667v0.021333l-153.621333 153.6c-85.973333 85.973333-225.28 85.973333-311.253334 0.021334-85.994667-85.973333-85.973333-225.216 0.149334-311.36L431.146667 256.362667a21.333333 21.333333 0 0 0-30.165334-30.165334L162.069333 465.066667c-102.805333 102.826667-102.826667 269.056-0.149333 371.733333 102.613333 102.613333 268.970667 102.613333 371.584 0l153.6-153.642667h0.021333l0.021334-0.021333 204.778666-204.778667c74.325333-74.325333 74.346667-194.858667 0.021334-269.184-74.24-74.24-194.88-74.24-269.162667 0.042667l-136.576 136.554667-187.626667 187.626666a117.845333 117.845333 0 0 0-0.106666 166.826667 118.037333 118.037333 0 0 0 166.826666-0.106667l255.850667-255.829333a21.333333 21.333333 0 0 0-30.165333-30.165333L435.136 669.973333a75.370667 75.370667 0 0 1-106.496 0.106667 75.178667 75.178667 0 0 1 0.128-106.496l187.605333-187.605333z" p-id="3865"></path></svg>',Vt=[{name:"优先级图标",type:"priority",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#E93B30"></path><path d="M580.309333 256h-75.52c-10.666667 29.824-30.165333 55.765333-58.709333 78.165333-28.416 22.314667-54.869333 37.418667-79.146667 45.397334v84.608a320 320 0 0 0 120.234667-70.698667v352.085333H580.266667V256z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.957333 1024C229.248 1024 0 794.752 0 512S229.248 0 511.957333 0C794.752 0 1024 229.248 1024 512s-229.248 512-512.042667 512z" fill="#FA8D2E"></path><path d="M667.946667 658.602667h-185.301334c4.864-8.533333 11.178667-17.066667 19.072-25.984 7.808-8.874667 26.453333-26.837333 55.936-53.888 29.525333-27.008 49.877333-47.786667 61.226667-62.165334 16.981333-21.717333 29.44-42.453333 37.290667-62.293333 7.808-19.84 11.776-40.746667 11.776-62.677333 0-38.570667-13.738667-70.741333-41.088-96.725334C599.466667 268.928 561.706667 256 513.834667 256c-43.690667 0-80.128 11.136-109.354667 33.578667-29.098667 22.4-46.506667 59.306667-52.010667 110.805333l93.184 9.301333c1.792-27.349333 8.405333-46.890667 19.754667-58.624 11.434667-11.776 26.837333-17.664 46.165333-17.664 19.541333 0 34.858667 5.589333 45.909334 16.768 11.136 11.264 16.682667 27.221333 16.682666 48.042667 0 18.858667-6.4 37.930667-19.242666 57.258667-9.472 14.037333-35.157333 40.533333-77.098667 79.872-52.096 48.554667-87.04 87.509333-104.704 116.821333A226.688 226.688 0 0 0 341.333333 745.429333h326.613334v-86.826666z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#2E66FA"></path><path d="M627.754667 731.733333c-29.354667 25.088-66.901333 37.632-112.725334 37.632-44.928 0-81.792-11.52-110.592-34.773333-33.066667-26.538667-49.877333-64.469333-50.304-114.133333h92.16c0.426667 21.76 7.552 38.314667 21.333334 49.664 12.288 10.88 28.117333 16.341333 47.402666 16.341333 20.309333 0 36.778667-6.101333 49.322667-18.432 12.544-12.330667 18.773333-29.568 18.773333-51.797333 0-21.290667-6.229333-38.186667-18.773333-50.773334-12.544-12.501333-29.866667-18.773333-52.138667-18.773333h-13.525333v-80.042667H512c42.112 0 63.274667-21.034667 63.274667-63.146666 0-20.309333-5.888-36.096-17.706667-47.445334a60.757333 60.757333 0 0 0-43.818667-17.066666c-17.493333 0-32 5.504-43.434666 16.298666-11.562667 10.88-17.792 25.728-18.773334 44.714667H359.68c0.981333-43.946667 16.042667-78.976 45.397333-104.96 29.354667-25.941333 65.706667-39.04 109.226667-39.04 44.928 0 81.792 13.525333 110.592 40.490667 28.8 26.922667 43.306667 61.610667 43.306667 104.149333 0 48.213333-19.413333 82.688-58.154667 103.552 43.52 23.125333 65.28 61.44 65.28 114.858667 0 48.128-15.957333 85.76-47.573333 112.682666z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M600.96 256v309.802667h60.117333v81.536h-60.16v98.218666h-90.154666v-98.218666H311.466667v-81.237334L522.666667 256h78.293333zM510.72 399.104l-112.042667 166.698667h112.042667V399.104z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M470.912 343.552h175.786667V256H400.256l-47.786667 253.952 75.434667 10.837333c21.205333-23.552 45.269333-35.413333 72.021333-35.413333 21.546667 0 38.997333 7.509333 52.437334 22.4 13.312 15.018667 20.053333 37.418667 20.053333 67.328 0 31.872-6.741333 55.765333-20.181333 71.552-13.397333 15.872-29.866667 23.765333-49.237334 23.765333-17.066667 0-32.085333-6.186667-45.013333-18.432-13.013333-12.373333-20.821333-29.013333-23.466667-50.133333L341.333333 611.498667c5.546667 40.874667 22.485333 73.429333 50.730667 97.621333 28.330667 24.32 64.938667 36.437333 109.866667 36.437333 56.149333 0 100.053333-21.546667 131.754666-64.554666a176.64 176.64 0 0 0 34.816-107.52c0-48.042667-14.378667-87.210667-43.221333-117.333334-28.8-30.208-63.957333-45.312-105.514667-45.312-21.674667 0-42.922667 5.248-63.829333 15.616l14.976-82.901333z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512 0c282.88 0 512 229.205333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M519.210667 256c36.992 0 67.626667 10.368 91.776 31.189333 24.192 20.821333 39.68 51.029333 46.293333 90.709334l-90.197333 9.984c-2.176-18.56-7.978667-32.298667-17.28-41.173334-9.258667-8.874667-21.418667-13.226667-36.224-13.226666-19.754667 0-36.437333 8.789333-50.048 26.453333-13.696 17.664-22.314667 54.613333-25.856 110.549333 23.296-27.52 52.138667-41.258667 86.656-41.258666 38.997333 0 72.362667 14.805333 100.181333 44.544 27.733333 29.696 41.685333 68.010667 41.685333 114.858666 0 49.877333-14.634667 89.856-43.818666 119.936-29.226667 30.208-66.730667 45.226667-112.554667 45.226667-49.066667 0-89.429333-19.072-121.130667-57.344C357.12 658.218667 341.333333 595.541333 341.333333 508.416c0-89.344 16.469333-153.813333 49.493334-193.194667C423.722667 275.754667 466.56 256 519.168 256z m-9.472 241.834667c-17.962667 0-33.066667 6.997333-45.525334 21.12-12.330667 14.037333-18.56 34.858667-18.56 62.293333 0 30.421333 6.912 53.76 20.906667 70.4 13.952 16.469333 29.866667 24.746667 47.786667 24.746667 17.28 0 31.701333-6.826667 43.178666-20.309334 11.52-13.525333 17.237333-35.669333 17.237334-66.56 0-31.658667-6.186667-54.869333-18.517334-69.546666a58.197333 58.197333 0 0 0-46.506666-22.144z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.752 0 512S229.248 0 512.042667 0C794.752 0 1024 229.248 1024 512s-229.248 512-511.957333 512z" fill="#6D768D"></path><path d="M673.024 273.066667H354.133333v86.869333h212.224a691.2 691.2 0 0 0-104.746666 187.989333c-26.026667 70.101333-39.978667 138.88-41.429334 206.293334h89.6c-0.298667-42.922667 6.698667-91.776 21.034667-146.474667a654.72 654.72 0 0 1 62.08-154.965333c27.136-48.554667 53.888-85.76 80.128-111.701334V273.066667z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z" fill="#6D768D"></path><path d="M512.426667 256c46.208 0 82.048 11.861333 107.605333 35.541333 25.6 23.68 38.314667 53.674667 38.314667 89.898667 0 22.613333-5.802667 42.666667-17.578667 60.330667a111.445333 111.445333 0 0 1-49.450667 40.277333c26.965333 10.837333 47.36 26.752 61.312 47.658667 13.994667 20.906667 21.034667 45.013333 21.034667 72.362666 0 45.098667-14.336 81.834667-42.965333 109.952-28.586667 28.245333-66.602667 42.368-114.090667 42.368-44.245333 0-81.066667-11.648-110.464-34.986666-34.645333-27.52-52.010667-65.28-52.010667-113.365334 0-26.368 6.528-50.645333 19.626667-72.746666 13.056-22.144 33.578667-39.210667 61.696-51.242667-24.064-10.154667-41.557333-24.192-52.48-41.941333a109.824 109.824 0 0 1-16.512-58.666667c0-36.224 12.757333-66.218667 37.973333-89.898667 25.386667-23.68 61.354667-35.541333 108.032-35.541333z m1.28 265.429333c-22.784 0-39.722667 7.978667-50.901334 23.893334-11.136 15.786667-16.64 33.066667-16.64 51.498666 0 25.984 6.485333 46.208 19.712 60.714667 13.098667 14.506667 29.525333 21.802667 49.152 21.802667 19.242667 0 35.157333-6.997333 47.786667-20.992 12.629333-13.909333 18.858667-34.048 18.858667-60.416 0-23.082667-6.314667-41.557333-19.2-55.466667a63.274667 63.274667 0 0 0-48.725334-21.034667z m-0.341334-191.488c-17.792 0-32 5.333333-42.581333 16-10.538667 10.666667-15.872 24.746667-15.872 42.325334 0 18.645333 5.248 33.152 15.701333 43.648 10.453333 10.453333 24.362667 15.658667 41.770667 15.658666 17.664 0 31.658667-5.290667 42.24-15.872 10.538667-10.581333 15.872-25.173333 15.872-43.818666 0-17.493333-5.248-31.573333-15.701333-42.154667s-24.277333-15.786667-41.429334-15.786667z" fill="#FFFFFF"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.333333 229.248 0 512 0c282.88 0 512 229.333333 512 512.042667C1024 794.794667 794.88 1024 512 1024z" fill="#6D768D"></path><path d="M497.28 256c49.365333 0 89.856 19.157333 121.429333 57.429333 31.701333 38.229333 47.488 101.205333 47.488 188.842667 0 89.173333-16.384 153.386667-49.365333 192.853333-32.853333 39.594667-75.605333 59.264-128.426667 59.264-37.888 0-68.608-10.154667-91.989333-30.506666s-38.4-50.816-45.013333-91.306667l90.112-9.984c2.261333 18.474667 8.021333 32.085333 17.28 41.088 9.173333 8.874667 21.418667 13.312 36.608 13.312 19.2 0 35.541333-8.874667 48.981333-26.752 13.44-17.749333 22.016-54.613333 25.770667-110.549333-23.466667 27.264-52.821333 40.874667-88.064 40.874666-38.314667 0-71.253333-14.72-99.114667-44.330666C355.242667 506.709333 341.333333 468.224 341.333333 420.864c0-49.493333 14.592-89.258667 43.946667-119.466667C414.549333 271.104 451.925333 256 497.237333 256z m-4.352 77.482667c-17.237333 0-31.658667 6.826667-43.008 20.437333-11.477333 13.653333-17.194667 35.84-17.194667 66.816 0 31.402667 6.229333 54.485333 18.645334 69.205333 12.458667 14.72 27.946667 22.101333 46.592 22.101334 18.005333 0 33.066667-7.082667 45.44-21.205334 12.330667-14.208 18.432-35.029333 18.432-62.506666 0-29.994667-6.912-53.376-20.821334-69.973334-13.824-16.597333-29.866667-24.874667-48.085333-24.874666z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z" fill="#6D768D"></path><path d="M619.946667 273.066667c46.976 0 83.754667 16.042667 110.250666 48.042666 31.573333 37.973333 47.36 100.864 47.36 188.672 0 87.722667-15.829333 150.698667-47.658666 189.056-26.325333 31.616-62.976 47.36-109.952 47.36-47.274667 0-85.418667-17.237333-114.346667-51.968-28.885333-34.602667-43.392-96.426667-43.392-185.386666 0-87.168 15.872-150.016 47.701333-188.416 26.282667-31.488 62.933333-47.36 110.037334-47.36z m-207.488 12.8v452.266666H325.504V411.690667A299.904 299.904 0 0 1 213.333333 476.373333V398.933333c22.656-7.296 47.36-21.12 73.856-41.514666 26.624-20.522667 44.842667-44.288 54.784-71.552h70.485334z m207.488 60.842666c-11.306667 0-21.461333 3.413333-30.336 10.24-8.874667 6.826667-15.786667 19.157333-20.693334 36.864-6.4 22.997333-9.642667 61.653333-9.642666 115.968 0 54.442667 2.944 91.733333 8.661333 112.128 5.802667 20.352 13.098667 33.877333 21.845333 40.618667 8.789333 6.741333 18.858667 10.154667 30.165334 10.154667 11.349333 0 21.376-3.498667 30.250666-10.325334 8.874667-6.826667 15.786667-19.157333 20.693334-36.778666 6.4-22.826667 9.642667-61.354667 9.642666-115.797334 0-54.314667-2.858667-91.648-8.661333-112.042666-5.802667-20.352-13.013333-33.962667-21.76-40.789334a47.616 47.616 0 0 0-30.165333-10.24z" fill="#FFFFFF"></path></svg>'}]},{name:"进度图标",type:"progress",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144-294.144A414.72 414.72 0 0 1 928 512c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512h416c0 229.76-186.24 416-416 416z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144 294.144A414.72 414.72 0 0 1 512 928z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96v832z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512l-294.144 294.144A414.72 414.72 0 0 1 96 512c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512H96c0-229.76 186.24-416 416-416V512z" fill="#FFFFFF"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z" fill="#12BB37"></path><path d="M512 512L217.856 217.856A414.72 414.72 0 0 1 512 96V512z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#12BB37"></path><path d="M716.629333 341.333333h-51.328a35.072 35.072 0 0 0-28.330666 14.293334l-171.989334 233.984-77.909333-106.026667a35.2 35.2 0 0 0-28.330667-14.293333H307.413333c-7.082667 0-11.264 7.936-7.082666 13.653333l136.32 185.472a35.2 35.2 0 0 0 56.533333 0l230.4-313.429333a8.533333 8.533333 0 0 0-6.954667-13.653334z" fill="#FFFFFF"></path></svg>'}]},{name:"表情图标",type:"expression",list:[{name:"1",icon:'<svg t="1624457751393" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12255"><path d="M1.097856 1.097642h1021.804717v1021.804716H1.097856z" fill="#F09495" p-id="12256"></path><path d="M1024.000214 1024H0.000214V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.195498v1019.609432z" fill="#FFFFFF" p-id="12257"></path><path d="M234.695985 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12258"></path><path d="M234.695985 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115s28.339115 12.772559 28.339115 28.339115c0.099786 15.666342-12.672773 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617-11.774703-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12259"></path><path d="M776.232528 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z" fill="#040000" p-id="12260"></path><path d="M776.232528 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115 15.666342 0 28.339115 12.772559 28.339115 28.339115 0 15.666342-12.772559 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617c-0.099786-14.468914-11.874488-26.243617-26.243617-26.243617z" fill="#FFFFFF" p-id="12261"></path><path d="M512.000214 671.656987c-52.58702 0-105.872539-17.961411-105.872539-52.387449S459.413194 566.882089 512.000214 566.882089s105.872539 17.961411 105.87254 52.387449S564.587234 671.656987 512.000214 671.656987z m0-74.240499c-21.952836 0-43.207172 3.592282-58.2748 9.77899-13.870201 5.68778-17.06334 11.275775-17.06334 12.07406s3.19314 6.386279 17.06334 12.07406c15.067628 6.186708 36.321965 9.77899 58.2748 9.77899s43.207172-3.592282 58.274801-9.77899c13.870201-5.68778 17.06334-11.275775 17.06334-12.07406s-3.19314-6.386279-17.06334-12.07406c-15.067628-6.286494-36.321965-9.77899-58.274801-9.77899z" fill="#040000" p-id="12262"></path></svg>'},{name:"2",icon:'<svg t="1624457767572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1048"><path d="M0 0h1024v1024H0z" fill="#E6A6C9" p-id="1049"></path><path d="M315.1 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM738.7 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM293.5 698.8l-14.5-1.3c0.1-0.6 1.5-14.6 15.1-27.9 17.2-16.7 45-24.8 82.7-24 4.9-0.1 10.9-10.5 16.1-19.6 8.4-14.7 19-33.1 37.9-34.3 19.4-1.2 42.2 16.4 71.5 55.4 9.9 5.2 16.5 11.2 21.8 16.1 8.4 7.7 13.1 11.9 25.1 10.8 14.9-1.4 38.9-11.1 77.5-31.4 26.8-28.4 56.4-41.4 83.5-36.6 27.9 4.9 50.6 27.6 67.5 67.5l-13.4 5.7c-14.7-34.5-34.3-54.9-56.7-58.8-22.3-3.9-47.6 7.8-71.2 33.1l-0.8 0.9-1.1 0.6c-85.6 45.1-99.4 38-120.2 19.1-5.5-5-11.2-10.2-20.1-14.7l-1.5-0.8-1-1.4c-32.2-43.2-50.4-51.6-60-51-11.1 0.7-18.8 14-26.2 27-7.6 13.2-15.4 26.9-28.8 26.9h-0.2c-78.4-1.6-83 38.3-83 38.7z" fill="#040000" p-id="1050"></path></svg>'},{name:"3",icon:'<svg t="1624457776082" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1204" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#F7E983" p-id="1205"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1206"></path><path d="M329.174412 344.491728a38.118106 10.277919 57.6 1 0 17.355867-11.014369 38.118106 10.277919 57.6 1 0-17.355867 11.014369Z" fill="#040000" p-id="1207"></path><path d="M644.769475 355.956059a11.175989 36.321965 30 1 0 36.321965-62.911488 11.175989 36.321965 30 1 0-36.321965 62.911488Z" fill="#040000" p-id="1208"></path><path d="M569.678445 671.158059c-26.343403 0-51.190021-5.288638-70.049503-14.967843-20.755408-10.577275-32.230754-25.445332-32.230755-41.710388 0-16.265056 11.475346-31.133112 32.230755-41.710387 18.859482-9.579419 43.805886-14.967843 70.049503-14.967843s51.190021 5.288638 70.049503 14.967843c20.755408 10.577275 32.230754 25.445332 32.230754 41.710387 0 16.265056-11.475346 31.133112-32.230754 41.710388-18.859482 9.679205-43.805886 14.967843-70.049503 14.967843z m0-95.095693c-49.693237 0-84.318846 20.356266-84.318846 38.517248s34.625609 38.517248 84.318846 38.517248 84.318846-20.356266 84.318846-38.517248-34.725395-38.517248-84.318846-38.517248z" fill="#040000" p-id="1209"></path></svg>'},{name:"4",icon:'<svg t="1624457781889" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1363" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#A6D9E2" p-id="1364"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1365"></path><path d="M376.194134 348.950302m-23.44962 0a23.44962 23.44962 0 1 0 46.89924 0 23.44962 23.44962 0 1 0-46.89924 0Z" fill="#040000" p-id="1366"></path><path d="M629.150672 348.950302m-24.647047 0a24.647047 24.647047 0 1 0 49.294095 0 24.647047 24.647047 0 1 0-49.294095 0Z" fill="#040000" p-id="1367"></path><path d="M397.847613 603.503411c13.471058 8.282206 28.738258 14.468914 43.7061 19.458195 29.835899 9.978562 62.266225 14.169558 93.299551 7.483921 21.054765-4.490353 40.213604-14.369129 56.778016-28.039758 6.785422-5.587995-2.893783-15.167414-9.579419-9.579419-46.999026 38.916391-112.258819 31.033327-163.847983 6.086922-4.590138-2.195284-9.080491-4.490353-13.371272-7.184564-7.583707-4.590138-14.468914 7.184564-6.984993 11.774703z" fill="#040000" p-id="1368"></path><path d="M627.753674 534.052621c-31.033327 24.048334-58.474371 68.253362-37.419607 106.970182 10.577275 19.35841 29.835899 32.629897 48.795167 42.708244 7.982849 4.190996 15.067628-7.883064 7.084779-12.07406-25.245761-13.271487-53.485091-35.324108-49.094524-66.557006 2.793997-20.156695 15.766127-37.319821 29.736114-51.190022 3.392711-3.392711 6.984993-6.785422 10.776847-9.77899 2.993569-2.295069 2.394855-7.483921 0-9.878776-2.893783-3.19314-6.885208-2.49464-9.878776-0.199572z" fill="#040000" p-id="1369"></path></svg>'},{name:"5",icon:'<svg t="1624457787809" class="icon" viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1523" ><path d="M1.1 1.097642h1021.804716v1021.804716H1.1z" fill="#AD6F59" p-id="1524"></path><path d="M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z" fill="#FFFFFF" p-id="1525"></path><path d="M411.829832 330.730879a38.118106 10.277919 57.6 1 0 17.355867-11.014368 38.118106 10.277919 57.6 1 0-17.355867 11.014368Z" fill="#040000" p-id="1526"></path><path d="M480.669675 609.989476c11.774703-25.844475 27.740401-51.788735 44.60417-73.342429 13.770415-17.462483 29.237186-33.92711 47.897096-44.803742 17.262912-10.078347 35.324108-13.67063 54.283376-6.58585 11.974274 4.390567 23.948548 14.468914 33.128825 24.547261 14.369129 15.865913 25.145975 34.625609 34.725394 53.684662 4.290782 8.581563 17.262912 0.997856 12.972131-7.583707-15.167414-30.334828-35.224323-63.763009-66.157864-80.327421-21.054765-11.37556-44.504385-11.475346-66.157864-1.895927-21.054765 9.280062-38.617034 25.644904-53.485091 42.907815-14.468914 16.863769-27.041902 35.324108-38.217891 54.582733-5.887351 10.178133-11.674917 20.555837-16.464627 31.232898-1.696355 3.692068-0.997856 7.982849 2.694212 10.277918 3.19314 1.895927 8.581563 0.898071 10.178133-2.694211z" fill="#040000" p-id="1527"></path><path d="M663.863649 338.091735a14.468914 33.727538 30 1 0 33.727538-58.417811 14.468914 33.727538 30 1 0-33.727538 58.417811Z" fill="#040000" p-id="1528"></path></svg>'},{name:"6",icon:'<svg t="1624457794933" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1680" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#83CEE3" p-id="1681"></path><path d="M369 375.8m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1682"></path><path d="M369 411.7c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.1 36-36 36z m0-69.1c-18.3 0-33.2 14.9-33.2 33.2S350.7 409 369 409s33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1683"></path><path d="M672.2 333.6c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.3-7.6-13zM578.2 720.9c-12.5-96.7-33.3-154.7-55.6-155.6-8.8 3.9-22.3 17.5-37.7 60.1-10.8 29.8-18.4 62.2-23 81.6-1.2 5.1-2.1 9.1-2.9 11.8l-9.3-2.4c0.7-2.6 1.6-6.6 2.8-11.6 14.9-63 36-136.8 67.5-148.8l0.8-0.3h0.8c18.2-0.4 33.2 19.5 45.8 60.8 10.2 33.3 16.7 74.6 20.5 103.3l-9.7 1.1z" fill="#040000" p-id="1684"></path></svg>'},{name:"7",icon:'<svg t="1624457802025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1838" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#8CC66D" p-id="1839"></path><path d="M375.778679 404.47473a14.5 33.8 30 1 0 33.8-58.543317 14.5 33.8 30 1 0-33.8 58.543317Z" fill="#040000" p-id="1840"></path><path d="M627.220263 374.211388a43.1 11.6 57.6 1 0 19.588408-12.431182 43.1 11.6 57.6 1 0-19.588408 12.431182Z" fill="#040000" p-id="1841"></path><path d="M451.1 548.5c17.6-9.3 63.9-30 105.3-16.2 17 20.3 32.7 98.8 28.8 138.1-27.5 10.2-82.5 10.2-106.1 5.8-8.3-10.5-32.7-81.8-35.3-114.6-0.4-5.5 2.5-10.6 7.3-13.1z" fill="#040000" p-id="1842"></path></svg>'},{name:"8",icon:'<svg t="1624457816632" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1996" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#5A74B8" p-id="1997"></path><path d="M357.7 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="1998"></path><path d="M357.7 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2 33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="1999"></path><path d="M676 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z" fill="#040000" p-id="2000"></path><path d="M676 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2c18.3 0 33.2-14.9 33.2-33.2s-14.9-33.2-33.2-33.2z" fill="#FFFFFF" p-id="2001"></path><path d="M347.6 684.1c0.3-0.9 0.6-1.7 0.9-2.6 0.2-0.5 1.4-3.2 0.3-0.8 0.6-1.4 1.3-2.9 2-4.3 3.2-6.3 6-10.7 10.9-15.3 4.3-4 10.8-7.5 17.1-6.1 3.9 0.9 7.9 4.9 11.1 7.2 3.1 2.2 6.3 4.5 9.7 6.2 7.5 3.8 15.3 4.4 23.4 1.9 4.7-1.5 9.2-3.6 13.6-5.9 5-2.6 10.7-5 14.2-9.5 4.5-5.7 6.1-8.5 11.4-14.1 1-1 2-2 3.1-3 0.2-0.2 2.2-1.7 0.6-0.5 0.6-0.4 1.2-0.9 1.8-1.3 1-0.6 2.1-1.3 3.2-1.7-2 0.8 0.2 0 0.6-0.1 2.3-0.7-0.3-0.2 1.2-0.3 2.8-0.1 3.6 0 5.5 1 3.8 1.9 6.6 4.7 9.5 7.8 4.5 5 7.5 11.1 11.7 16.2 1.8 2.2 3.7 4.3 5.4 6.5 8.1 10.3 17.7 22.2 32.2 22 8.8-0.1 16.6-5.2 22.6-11.2 4.2-4.1 7.7-8.9 11-13.7 2.9-4.2 4.6-9.9 6.2-13.5 3.2-7.1 7.2-13.1 13-18.1 4.8-4.2 11.1-6.5 16.7-5.3 10.5 2.4 17.2 12.1 23.1 20.2 4.7 6.5 9.8 13 16 18.2 7.8 6.4 17.1 11.4 27.5 11.1 14.1-0.4 25.5-9.5 34.2-19.9 3-3.6 3.6-8.8 0-12.4-3.1-3.1-9.4-3.7-12.4 0-6.3 7.6-14.7 15.9-24.9 14.7-2.2-0.3-5.3-1.5-7.9-3.1-3.5-2.1-6.1-4.4-9.1-7.5-4.9-5.1-6.8-8.1-10.9-13.8-7.3-10.1-16.1-19.6-28.2-23.7-18.5-6.3-35.7 5.6-46 20.1-2.4 3.3-4.4 6.9-6.1 10.6-1.8 3.9-2.7 8.5-5.2 11.9-3.1 4.4-6.2 8.8-10.2 12.5-3 2.8-5.7 4.4-8.6 5.1-0.4 0.1-1.7 0.1 0.1 0h-2.2c2.1 0.1 0 0-0.5-0.1-0.7-0.2-1.4-0.4-2-0.6 1.8 0.7-1.8-1.1-2.4-1.5l-1.2-0.9c1.5 1.2-0.9-0.9-1.2-1.1-4.7-4.3-8.4-9.5-12.3-14.4-10.9-13.6-20.9-34-41-34.9-14.2-0.6-24.5 10.6-32.4 20.8-1.2 1.6-2.5 3.2-3.7 4.8-1.5 1.9 1.1-1.4-0.4 0.5-0.4 0.5-0.8 1.2-1.3 1.6-1.7 1.4-4.6 2.6-6.6 3.6-2.9 1.6-5.9 3.2-9 4.5-1.6 0.7-3.4 1.2-5.1 1.7-2.2 0.6-0.7 0.5-2.8 0.4-2.8 0-3.9-0.4-6.6-1.9-3.9-2.2-7.5-4.9-11.1-7.5-5.6-4-10-6.9-17-7.5-10.5-0.9-20.3 3.2-28.2 9.9-9.4 8.1-16.4 20.2-20.1 32-3.6 11.2 13.3 15.8 16.8 5.1z" fill="#040000" p-id="2002"></path></svg>'},{name:"9",icon:'<svg t="1624457826949" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2156" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F0884F" p-id="2157"></path><path d="M287.2 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM598 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM505.9 527.1c3.4 0.7 6.8 1.7 10.2 2.8 6.7 2.2 10.4 3.5 16.6 7.7 1.6 1.1-0.5-0.5 0.6 0.5 0.6 0.5 1.1 1.1 1.7 1.6 1.5 1.4-0.1-0.4 0.5 0.6 0.4 0.6 0.7 1.2 1 1.8-1-2 0.1 0 0 0.5 0.1-2-0.1 0-0.1 0-0.1 0.8 0 0.7 0.1-0.5-0.1 0.4-0.1 0.7-0.3 1.1-0.6 1 0.7-0.9-0.4 1-1.6 2.5-4.6 5.4-8.1 7.8-6.8 4.6-14.4 8.2-22 11.4-7 3-7.4 11.9 0 14.8 7.4 2.8 15 5.3 22.4 8.1 3.1 1.1 4.2 1.5 6.9 2.9 1.1 0.6 2.1 1.2 3.2 1.8 1.2 0.8-0.7-0.5 0.1 0 0.4 0.3 0.8 0.7 1.1 1.1 0.6 0.8-1.1-1.2-0.2-0.2 0.8 0.9-0.3-1.4-0.1-0.2 0.1 0.9 0.2-1.9 0-0.9-0.1 0.5-0.8 1.8 0 0.2-0.2 0.5-0.5 1-0.8 1.4-0.3 0.3-0.9 1.3-0.3 0.5-0.5 0.7-1.1 1.3-1.7 1.9-6.9 7.3-15.9 12.8-24.4 18.1-8.3 5.3-0.6 18.5 7.7 13.2 9.9-6.3 20.9-12.8 28.6-21.8 4.8-5.5 8.1-12.9 4.2-19.9-3.4-6-10.5-8.9-16.6-11.4-8.6-3.5-17.5-6.2-26.2-9.5v14.8c14.4-6.1 47.2-18.8 41.2-40.3-3.5-12.9-19.4-18.9-30.8-22.6-3.4-1.1-6.9-2.1-10.5-2.9-9.1-2.2-13.3 12.5-3.6 14.6z" fill="#040000" p-id="2158"></path></svg>'},{name:"10",icon:'<svg t="1624457835383" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2312" ><path d="M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z" fill="#F6F180" p-id="2313"></path><path d="M342.9 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2314"></path><path d="M342.9 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.7 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.6-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2315"></path><path d="M702 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z" fill="#040000" p-id="2316"></path><path d="M702 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.8 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.7-28.3-28.3-28.3z" fill="#FFFFFF" p-id="2317"></path><path d="M358.7 519.9c20 22 45.5 40.4 71.3 54.8 51.2 28.5 111.7 39.9 168 19.5 44.3-16.1 80.7-47.8 110.2-83.9 3-3.7 3.6-8.9 0-12.5-3.1-3.1-9.5-3.7-12.5 0-25.5 31.4-56.2 59.7-93.7 76-27.1 11.7-56.6 15.7-85.8 12.2-24.7-2.9-49.5-11.8-71.5-23.4-18.7-9.8-36.6-22.2-51.1-34.3-7.8-6.5-15.5-13.3-22.4-20.9-7.7-8.5-20.1 4.1-12.5 12.5z" p-id="2318"></path></svg>'},{name:"11",icon:'<svg t="1624457841751" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2472" ><path d="M48.2 844.9c-68.5-210.6 186-782.1 409.1-795.4 6.3-0.4 12.5 0.2 18.6 1.6C665.1 94.6 985.4 515 987.1 821.3c0.1 20-12.9 37.9-22.4 43.1-162.7 89.8-605.8 179.7-884.4 30.9-15-7.9-24.2-26.1-32.1-50.4z" fill="#F0884F" p-id="2473"></path><path d="M401 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2474"></path><path d="M408.7 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2475"></path><path d="M527.5 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z" fill="#FFFFFF" p-id="2476"></path><path d="M527.5 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z" fill="#040000" p-id="2477"></path><path d="M450.7 517c1.1-8.2 3.2-16.4 6.1-24.1 0.1-0.3 1-2.5 0.5-1.4s0.3-0.7 0.5-1c0.7-1.4 1.4-2.8 2.2-4.1 0.4-0.8 2.8-3.9 1.3-2.1 0.8-1 1.7-1.9 2.6-2.8 1-1-1.5 1 0.1 0 0.5-0.3 1-0.6 1.5-0.8-1.3 0.7-1.2 0.3 0 0.1 1.9-0.3-1.8 0.3 0.1 0 1.2-0.2 1.5 0.3 0-0.1 0.6 0.2 1.3 0.3 1.9 0.5 0.3 0.1-1.3-0.7 0.2 0.1 0.8 0.5 1.6 0.9 2.4 1.4 1.4 1 0-0.1 1.4 1.1 0.9 0.8 1.8 1.7 2.6 2.6 1.8 1.9 3.5 3.9 5 6.1 5.1 7.1 9.3 14.8 13.2 22.6 3.5 6.9 13.7 4.7 15.8-2.1 2.6-8.7 4.8-17.4 7.4-26.1 0.9-3.2 1.9-6.4 3.2-9.4-0.7 1.6 0.8-1.6 1.2-2.2l0.9-1.5c0.7-1.2-1.4 0.7 0.1-0.1 1.7-0.9-1.2 0.3-0.3 0.1 0.8-0.2 1-1.2 0.3-0.3-0.6 0.8 0.6 0-0.5 0.2-2 0.3 2.4 0.5-1.1 0 0.5 0.1 1.2 0.2 1.6 0.4-1.1-0.8-0.8-0.4 0.2 0.2 0.7 0.4 3.4 2.3 2.7 1.8 8.9 7.1 15.9 16.9 22.5 26 2.8 3.8 7.5 5.6 11.8 3.1 3.7-2.2 5.9-8 3.1-11.8-8.2-11.1-16.6-23-27.7-31.4-6.3-4.7-14.5-7.6-21.7-3-6.7 4.2-9.6 12.5-11.9 19.6-3.2 9.9-5.5 20-8.6 29.9 5.3-0.7 10.5-1.4 15.8-2.1-7.8-15.5-24.8-50.1-48-41.7-14.1 5.1-19.7 23-22.9 36.2-0.9 3.8-1.8 7.7-2.3 11.6-0.6 4.6 1.1 9.3 6 10.6 4.2 1 10.2-1.5 10.8-6.1z" fill="#040000" p-id="2478"></path></svg>'},{name:"12",icon:'<svg t="1624457847424" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2632" ><path d="M485.538528 993.072489a362.00362 481.804818 3.149 1 0 52.933731-962.15464 362.00362 481.804818 3.149 1 0-52.933731 962.15464Z" fill="#AADCF0" p-id="2633"></path><path d="M688.2 334.1c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.4-7.6-13zM375.8 347c13.4 6.8 26.7 14 39.5 21.9 1.8 1.2 3.7 2.3 5.5 3.5 0.9 0.6 1.7 1.2 2.6 1.8 0.9 0.6 1.9 1.4 1.6 1.1 1.1 0.9 2.1 1.9 3.1 2.8 1.2 1 0-0.3 0.1 0 0-0.2-0.8-2.4-0.3-4.1 1.5-5.5 2.3-2.7 0.8-2-0.4 0.2-0.9 0.8-1.3 1.1 1.7-1.4-1.6 1.1-2.3 1.6-3.4 2.3-6.9 4.4-10.4 6.4-14.9 8.6-30.3 16.4-45.6 24.3-8.6 4.4-1 17.4 7.6 13 15-7.7 30.1-15.4 44.8-23.8 6.2-3.6 13.8-7.3 18.7-12.7 7.6-8.3-3.8-16.6-9.9-20.9-8.7-6.1-18-11.3-27.3-16.4-6.5-3.6-13-7.1-19.6-10.4-8.6-4.5-16.3 8.5-7.6 12.8zM412.8 570.9c13.5 7.7 28.5 13.3 43.3 17.9 29.8 9.2 61.7 13.1 92.6 7.3 20.6-3.9 40-12.5 56.6-25.2 2.8-2.2 4.3-5.6 2.3-9-1.6-2.8-6.2-4.5-9-2.3-48.3 36.9-113.3 30-165.6 6.7-4.6-2.1-9.2-4.2-13.7-6.7-7.3-4.2-13.9 7.2-6.5 11.3z" fill="#040000" p-id="2634"></path><path d="M644.6 505.2c-30.1 21.5-60.6 62.5-39.1 99.8 10.7 18.6 30.3 30.9 49.1 40.1 7.8 3.8 14.6-7.9 6.8-11.7-23.6-11.5-53.7-31.4-49.4-60.9 2.8-18.9 15.8-34.6 29.5-47.2 2.5-2.3 5.1-4.6 7.8-6.7 0.5-0.4 0.9-0.7 1.4-1.1-0.4 0.3-1.2 0.9-0.1 0.1l0.9-0.6c6.9-5.1 0.2-16.8-6.9-11.8z" fill="#040000" p-id="2635"></path></svg>'},{name:"13",icon:'<svg t="1624457855182" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2789" ><path d="M235.1 76.9c75.6-26.5 297.3-90.1 514.2-16.6 16.3 5.5 29.8 17.4 37.1 33 57.5 122.4 127.1 602.1 62.1 785.6a62.58 62.58 0 0 1-32.5 35.8c-109.5 51.8-428.1 136.7-609.3 37.2-14.4-7.9-25-21.3-29.7-37.1-41.9-140.6-37-627.7 19.1-798 6.1-18.7 20.5-33.4 39-39.9z" fill="#F9DABD" p-id="2790"></path><path d="M392.2 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2791"></path><path d="M618.6 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z" fill="#040000" p-id="2792"></path><path d="M512 562.6c-36 0-65.3-29.3-65.3-65.3S476 432 512 432s65.3 29.3 65.3 65.3-29.3 65.3-65.3 65.3z m0-122.9c-31.7 0-57.6 25.8-57.6 57.6s25.8 57.6 57.6 57.6c31.7 0 57.6-25.8 57.6-57.6s-25.9-57.6-57.6-57.6z" fill="#040000" p-id="2793"></path></svg>'},{name:"14",icon:'<svg t="1624457863444" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2947" ><path d="M178.1 971.5c38.1 15.9 98.7 26.6 171.3-12.3 3.7-2 8.4-1.6 11.6 1.1 43.3 35.9 123.3 80.8 236 10.9 3.8-2.4 8.7-2.4 12.6-0.2 41.8 23.9 191.6 58.2 246.6 14.2 4.4-3.5 9.1-6.6 14.5-8.5C1065 909.5 678.2-652 194.3 351c-37.5 77.8-38.4 94.1-71.9 211.3-27.6 96.3-29.1 231.3 1.4 348.1 7.2 27.3 27.3 49.9 54.3 61.1z" fill="#ABAAAA" p-id="2948"></path><path d="M468.9 349H418c-6.1 0-11.1-5-11.1-11.1V336c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.1-5 11.1-11.1 11.1zM643 471.9H390c-6.6 0-12-5.4-12-12s5.4-12 12-12h253c6.6 0 12 5.4 12 12s-5.4 12-12 12zM609 349h-61.2c-6 0-11-4.9-11-11v-2.1c0-6 4.9-11 11-11H609c6 0 11 4.9 11 11v2.1c0 6.1-4.9 11-11 11z" fill="#040000" p-id="2949"></path></svg>'},{name:"15",icon:'<svg t="1624457870536" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3103" ><path d="M673.1 318.7c3.7-17.5 5.6-35.7 5.6-54.4 0-137.9-105.5-249.7-235.6-249.7S207.4 126.4 207.4 264.3c0 55.4 17.1 106.7 45.9 148.1-55.2 63.3-88.6 145.9-88.6 236.3 0 199.2 162.1 360.6 362.1 360.6 200 0 362.1-161.5 362.1-360.6 0.1-147.3-88.7-274-215.8-330z" fill="#4F8A54" p-id="3104"></path><path d="M392 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3105"></path><path d="M386 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3106"></path><path d="M505.6 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z" fill="#FFFFFF" p-id="3107"></path><path d="M501.4 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z" fill="#040000" p-id="3108"></path><path d="M474.3 364.8h-50.9c-6.1 0-11.1-5-11.1-11.1v-1.9c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.2-5 11.1-11.1 11.1z" fill="#040000" p-id="3109"></path></svg>'},{name:"16",icon:'<svg t="1624457876371" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3263" ><path d="M246.4 227.6c-166.9 101.1-461.9 344 87 564.1 1.5 0.6 2.9 1.1 4.4 1.6 80.7 27.7 392.8 165.4 641-198.1 40-58.6 38.5-136.2-3.7-193.3C892 289.5 727 201.1 429.1 182.7c-64.1-4-127.8 11.6-182.7 44.9z" fill="#CF92BE" p-id="3264"></path><path d="M617.1 393.4c-17.4 8.8-34.9 18.1-51.2 28.9-6.9 4.6-20.3 12.3-17.4 22.6 1.2 4.3 5.6 7 9 9.5 3.7 2.7 7.6 5 11.5 7.3 18.2 10.8 37.1 20.3 55.9 30 10 5.1 18.9-10 8.8-15.1-16.4-8.4-32.9-16.9-49-26-4.5-2.6-9.1-5.2-13.5-8l-4.5-3c-0.7-0.5-1.3-1-2-1.5 1.6 1.2 0.7 0.4-0.2-0.2-1.3-0.9-0.3-0.9-0.5-0.3 0.2 0.2 0.4 0.5 0.6 0.7 1 1.9 1.3 3.7 0.8 5.7 0.1-0.6 0.7-1.4-0.6 1.3 0.7-1.5-0.1 0-0.2 0.1 0.6-0.6 1.2-1.3 1.9-1.9l1.8-1.5c1.8-1.6-0.6 0.3 1.2-0.9 2-1.5 4.1-2.9 6.2-4.3 10-6.5 20.4-12.4 30.9-18 6.5-3.5 13.1-7 19.7-10.4 9.6-5 0.8-20.1-9.2-15zM323.1 408.5c15.9 8.1 31.7 16.5 46.8 26 2.2 1.4 4.3 2.8 6.5 4.2 1 0.7 1.9 1.3 2.8 2 0.5 0.3 1 0.7 1.4 1.1-1.1-0.9-0.3-0.3 0.3 0.3 1.1 1 2.2 2.2 3.3 3.1 1.4 1.1-1-1.7-0.1-0.1-0.6-1.1-0.9-4.1 0.3-6.7 2.2-4.8 0.7 0.1 0-0.5 0 0-1.1 0.9-1.3 1 2.3-1.9 0 0-0.5 0.4-0.8 0.5-1.5 1.1-2.3 1.6-4 2.7-8.1 5.1-12.3 7.5-17.3 10-35.1 19.1-52.8 28.2-10 5.1-1.2 20.2 8.8 15.1 17.5-9 35-17.9 52-27.7 7.3-4.2 15.9-8.6 21.8-14.7 9.3-9.7-4.3-19.7-11.5-24.7-10.1-7.1-20.9-13.1-31.7-19-7.6-4.2-15.2-8.2-22.9-12.1-9.7-5.2-18.6 9.9-8.6 15zM513 592.1c-12.2 0-24.6-1.4-36.3-4.3-8-2-13.9-8.2-15.4-16.2s1.7-15.8 8.4-20.5c23.2-16.3 60.5-31.9 106.2-13 6.4 2.6 11 8.3 12.3 15.1 1.3 6.7-0.8 13.6-5.7 18.3-13.5 13.1-40.9 20.6-69.5 20.6z m-37.4-32.5c-3.4 2.4-4.9 6.2-4.2 10.2 0.8 4.1 3.6 7.1 7.7 8.1 39.1 9.7 81.2 0.7 96.1-13.7 2.4-2.3 3.4-5.6 2.7-8.9-0.7-3.4-2.9-6.2-6.1-7.5-41.2-17.2-75.1-3.1-96.2 11.8z" fill="#040000" p-id="3265"></path></svg>'},{name:"17",icon:'<svg t="1624457881793" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3419" ><path d="M1008.6 465.7c0-124.9-95.5-226.2-213.4-226.2-12 0-23.8 1.1-35.2 3.1v-3.1c0-124.9-95.5-226.2-213.4-226.2S333.4 114.6 333.4 239.5c0 2.4 0 4.8 0.1 7.2-17.1-4.7-35-7.2-53.4-7.2-117.8 0-213.4 101.3-213.4 226.2 0 92.1 51.9 171.3 126.3 206.6-13.7 29.9-21.4 63.4-21.4 98.8 0 124.9 95.5 226.2 213.4 226.2 68.8 0 130-34.5 169-88.1 39 53.6 100.2 88.1 169 88.1 117.8 0 213.4-101.3 213.4-226.2 0-41.2-10.4-79.9-28.6-113.1 60.5-39.9 100.8-111.1 100.8-192.3z" fill="#8CC66D" p-id="3420"></path><path d="M437.8 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3421"></path><path d="M649.7 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3422"></path><path d="M527.3 625.9c6.3-14.2 13.1-28.3 17.9-43 6.2-19 8.3-38.6 10.5-58.3l2.1-19.2c0.7-6.2-9-6.1-9.7 0-1.7 16.3-2.8 32.8-5.7 48.9-4.2 23.7-13.8 45-23.5 66.7-2.5 5.6 5.9 10.5 8.4 4.9z" fill="#252525" p-id="3423"></path><path d="M447.7 522.3c20.3-0.1 40.6-0.2 61-0.4l96.6-0.6c7.5 0 14.9-0.1 22.4-0.1 16.6-0.1 16.7-25.9 0-25.8-20.3 0.1-40.6 0.2-61 0.4l-96.6 0.6c-7.5 0-14.9 0.1-22.4 0.1-16.6 0.1-16.7 25.9 0 25.8z" fill="#040000" p-id="3424"></path><path d="M495.4 508.2c-10.3 3.8-9.2 20.9-9.2 29.5 0.1 16 2.1 32.3 6.1 47.8 3.5 13.7 8.7 29.9 20.6 38.7 12.9 9.5 27.6 2.1 37.6-7.9 10.2-10.3 17.8-23 24.7-35.6 11.6-21.3 20.9-43.8 29.7-66.4 3-7.8-9.5-11.1-12.5-3.4-7.4 19.1-15.3 38.1-24.7 56.4-5.9 11.5-12.2 23-20.3 33.1-2.8 3.5-5.8 6.9-9.2 9.8-1.9 1.7-1.4 1.3-3.3 2.5-1.3 0.8-2.6 1.6-3.9 2.2-0.7 0.3 1-0.2-0.8 0.3-0.6 0.2-1.2 0.3-1.8 0.5-1.1 0.3-1.2 0.2-0.5 0.1-0.6 0-1.3 0-1.9 0.1-2.2 0.1 0.6 0.5-1.8-0.2l-1.8-0.6c1.5 0.5 0.2 0.1-0.5-0.3-0.8-0.5-2.9-2.1-1.7-1.1-1-0.9-2-1.7-2.8-2.7-0.4-0.5-0.9-1-1.3-1.5 0.4 0.5 0.1 0.2-0.5-0.7-0.8-1.3-1.7-2.5-2.4-3.9-0.7-1.3-1.4-2.5-2-3.8-0.4-0.8-0.8-1.6-1.1-2.4-0.1-0.2-0.5-1.1 0 0l-0.6-1.5a86.8 86.8 0 0 1-3.3-9.8c-4.4-14.9-6.2-27.9-6.8-42.8-0.3-6.6-0.3-13.1 0.4-19.7 0.2-1.5-0.3 1.5 0.1-0.5l0.3-1.8c0.2-0.9 0.5-1.8 0.7-2.8 0.4-1.9-0.7 1.1 0.3-0.7 0.5-1-1.3 1.2-0.3 0.5-0.3 0.3-1.1 0.8-2 1.1 7.7-2.9 4.3-15.4-3.5-12.5z" fill="#040000" p-id="3425"></path></svg>'},{name:"18",icon:'<svg t="1624457899440" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3579" ><path d="M75.4 739.8c-78.7-134.4-194-455.7 401.4-579.6 9.8-2 19.2-6.2 29.2-7.5C656.8 133 947.3 205 1000.1 578.4c42.6 223.8 29.7 392.1-822 233.6-43.1-8-80.6-34.4-102.7-72.2z" fill="#F09495" p-id="3580"></path><path d="M704.6 875.4c-129 0-301.8-20.5-526.6-62.3-43.5-8.1-81.2-34.6-103.5-72.7-19.3-32.9-44.8-84.3-57.1-142.5-13.9-65.1-8.8-125.3 15.1-179.2 54.3-122.3 203.7-209.6 444-259.6 4.1-0.9 8.3-2.1 12.3-3.4 5.5-1.7 11.1-3.4 16.9-4.2 29-3.8 75.7-5.9 133.8 5.7 54.5 10.9 105.3 31 150.8 59.9C843.7 251 888.2 296 922.7 351c39.7 63.1 66.1 139.6 78.5 227.3 8.1 42.4 15.2 87.3 12.5 127.9-2.8 42.6-16.4 75.5-41.5 100.7-42.5 42.7-120.3 65-237.8 68.1-9.6 0.2-19.6 0.4-29.8 0.4zM76.3 739.3c22 37.6 59.2 63.7 102.1 71.7 242.5 45.1 424.4 65.3 556.1 61.9 116.9-3.1 194.1-25.2 236.3-67.5 55.4-55.6 44.4-142.5 28.3-226.7C976 415.8 903.4 291.5 789.2 219c-124-78.7-248.1-69.9-283.2-65.3-5.6 0.7-11.2 2.4-16.6 4.1-4.1 1.2-8.3 2.5-12.5 3.4C237.3 211.1 88.5 298 34.5 419.6c-54.6 122.8 2.8 253 41.8 319.7z" fill="#FFFFFF" p-id="3581"></path><path d="M424.1 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3582"></path><path d="M635.9 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z" fill="#040000" p-id="3583"></path><path d="M426.2 543.3c17.1 7.9 36.6 26 25.5 46.1-6.9 12.5-19.8 21.2-31.7 28.4-4.5 2.7-0.4 9.8 4.1 7.1 17.4-10.5 41.6-27.6 39-51.1-1.6-14-12.4-24.8-23.5-32.3-3-2-6.1-3.9-9.3-5.4-4.8-2.1-8.9 5-4.1 7.2zM629.5 535.4c-21.8 11.7-40.6 37-25.7 61.3 8.2 13.4 22.2 22.7 35.7 30.3 4.7 2.7 8.9-4.6 4.2-7.2-15.5-8.7-39.9-23.9-36.9-45.2 1.6-11.4 10.7-20.7 19.6-27.2 2.4-1.7 4.8-3.4 7.4-4.8 4.7-2.5 0.4-9.8-4.3-7.2z" fill="#040000" p-id="3584"></path><path d="M457.2 584.6c25.6 25.6 66.7 41 101.8 28.3 18.2-6.6 33.2-19.1 45.5-33.8 4.2-5.1-3-12.4-7.3-7.3-18.5 22-43.3 38.1-73 35-18.6-1.9-36.2-10.8-50.9-22-2.9-2.2-6.1-4.8-8.8-7.5-4.7-4.7-12 2.6-7.3 7.3z" fill="#040000" p-id="3585"></path></svg>'},{name:"19",icon:'<svg t="1624457904464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3739" ><path d="M915.9 510.5c8.4-19 13.1-39.8 13.1-61.7 0-90-78.9-162.9-176.2-162.9-3.2 0-6.3 0.1-9.5 0.2v-0.2c0-94.8-116.2-171.6-259.6-171.6S224 191.2 224 286v2c-96.2 0-174.1 72-174.1 160.9 0 38 14.3 73 38.2 100.5-41.8 29.4-68.8 75.9-68.8 128.2 0 88.9 78 160.9 174.1 160.9 17.1 0 33.6-2.3 49.3-6.5 28.9 46.1 88.7 77.7 157.6 77.7 49.4 0 94-16.2 126-42.3 32 26.1 76.6 42.3 126 42.3 77.3 0 143-39.7 166.7-95 3.1 0.2 6.3 0.2 9.5 0.2 97.3 0 176.2-72.9 176.2-162.9 0-60.6-35.7-113.4-88.8-141.5z" fill="#5A74B8" p-id="3740"></path><path d="M357.6 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3741"></path><path d="M357.5 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3742"></path><path d="M531.3 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z" fill="#FEFEFD" p-id="3743"></path><path d="M531.2 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z" fill="#040000" p-id="3744"></path><path d="M426.7 574.6c20.9 29.9 59.7 52.2 96.2 38.6 19.2-7.2 34.7-21.2 47.6-36.9 2.8-3.5 3.4-8.3 0-11.7-2.9-2.9-8.9-3.5-11.7 0-16.5 20.2-40.9 40.9-68.1 35.5-17.3-3.4-31-13.2-42.9-25.9-2-2.2-3.9-4.4-5.8-6.7-1.6-1.9 1.1 1.5-0.4-0.6-0.2-0.2-0.3-0.5-0.5-0.7-6.2-8.7-20.6-0.4-14.4 8.4z" fill="#040000" p-id="3745"></path></svg>'},{name:"20",icon:'<svg t="1624457910321" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3899" ><path d="M792.8 301.4c-8.2 0-16.2 0.4-24.2 1.3-12.3-81.8-129.2-145.9-271.8-145.9-137.1 0-250.5 59.3-269.9 136.6C105.3 295.5 7.4 391.2 7.4 508.9c0 119.1 100.2 215.6 223.7 215.6 5.3 0 10.6-0.2 15.8-0.5 14.4 80.5 130.4 143.2 271.3 143.2 135.9 0 248.6-58.3 269.4-134.6 1.7 0 3.4 0.1 5.1 0.1 123.6 0 223.7-96.5 223.7-215.6s-100-215.7-223.6-215.7z" fill="#F6CD50" p-id="3900"></path><path d="M435.9 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3901"></path><path d="M588.1 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z" fill="#FAFAFA" p-id="3902"></path><path d="M435.9 431.5m-27.8 0a27.8 27.8 0 1 0 55.6 0 27.8 27.8 0 1 0-55.6 0Z" fill="#040000" p-id="3903"></path><path d="M601.9 407.4c-5.7 2.9-11.3 5.9-16.9 9-6.8 3.8-15.3 7.8-20.5 13.8-5.6 6.5 1.6 11.1 6.7 14.4 11.2 7.1 23.3 13 35.1 19 5.7 2.9 10.8-5.7 5.1-8.6-10.9-5.6-21.9-11.1-32.4-17.4-2.4-1.4-4.6-3.1-7-4.6 1 0.6-0.4-0.4-0.4-0.4-1.9-0.3-0.5 4.2 0.5 4.1-0.1 0-0.6 0.3 0.3-0.3 0.5-0.3 1-0.9 1.5-1.3 9.7-7.9 21.9-13.5 33.1-19.2 5.7-2.7 0.6-11.4-5.1-8.5zM406.6 547.6c11.5 14.4 27 26.7 42.7 36.3 32.2 19.8 71.2 27.2 107.6 15.4 29.5-9.6 54.6-29.1 75.5-51.6 10.8-11.6-6.6-29.1-17.5-17.5-9.4 10.1-19.5 19.7-30.8 27.7-4.6 3.2-9.3 6.2-14.2 8.9-5 2.8-9.9 5.1-14.1 6.7-4.6 1.7-9.3 3.2-14.1 4.4-2.2 0.5-4.4 1-6.6 1.4-1 0.2-2 0.3-2.9 0.5 2.6-0.4-2.1 0.2-2.5 0.3-4.1 0.4-8.3 0.5-12.5 0.4-2.2-0.1-4.4-0.2-6.6-0.4-1.1-0.1-2.2-0.2-3.2-0.3-1.5-0.2-1.4-0.2 0.1 0l-2.1-0.3c-7.8-1.3-15.4-3.4-22.8-6.2-0.9-0.4-1.8-0.7-2.8-1.1-3.1-1.2 2.3 1.1-0.7-0.3-1.5-0.7-2.9-1.3-4.4-2-3.7-1.8-7.2-3.7-10.8-5.8-5.7-3.4-11.1-7.1-16.4-11.1 3 2.3-1.1-0.9-1.8-1.5-1.1-0.9-2.1-1.7-3.1-2.6-2.1-1.8-4.2-3.7-6.3-5.6-4.4-4.1-8.7-8.4-12.4-13.1-4.2-5.2-13.1-4.3-17.5 0-5 5.1-4 12.2 0.2 17.4z" fill="#040000" p-id="3904"></path></svg>'}]},{name:"标记图标",type:"sign",list:[{name:"1",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M809.728 429.696a18.901333 18.901333 0 0 0-15.274667-12.885333l-183.466666-26.624-81.92-166.272a18.901333 18.901333 0 0 0-34.005334 0l-81.92 166.272-183.594666 26.624a19.029333 19.029333 0 0 0-10.496 32.298666l132.693333 129.536-31.274667 182.741334a18.816 18.816 0 0 0 27.477334 19.84l164.138666-86.186667 164.096 86.058667a18.773333 18.773333 0 1 0 27.434667-19.84l-31.36-182.741334 132.693333-129.408a18.901333 18.901333 0 0 0 4.778667-19.413333z" fill="#FFFFFF"></path></svg>'},{name:"2",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M644.565333 306.901333c32.128 0 65.834667-5.76 101.077334-17.237333a17.066667 17.066667 0 0 1 22.357333 16.213333v328.32c-1.109333 0.768 10.325333 27.093333-99.370667 19.84-109.653333-7.210667-181.76-45.098667-246.869333-45.098666-65.152 0-49.322667 2.688-74.154667 8.405333v168.064a24.746667 24.746667 0 0 1-24.490666 25.258667 22.528 22.528 0 0 1-17.28-7.253334 24.149333 24.149333 0 0 1-7.168-18.005333V281.258667C299.776 280.490667 328.106667 256 421.76 256s164.437333 50.901333 222.805333 50.901333z" fill="#FFFFFF"></path></svg>'},{name:"3",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M524.074667 225.408l274.517333 274.517333a17.066667 17.066667 0 0 1 0 24.149334l-274.517333 274.517333a17.066667 17.066667 0 0 1-24.149334 0l-274.517333-274.517333a17.066667 17.066667 0 0 1 0-24.149334l274.517333-274.517333a17.066667 17.066667 0 0 1 24.149334 0z" fill="#FFFFFF"></path></svg>'},{name:"4",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M317.866667 300.8h388.266666c9.386667 0 17.066667 7.68 17.066667 17.066667v388.266666a17.066667 17.066667 0 0 1-17.066667 17.066667h-388.266666a17.066667 17.066667 0 0 1-17.066667-17.066667v-388.266666c0-9.386667 7.68-17.066667 17.066667-17.066667z" fill="#FFFFFF"></path></svg>'},{name:"5",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M498.346667 279.082667L248.789333 701.44a15.829333 15.829333 0 0 0 13.653334 23.893333h499.114666a15.829333 15.829333 0 0 0 13.653334-23.893333l-249.6-422.357333a15.829333 15.829333 0 0 0-27.264 0z" fill="#FFFFFF"></path></svg>'},{name:"6",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path><path d="M634.538667 487.808L555.050667 426.24 507.306667 256a201.002667 201.002667 0 0 0-23.594667 20.394667l-0.256-0.256L525.653333 426.666667l-133.290666 59.946666a14.08 14.08 0 0 0-8.021334 15.957334l28.757334 126.378666a14.208 14.208 0 0 0 27.733333-6.229333l-26.24-115.114667 126.037333-56.704 76.416 59.136a14.250667 14.250667 0 0 0 19.968-2.474666 14.08 14.08 0 0 0-2.474666-19.797334z" fill="#6D768D"></path></svg>'},{name:"7",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z" fill="#FFFFFF"></path></svg>'},{name:"8",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M374.656 273.194667c5.973333 4.48 12.117333 9.6 18.346667 15.36 6.272 5.717333 11.904 12.373333 16.896 19.84 2.517333 4.010667 5.504 8.490667 9.002666 13.482666a529.493333 529.493333 0 0 1 20.266667 32.213334h155.221333a169.813333 169.813333 0 0 0 9.770667-15.744c2.474667-4.48 5.248-8.96 8.234667-13.482667a460.842667 460.842667 0 0 1 23.253333-31.829333c4.992-6.229333 12.245333-12.373333 21.76-18.346667a34.261333 34.261333 0 0 0 10.112-9.728 31.274667 31.274667 0 0 0 5.248-11.989333 18.56 18.56 0 0 0-1.536-11.605334 17.664 17.664 0 0 0-10.112-8.618666c-4.48-1.493333-8.362667-2.005333-11.605333-1.493334a46.933333 46.933333 0 0 0-9.770667 2.602667c-3.242667 1.28-6.613333 2.645333-10.112 4.138667a32.426667 32.426667 0 0 1-12.757333 2.261333 26.026667 26.026667 0 0 1-12.373334-2.645333 45.653333 45.653333 0 0 1-8.96-6.357334l-8.661333-7.850666a30.336 30.336 0 0 0-11.989333-6.4c-9.984-3.968-18.005333-4.693333-24.021334-2.218667-5.973333 2.474667-11.946667 6.485333-17.962666 11.946667a88.618667 88.618667 0 0 1-11.989334 10.496 7.338667 7.338667 0 0 1-3.754666 1.493333 46.165333 46.165333 0 0 1-8.277334-5.205333 71.808 71.808 0 0 1-7.125333-4.906667 37.973333 37.973333 0 0 1-6.4-6.357333c-3.968-3.968-9.941333-6.613333-17.92-7.850667a31.061333 31.061333 0 0 0-21.76 4.138667c-8.533333 5.461333-14.506667 10.069333-18.048 13.824a29.354667 29.354667 0 0 1-15.744 7.893333 23.978667 23.978667 0 0 1-13.098667-0.768 987.733333 987.733333 0 0 0-14.634666-4.48 80.725333 80.725333 0 0 0-14.250667-2.986667 16.768 16.768 0 0 0-11.989333 2.986667c-6.997333 5.461333-9.258667 12.074667-6.741334 19.84a34.56 34.56 0 0 0 13.482667 18.346667z" fill="#FFFFFF"></path><path d="M780.757333 545.152a219.306667 219.306667 0 0 0-19.882666-65.536 224.981333 224.981333 0 0 0-33.365334-49.792 430.336 430.336 0 0 0-37.12-37.12c-14.506667-11.946667-27.264-23.296-38.272-34.048a544.512 544.512 0 0 1-27.733333-28.842667 305.28 305.28 0 0 1-22.485333-26.197333h-168.746667c-6.485333 8.490667-13.994667 17.493333-22.485333 26.965333a360.96 360.96 0 0 1-26.24 28.074667c-10.538667 10.24-22.272 21.12-35.285334 32.597333a305.493333 305.493333 0 0 0-41.6 44.16 250.026667 250.026667 0 0 0-49.493333 117.589334 216.106667 216.106667 0 0 0 1.877333 70.4 220.586667 220.586667 0 0 0 75.349334 126.549333c21.248 18.005333 47.146667 32.597333 77.653333 43.818667 30.464 11.264 65.493333 16.853333 104.96 16.853333 38.528 0 72.874667-4.864 103.125333-14.592a265.045333 265.045333 0 0 0 78.378667-39.338667c21.973333-16.469333 39.594667-35.797333 52.864-58.026666 13.226667-22.186667 22.101333-45.824 26.624-70.784 4.992-30.421333 5.632-58.026667 1.877333-82.773334z" fill="#FFFFFF"></path><path d="M593.322667 647.509333a20.48 20.48 0 0 1-11.861334 3.2h-50.133333v14.165334c0 4.266667-1.792 8.362667-5.376 12.373333a15.914667 15.914667 0 0 1-13.952 5.333333 24.917333 24.917333 0 0 1-14.336-3.882666c-3.84-2.602667-5.973333-7.210667-6.4-13.824v-14.165334h-48.725333a17.792 17.792 0 0 1-11.818667-3.882666 10.24 10.24 0 0 1-3.968-9.6c0-4.266667 1.578667-7.68 4.693333-10.24a16.768 16.768 0 0 1 11.093334-3.925334h48.682666v-24.789333h-48.682666a15.573333 15.573333 0 0 1-11.52-4.266667 13.525333 13.525333 0 0 1-4.266667-9.941333 15.36 15.36 0 0 1 4.693333-10.624 14.72 14.72 0 0 1 11.093334-4.949333h48.682666l0.725334-14.890667a1053.568 1053.568 0 0 1-40.832-42.538667l-10.752-9.898666a41.216 41.216 0 0 1-6.442667-11.690667c-1.92-4.992-0.938667-10.069333 2.858667-15.274667a13.653333 13.653333 0 0 1 15.786666-3.84c6.186667 2.090667 11.221333 4.821333 15.018667 8.106667 1.92 2.389333 5.248 5.888 10.026667 10.666667l15.061333 14.848 19.328 19.157333 22.186667-20.565333a987.605333 987.605333 0 0 1 29.397333-25.514667 21.162667 21.162667 0 0 1 14.293333-5.674667c5.290667 0 9.557333 2.133333 12.928 6.4 6.186667 7.082667 3.84 15.36-7.168 24.789334a179.072 179.072 0 0 0-12.885333 12.373333c-5.76 5.973333-11.52 11.733333-17.194667 17.408-6.698667 7.082667-14.08 14.378667-22.186666 21.973333v13.44h46.506666c6.698667 0 11.605333 1.536 14.72 4.608a14.165333 14.165333 0 0 1 4.650667 10.282667c0 4.266667-1.450667 7.936-4.309333 11.008-2.858667 3.029333-7.637333 4.352-14.336 3.84l-46.506667 0.768-0.768 24.064h45.866667c13.354667 0 20.053333 4.992 20.053333 14.933333 0.469333 4.693333-0.853333 8.106667-3.925333 10.24z" fill="#6D768D"></path></svg>'},{name:"9",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M512 213.333333l234.666667 341.333334h-128v213.333333h-213.333334v-213.333333h-128L512 213.333333z" fill="#FFFFFF"></path></svg>'},{name:"10",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M533.333333 810.666667L298.666667 469.333333h128V256h213.333333v213.333333h128l-234.666667 341.333334z" fill="#FFFFFF"></path></svg>'},{name:"11",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M213.333333 533.333333L554.666667 298.666667v128h213.333333v213.333333h-213.333333v128l-341.333334-234.666667z" fill="#FFFFFF"></path></svg>'},{name:"12",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M810.666667 533.333333L469.333333 768v-128H256v-213.333333h213.333333V298.666667l341.333334 234.666666z" fill="#FFFFFF"></path></svg>'},{name:"13",icon:'<svg viewBox="0 0 1024 1024"><path d="M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z" fill="#6D768D"></path><path d="M571.349333 508.586667l162.389334-162.346667a44.330667 44.330667 0 1 0-62.72-62.72l-162.389334 162.389333-162.517333-162.389333a44.330667 44.330667 0 1 0-62.72 62.72l162.389333 162.389333-162.389333 162.474667a44.330667 44.330667 0 1 0 62.72 62.72l162.389333-162.346667 162.389334 162.389334a44.330667 44.330667 0 1 0 62.72-62.72l-162.261334-162.56z" fill="#FFFFFF"></path></svg>'},{name:"14",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C233.386667 0 0 225.877333 0 512s225.877333 512 512 512 512-225.877333 512-512S790.613333 0 512 0z" fill="#6D768D"></path><path d="M726.144 311.210667l-277.333333 305.066666-124.8-124.8c-13.866667-13.866667-41.6-13.866667-55.466667 0-13.866667 13.866667-13.866667 41.6 0 55.466667l159.445333 152.533333c13.866667 13.866667 41.6 13.866667 55.466667 0l305.066667-332.8c13.866667-13.866667 13.866667-41.6 0-55.466666-20.778667-13.866667-48.512-13.866667-62.378667 0z" fill="#FFFFFF"></path></svg>'},{name:"15",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M541.952 755.626667a40.618667 40.618667 0 0 1-29.824 12.373333 41.344 41.344 0 0 1-30.122667-12.373333 40.106667 40.106667 0 0 1-12.672-30.122667c0-11.605333 4.096-21.845333 12.672-30.122667a40.405333 40.405333 0 0 1 30.122667-12.714666c11.605333 0 21.546667 4.138667 29.824 12.714666a40.32 40.32 0 0 1 12.714667 30.122667c0 11.861333-4.096 21.76-12.714667 30.122667zM450.986667 241.28A77.866667 77.866667 0 0 1 512.256 213.333333c24.874667 0 45.354667 8.917333 61.354667 27.946667 15.488 18.432 23.722667 41.685333 23.722666 69.674667 0 23.765333-33.152 200.533333-44.672 329.045333h-80.128C463.146667 511.402667 426.666667 334.677333 426.666667 310.954667c0-27.392 8.277333-50.645333 24.32-69.674667z" fill="#FFFFFF"></path></svg>'},{name:"16",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.794667 0 512 0z" fill="#6D768D"></path><path d="M490.666667 682.666667a64 64 0 1 1 0 128 64 64 0 0 1 0-128z m13.994666-490.752c61.397333 0 112.341333 14.634667 153.002667 43.946666 40.533333 29.269333 60.885333 72.618667 60.885333 130.133334 0 35.242667-12.373333 64.938667-29.952 89.045333-10.282667 14.677333-33.664 33.408-62.890666 56.192l-32.426667 22.357333c-15.701333 12.202667-29.696 26.453333-34.858667 42.666667-1.706667 5.546667-3.072 14.677333-3.968 24.533333-0.426667 4.949333-4.864 15.018667-15.232 15.018667h-83.328c-13.568 0-15.957333-10.581333-15.744-15.786667 1.493333-34.005333 4.608-64.213333 18.474667-80.469333 28.074667-32.896 91.904-73.813333 91.904-73.813333a104.106667 104.106667 0 0 0 23.552-24.021334c10.837333-14.933333 19.797333-31.317333 19.797333-49.237333 0-20.565333-6.016-39.338667-18.090666-56.32-12.032-16.938667-34.090667-25.386667-66.005334-25.386667-31.445333 0-53.76 10.410667-66.901333 31.274667-9.685333 15.445333-15.786667 29.610667-18.346667 45.013333-0.853333 5.461333-4.394667 16.981333-16.042666 16.981334H327.210667c-17.322667 0-21.12-11.221333-20.650667-16.64 6.272-68.138667 32.896-114.688 80-144.597334 32-20.565333 71.381333-30.890667 118.101333-30.890666z" fill="#FFFFFF"></path></svg>'},{name:"17",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M336.256 410.026667H253.312a40.021333 40.021333 0 0 0-39.850667 43.264l23.296 278.101333c1.706667 20.693333 19.072 36.608 39.850667 36.608h59.648c11.050667 0 20.010667-8.96 20.010667-19.968v-318.037333a19.968 19.968 0 0 0-20.010667-19.968z m434.432 0h-178.944C653.312 182.314667 548.949333 170.666667 548.949333 170.666667c-44.288 0-35.114667 34.986667-38.442666 40.832 0 84.48-68.010667 155.093333-101.034667 184.362666a39.552 39.552 0 0 0-13.226667 29.653334v322.56c0 11.008 8.96 19.925333 20.010667 19.925333h233.728c30.378667 0 58.154667-17.152 71.68-44.373333 18.176-36.736 40.448-90.112 54.656-133.973334 13.781333-42.410667 26.24-94.976 33.578667-131.968a39.850667 39.850667 0 0 0-39.253334-47.658666z" fill="#FFFFFF"></path></svg>'},{name:"18",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M796.16 413.909333c-31.146667-0.298667-115.626667-0.085333-146.858667-0.085333h-158.464c8.533333-7.68 15.914667-14.506667 23.594667-20.906667 29.781333-24.874667 25.813333-71.082667-14.208-88.874666-22.954667-10.24-44.970667-5.632-64 11.52-34.944 31.274667-69.632 62.677333-104.277333 93.994666a15.488 15.488 0 0 1-11.178667 4.437334c-11.221333-0.085333-26.88-0.128-46.933333-0.170667a17.066667 17.066667 0 0 0-17.109334 17.066667L256 719.701333a17.066667 17.066667 0 0 0 17.066667 17.152l49.578666-0.085333c3.968 0 7.466667 0.768 10.88 2.602667 15.829333 8.832 31.701333 17.493333 47.616 26.24a18.133333 18.133333 0 0 0 9.301334 2.346666h168.405333c6.186667 0 11.946667-0.981333 17.834667-2.56 29.44-7.253333 40.021333-30.293333 38.528-52.565333-0.768-9.728-4.266667-18.346667-9.984-26.24 19.626667-5.76 35.114667-16.213333 42.112-36.096 7.125333-20.394667 1.621333-38.4-12.672-53.333333 28.16-19.754667 34.858667-44.672 18.645333-75.648h140.458667c6.570667 0 13.013333-0.597333 19.370666-2.645334 31.957333-9.813333 48.810667-42.88 35.626667-71.552-10.154667-22.186667-28.629333-33.152-52.608-33.450666z" fill="#FFFFFF"></path></svg>'},{name:"19",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M270.506667 413.909333c31.146667-0.298667 115.626667-0.085333 146.858666-0.085333h158.464c-8.533333-7.68-15.914667-14.506667-23.594666-20.906667-29.781333-24.874667-25.813333-71.082667 14.208-88.874666 22.954667-10.24 44.970667-5.632 64 11.52 34.944 31.274667 69.632 62.677333 104.277333 93.994666 3.413333 2.986667 6.528 4.437333 11.178667 4.437334 11.221333-0.085333 26.88-0.128 46.933333-0.170667a17.066667 17.066667 0 0 1 17.109333 17.066667l0.682667 288.853333a17.066667 17.066667 0 0 1-17.066667 17.152l-49.578666-0.085333a22.101333 22.101333 0 0 0-10.88 2.602666c-15.829333 8.832-31.701333 17.493333-47.616 26.24a18.133333 18.133333 0 0 1-9.301334 2.346667h-168.405333a68.693333 68.693333 0 0 1-17.834667-2.56c-29.44-7.253333-40.021333-30.293333-38.528-52.565333 0.768-9.728 4.266667-18.346667 9.984-26.24-19.626667-5.76-35.114667-16.213333-42.112-36.096-7.125333-20.394667-1.621333-38.4 12.672-53.333334-28.16-19.754667-34.858667-44.672-18.645333-75.648H272.853333c-6.570667 0-13.013333-0.597333-19.370666-2.645333-31.957333-9.813333-48.810667-42.88-35.626667-71.552 10.154667-22.186667 28.629333-33.152 52.608-33.450667z" fill="#FFFFFF"></path></svg>'},{name:"20",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M667.733333 480.128H400v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 213.333333a155.605333 155.605333 0 0 0-155.392 155.434667v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 509.013333v292.010667a28.885333 28.885333 0 0 0 28.885333 28.885333h340.138667a28.885333 28.885333 0 0 0 28.928-28.885333V509.013333a28.885333 28.885333 0 0 0-28.928-28.885333z" fill="#FFFFFF"></path></svg>'},{name:"21",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M400.042667 437.461333v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 170.666667a155.605333 155.605333 0 0 0-155.392 155.434666v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 466.346667v292.010666a28.885333 28.885333 0 0 0 28.885333 28.885334h340.138667a28.885333 28.885333 0 0 0 28.928-28.885334V466.346667a28.885333 28.885333 0 0 0-28.928-28.885334H400.042667z" fill="#FFFFFF"></path><path d="M595.242667 437.461333v-111.36a97.706667 97.706667 0 0 0-97.621334-97.621333 97.706667 97.706667 0 0 0-97.578666 97.621333 28.885333 28.885333 0 0 1-57.813334 0A155.605333 155.605333 0 0 1 497.621333 170.666667a155.605333 155.605333 0 0 1 155.434667 155.434666v111.36h14.634667c16 0 28.928 12.928 28.928 28.885334v292.010666a28.885333 28.885333 0 0 1-28.928 28.885334H327.552A28.885333 28.885333 0 0 1 298.666667 758.357333V466.346667c0-15.957333 12.928-28.885333 28.885333-28.885334h267.690667z" fill="#FFFFFF"></path></svg>'},{name:"22",icon:'<svg viewBox="0 0 1024 1024"><path d="M511.999787 512.000213m-511.999787 0a511.999787 511.999787 0 1 0 1023.999573 0 511.999787 511.999787 0 1 0-1023.999573 0Z" fill="#6D768D"></path><path d="M381.354508 364.586941c0 54.015977 29.013321 103.935957 75.946635 130.986613a152.53327 152.53327 0 0 0 151.935936 0 151.12527 151.12527 0 0 0 75.946636-130.986613A151.594604 151.594604 0 0 0 533.333111 213.333671a151.594604 151.594604 0 0 0-151.89327 151.25327zM660.479725 498.901552a185.258589 185.258589 0 0 1-127.146614 50.346646c-49.066646 0-93.866628-19.199992-127.06128-50.346646C317.141201 544.853533 255.999893 637.440161 255.999893 744.106783c0 13.183995 10.709329 23.850657 23.978657 23.850657h506.709122a23.893323 23.893323 0 0 0 23.978657-23.893323c0-106.538622-61.098641-199.25325-150.186604-245.205232z" fill="#FFFFFF"></path></svg>'},{name:"23",icon:'<svg viewBox="0 0 1024 1024"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#6D768D"></path><path d="M445.610667 401.578667a129.322667 129.322667 0 1 0 258.645333 0 129.322667 129.322667 0 0 0-258.645333 0z m237.568 114.901333a157.354667 157.354667 0 0 1-216.362667 0 236.373333 236.373333 0 0 0-127.957333 209.706667c0 11.264 9.130667 20.394667 20.394666 20.394666h431.402667a20.394667 20.394667 0 0 0 20.394667-20.394666 236.373333 236.373333 0 0 0-127.872-209.706667zM409.813333 401.578667c0-40.362667 14.592-77.397333 38.698667-106.112a112.725333 112.725333 0 0 0-29.013333-3.925334 112.64 112.64 0 0 0-112.426667 112.469334 112.64 112.64 0 0 0 144.853333 107.648 164.693333 164.693333 0 0 1-42.112-110.08z m-18.602666 136.704a136.533333 136.533333 0 0 1-65.706667-34.474667 205.44 205.44 0 0 0-111.232 182.4c0 9.813333 7.936 17.706667 17.706667 17.706667H303.36a273.621333 273.621333 0 0 1 87.893333-165.632z" fill="#FFFFFF"></path></svg>'}]}],Ei=(p,t=[])=>{let e=p.split("_"),n=Zt([...Vt,...t]).find(s=>s.type===e[0]);if(n){let s=n.list.find(a=>a.name===e[1]);return s?s.icon:""}else return""},Q={hyperlink:mi,note:xi,attachment:Mi,nodeIconList:Vt,getNodeIconListIcon:Ei},Ni=(p,t)=>{const e=new z,i=new k().text(p);return t.text(i),e.add(i),e.bbox()},Rt={radius:3,fontSize:12,fill:"",height:20,paddingX:8};function vi(){const p=this.getData("image");if(!p)return;const t=this.getImgShowSize(),e=new rt().load(p).size(...t),{defaultNodeImage:i}=this.mindMap.opt;if(i){const n=new Image;n.onerror=()=>{e.load(i)},n.src=p}return this.getData("imageTitle")&&e.attr("title",this.getData("imageTitle")),e.on("dblclick",n=>{this.mindMap.emit("node_img_dblclick",this,n)}),e.on("mouseenter",n=>{this.mindMap.emit("node_img_mouseenter",this,e,n)}),e.on("mouseleave",n=>{this.mindMap.emit("node_img_mouseleave",this,e,n)}),e.on("mousemove",n=>{this.mindMap.emit("node_img_mousemove",this,e,n)}),{node:e,width:t[0],height:t[1]}}function yi(){const{custom:p,width:t,height:e}=this.getData("imageSize");return p?[t,e]:qt(t,e,this.mindMap.themeConfig.imgMaxWidth,this.mindMap.themeConfig.imgMaxHeight)}function wi(){let p=this.getData();if(!p.icon||p.icon.length<=0)return[];let t=this.mindMap.themeConfig.iconSize;return p.icon.map(e=>{let i=Q.getNodeIconListIcon(e,this.mindMap.opt.iconList||[]),n=null;return/^<svg/.test(i)?n=D(i):n=new rt().load(i),n.size(t,t),n.on("click",s=>{this.mindMap.emit("node_icon_click",this,e,s,n)}),n.on("mouseenter",s=>{this.mindMap.emit("node_icon_mouseenter",this,e,s,n)}),n.on("mouseleave",s=>{this.mindMap.emit("node_icon_mouseleave",this,e,s,n)}),{node:n,width:t,height:t}})}function _i(p){const t=this.hasCustomWidth();let e=typeof p=="string"?p:this.getData("text"),{textAutoWrapWidth:i,emptyTextMeasureHeightText:n}=this.mindMap.opt;i=t?this.customTextWidth:i;const s=new z;let a=!1;this.getData("resetRichText")&&(delete this.nodeData.data.resetRichText,a=!0),a&&!U(e)&&(Jt(e)?e=Qt(e):e=`<p>${e}</p>`,this.setData({text:e}));const h=[],o=te(this);Object.keys(o).forEach(u=>{h.push([u,o[u]])}),this.mindMap.commonCaches.measureRichtextNodeTextSizeEl||(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.position="fixed",this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.left="-999999px",this.mindMap.el.appendChild(this.mindMap.commonCaches.measureRichtextNodeTextSizeEl));const r=this.mindMap.commonCaches.measureRichtextNodeTextSizeEl;h.forEach(([u,x])=>{r.style[u]=x}),r.style.lineHeight=1.2;const c=`<div>${e}</div>`;r.innerHTML=c;const d=r.children[0];d.classList.add("smm-richtext-node-wrap"),Z(d),d.style.maxWidth=i+"px",t?d.style.width=this.customTextWidth+"px":d.style.width="";let{width:f,height:g}=d.getBoundingClientRect();if(g<=0){r.innerHTML=`<p>${n}</p>`;let u=r.children[0];u.classList.add("smm-richtext-node-wrap"),g=u.getBoundingClientRect().height,r.innerHTML=c}f=Math.min(Math.ceil(f)+1,i),g=Math.ceil(g),s.attr("data-width",f),s.attr("data-height",g);const l=q({el:r.children[0],width:f,height:g}),m={"line-height":1.2};return h.forEach(([u,x])=>{m[ee(u)]=x}),l.css(m),s.add(l),{node:s,nodeContent:l,width:f,height:g}}function Ci(p){if(this.getData("needUpdate")&&delete this.nodeData.data.needUpdate,this.getData("richText"))return this.createRichTextNode(p);const t=typeof p=="string"?p:this.getData("text");this.getData("resetRichText")&&delete this.nodeData.data.resetRichText;let e=new z,i=this.getStyle("fontSize",!1),n=[];U(t)||(n=String(t).split(/\n/gim));const{textAutoWrapWidth:s,emptyTextMeasureHeightText:a}=this.mindMap.opt;let h=n.length>1;n.forEach((c,d)=>{let f=c.split(""),g=[],l=[];for(;f.length;){let m=f.shift(),u=[...l,m].join("");Ni(u,this.style).width<=s?l.push(m):(g.push(l.join("")),l=[m])}l.length>0&&g.push(l.join("")),g.length>1&&(h=!0),n[d]=g.join(`
`)}),n=n.join(`
`).replace(/\n$/g,"").split(/\n/gim),n.forEach((c,d)=>{c===""&&(c="\uFEFF");const f=new k().text(c);f.addClass("smm-text-node-wrap"),this.style.text(f),f.y(i*J*d+(J-1)*i/2),e.add(f)});let{width:o,height:r}=e.bbox();if(r<=0){const c=new k().text(a);this.style.text(c),r=c.bbox().height}return o=Math.min(Math.ceil(o),s),r=Math.ceil(r),e.attr("data-width",o),e.attr("data-height",r),e.attr("data-ismultiLine",h||n.length>1),{node:e,width:o,height:r}}function Ti(){const{hyperlink:p,hyperlinkTitle:t}=this.getData();if(!p)return;const{customHyperlinkJump:e,hyperlinkIcon:i}=this.mindMap.opt,{icon:n,style:s}=i,a=this.getNodeIconSize("hyperlinkIcon"),h=new D().size(a,a),o=new ie().to(p).target("_blank");o.node.addEventListener("click",c=>{typeof e=="function"&&(c.preventDefault(),e(p,this))}),t&&h.add(D(`<title>${t}</title>`)),o.rect(a,a).fill({color:"transparent"});const r=D(n||Q.hyperlink).size(a,a);return this.style.iconNode(r,s.color),o.add(r),h.add(o),{node:h,width:a,height:a}}function Li(){const p=this.getData("tag");if(!p||p.length<=0)return[];let{maxTag:t,tagsColorMap:e}=this.mindMap.opt;e=e||{};const i=[];return p.slice(0,t).forEach((n,s)=>{let a="",h={...Rt};typeof n=="string"?a=n:(a=n.text,h={...Rt,...n.style});const o=typeof h.width<"u",r=new z;r.on("click",()=>{this.mindMap.emit("node_tag_click",this,n,s,r)});const c=new k().text(a);this.style.tagText(c,h);const{width:d,height:f}=c.bbox(),g=o?h.width:d+h.paddingX*2,l=o?Math.max(g,d):g,m=Math.max(h.height,f);o?c.x((l-d)/2):c.x(o?0:h.paddingX),c.cy(-m/2);const u=new O().size(g,h.height).cy(-m/2);o&&u.x((l-g)/2),this.style.tagRect(u,{...h,fill:h.fill||e[c.node.textContent]||Ht(c.node.textContent)}),r.add(u).add(c),i.push({node:r,width:l,height:m})}),i}function Di(){if(!this.getData("note"))return null;const{icon:p,style:t}=this.mindMap.opt.noteIcon,e=this.getNodeIconSize("noteIcon"),i=new D().attr("cursor","pointer").addClass("smm-node-note").size(e,e);i.add(new O().size(e,e).fill({color:"transparent"}));const n=D(p||Q.note).size(e,e);return this.style.iconNode(n,t.color),i.add(n),this.mindMap.opt.customNoteContentShow||(this.noteEl||(this.noteEl=document.createElement("div"),this.noteEl.style.cssText=`
          position: fixed;
          padding: 10px;
          border-radius: 5px;
          box-shadow: 0 2px 5px rgb(0 0 0 / 10%);
          display: none;
          background-color: #fff;
          z-index: ${this.mindMap.opt.nodeNoteTooltipZIndex}
      `,(this.mindMap.opt.customInnerElsAppendTo||document.body).appendChild(this.noteEl)),this.noteEl.innerText=this.getData("note")),i.on("mouseover",()=>{const{left:s,top:a}=this.getNoteContentPosition();this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.show(this.getData("note"),s,a,this):(this.noteEl.style.left=s+"px",this.noteEl.style.top=a+"px",this.noteEl.style.display="block")}),i.on("mouseout",()=>{this.mindMap.opt.customNoteContentShow?this.mindMap.opt.customNoteContentShow.hide():this.noteEl.style.display="none"}),i.on("click",s=>{this.mindMap.emit("node_note_click",this,s,i)}),i.on("dblclick",s=>{this.mindMap.emit("node_note_dblclick",this,s,i)}),{node:i,width:e,height:e}}function Si(){const{attachmentUrl:p,attachmentName:t}=this.getData();if(!p)return;const e=this.getNodeIconSize("attachmentIcon"),{icon:i,style:n}=this.mindMap.opt.attachmentIcon,s=new D().attr("cursor","pointer").size(e,e);t&&s.add(D(`<title>${t}</title>`)),s.add(new O().size(e,e).fill({color:"transparent"}));const a=D(i||Q.attachment).size(e,e);return this.style.iconNode(a,n.color),s.add(a),s.on("click",h=>{this.mindMap.emit("node_attachmentClick",this,h,s)}),s.on("contextmenu",h=>{this.mindMap.emit("node_attachmentContextmenu",this,h,s)}),{node:s,width:e,height:e}}function Ri(p){const{style:t}=this.mindMap.opt[p];return U(t.size)?this.mindMap.themeConfig.iconSize:t.size}function zi(){const p=this.getNodeIconSize("noteIcon"),{scaleY:t}=this.mindMap.view.getTransformData().transform,e=p*t;let{left:i,top:n}=this._noteData.node.node.getBoundingClientRect();return n+=e,{left:i,top:n}}function Ai(p){this.mindMap.commonCaches.measureCustomNodeContentSizeEl||(this.mindMap.commonCaches.measureCustomNodeContentSizeEl=document.createElement("div"),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.style.cssText=`
      position: fixed;
      left: -99999px;
      top: -99999px;
    `,this.mindMap.el.appendChild(this.mindMap.commonCaches.measureCustomNodeContentSizeEl)),this.mindMap.commonCaches.measureCustomNodeContentSizeEl.innerHTML="",this.mindMap.commonCaches.measureCustomNodeContentSizeEl.appendChild(p);let t=this.mindMap.commonCaches.measureCustomNodeContentSizeEl.getBoundingClientRect();return{width:t.width,height:t.height}}function Ii(){return!!this._customNodeContent}const zt={createImgNode:vi,getImgShowSize:yi,createIconNode:wi,createRichTextNode:_i,createTextNode:Ci,createHyperlinkNode:Ti,createTagNode:Li,createNoteNode:Di,createAttachmentNode:Si,getNoteContentPosition:zi,getNodeIconSize:Ri,measureCustomNodeContentSize:Ai,isUseCustomNodeContent:Ii};function Oi(){if(!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot)return;const{alwaysShowExpandBtn:p,notShowExpandBtn:t}=this.mindMap.opt;if(!p&&!t){let{width:e,height:i}=this;this._unVisibleRectRegionNode||(this._unVisibleRectRegionNode=new O,this._unVisibleRectRegionNode.fill({color:"transparent"})),this.group.add(this._unVisibleRectRegionNode),this.renderer.layout.renderExpandBtnRect(this._unVisibleRectRegionNode,this.expandBtnSize,e,i,this)}}function Fi(){this._unVisibleRectRegionNode&&(this._unVisibleRectRegionNode.remove(),this._unVisibleRectRegionNode=null)}function Bi(){this.needRerenderExpandBtnPlaceholderRect&&(this.needRerenderExpandBtnPlaceholderRect=!1,this.renderExpandBtnPlaceholderRect()),this.nodeData.children&&this.nodeData.children.length>0?this._unVisibleRectRegionNode||this.renderExpandBtnPlaceholderRect():this._unVisibleRectRegionNode&&this.clearExpandBtnPlaceholderRect()}const At={renderExpandBtnPlaceholderRect:Oi,clearExpandBtnPlaceholderRect:Fi,updateExpandBtnPlaceholderRect:Bi};function bi(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes=null,this.dragHandleWidth=4,this.dragHandleMousedownX=0,this.isDragHandleMousedown=!1,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.dragHandleMousedownBodyCursor="",this.dragHandleMousedownLeft=0,this.onDragMousemoveHandle=this.onDragMousemoveHandle.bind(this),window.addEventListener("mousemove",this.onDragMousemoveHandle),this.onDragMouseupHandle=this.onDragMouseupHandle.bind(this),window.addEventListener("mouseup",this.onDragMouseupHandle),this.mindMap.on("node_mouseup",this.onDragMouseupHandle))}function ki(p){if(!this.isDragHandleMousedown)return;p.stopPropagation(),p.preventDefault();let{minNodeTextModifyWidth:t,maxNodeTextModifyWidth:e,isUseCustomNodeContent:i,customCreateNodeContent:n}=this.mindMap.opt;const s=i&&n&&this._customNodeContent;document.body.style.cursor="ew-resize",this.group.css({cursor:"ew-resize"});const{scaleX:a}=this.mindMap.draw.transform(),h=p.clientX-this.dragHandleMousedownX;let o=this.dragHandleMousedownCustomTextWidth+(this.dragHandleIndex===0?-h:h)/a;if(o=Math.max(o,t),e!==-1&&(o=Math.min(o,e)),!s&&this.getData("image")){const r=this.getImgShowSize();this._rectInfo.textContentWidth-this.customTextWidth+o<=r[0]&&(o=r[0]+this.customTextWidth-this._rectInfo.textContentWidth)}this.customTextWidth=o,this.dragHandleIndex===0&&(this.left=this.dragHandleMousedownLeft+h/a),this.reRender(s?[]:["text"],{ignoreUpdateCustomTextWidth:!0})}function Pi(){this.isDragHandleMousedown&&(document.body.style.cursor=this.dragHandleMousedownBodyCursor,this.group.css({cursor:"default"}),this.isDragHandleMousedown=!1,this.dragHandleMousedownX=0,this.dragHandleIndex=0,this.dragHandleMousedownCustomTextWidth=0,this.setData({customTextWidth:this.customTextWidth}),this.mindMap.render(),this.mindMap.emit("dragModifyNodeWidthEnd",this))}function Hi(){const p=[new O,new O];return p.forEach((t,e)=>{t.size(this.dragHandleWidth,this.height).fill({color:"transparent"}).css({cursor:"ew-resize"}),t.on("mousedown",i=>{i.stopPropagation(),i.preventDefault(),this.dragHandleMousedownX=i.clientX,this.dragHandleIndex=e,this.dragHandleMousedownCustomTextWidth=this.customTextWidth===void 0?this._textData?this._textData.width:this.width:this.customTextWidth,this.dragHandleMousedownBodyCursor=document.body.style.cursor,this.dragHandleMousedownLeft=this.left,this.isDragHandleMousedown=!0})}),p}function $i(){this.checkEnableDragModifyNodeWidth()&&(this._dragHandleNodes||(this._dragHandleNodes=this.createDragHandleNode()),this.getData("isActive")?(this._dragHandleNodes.forEach(p=>{p.height(this.height),this.group.add(p)}),this._dragHandleNodes[1].x(this.width-this.dragHandleWidth)):this._dragHandleNodes.forEach(p=>{p.remove()}))}const It={initDragHandle:bi,onDragMousemoveHandle:ki,onDragMouseupHandle:Pi,createDragHandleNode:Hi,updateDragHandle:$i};function Gi(){this.mindMap.cooperate&&(this._userListGroup=new z,this.group.add(this._userListGroup))}function Wi(p){const{avatarSize:t,fontSize:e}=this.mindMap.opt.cooperateStyle,i=new z,n=p.isMore?p.name:String(p.name)[0],s=new Pt().size(t,t);s.fill({color:p.color||Ht(n)});const a=new k().text(n).fill({color:"#fff"}).css({"font-size":e+"px"}).dx(-e/2).dy((t-e)/2);return i.add(s).add(a),i}function Ui(p){const{avatarSize:t}=this.mindMap.opt.cooperateStyle;return new rt().load(p.avatar).size(t,t)}function Yi(){if(!this._userListGroup)return;const{avatarSize:p}=this.mindMap.opt.cooperateStyle;this._userListGroup.clear();const t=this.userList.length,e=Math.floor(this.width/p),i=[];t>e?i.push(...this.userList.slice(0,e-1),{isMore:!0,name:"+"+(t-e+1)}):i.push(...this.userList),i.forEach((n,s)=>{let a=null;n.avatar?a=this.createImageAvatar(n):a=this.createTextAvatar(n),a.on("click",h=>{this.mindMap.emit("node_cooperate_avatar_click",n,this,a,h)}),a.on("mouseenter",h=>{this.mindMap.emit("node_cooperate_avatar_mouseenter",n,this,a,h)}),a.on("mouseleave",h=>{this.mindMap.emit("node_cooperate_avatar_mouseleave",n,this,a,h)}),a.x(s*p).cy(-p/2),this._userListGroup.add(a)})}function Vi(p){this.userList.find(t=>t.id==p.id)||(this.userList.push(p),this.updateUserListNode())}function Xi(p){const t=this.userList.findIndex(e=>e.id==p.id);t!==-1&&(this.userList.splice(t,1),this.updateUserListNode())}function ji(){this.userList=[],this.updateUserListNode()}const Ot={createUserListNode:Gi,updateUserListNode:Yi,createTextAvatar:Wi,createImageAvatar:Ui,addUser:Vi,removeUser:Xi,emptyUser:ji};class tt{constructor(t={}){this.opt=t,this.nodeData=this.handleData(t.data||{}),this.nodeDataSnapshot="",this.uid=t.uid,this.mindMap=t.mindMap,this.renderer=t.renderer,this.draw=this.mindMap.draw,this.nodeDraw=this.mindMap.nodeDraw,this.lineDraw=this.mindMap.lineDraw,this.style=new A(this),this.effectiveStyles={},this.shapeInstance=new ze(this),this.shapePadding={paddingX:0,paddingY:0},this.isRoot=t.isRoot===void 0?!1:t.isRoot,this.isGeneralization=t.isGeneralization===void 0?!1:t.isGeneralization,this.generalizationBelongNode=null,this.layerIndex=t.layerIndex===void 0?0:t.layerIndex,this.width=t.width||0,this.height=t.height||0,this.customTextWidth=t.data.data.customTextWidth||void 0,this._left=t.left||0,this._top=t.top||0,this.customLeft=t.data.data.customLeft||void 0,this.customTop=t.data.data.customTop||void 0,this.isDrag=!1,this.parent=t.parent||null,this.children=t.children||[],this.userList=[],this.group=null,this.shapeNode=null,this.hoverNode=null,this._customNodeContent=null,this._imgData=null,this._iconData=null,this._textData=null,this._hyperlinkData=null,this._tagData=null,this._noteData=null,this.noteEl=null,this.noteContentIsShow=!1,this._attachmentData=null,this._prefixData=null,this._postfixData=null,this._expandBtn=null,this._lastExpandBtnType=null,this._showExpandBtn=!1,this._openExpandNode=null,this._closeExpandNode=null,this._fillExpandNode=null,this._userListGroup=null,this._lines=[],this._generalizationList=[],this._unVisibleRectRegionNode=null,this._isMouseenter=!1,this._rectInfo={imgContentWidth:0,imgContentHeight:0,textContentWidth:0,textContentHeight:0},this._generalizationNodeWidth=0,this._generalizationNodeHeight=0,this.textContentItemMargin=this.mindMap.opt.textContentMargin,this.blockContentMargin=this.mindMap.opt.imgTextMargin,this.expandBtnSize=this.mindMap.opt.expandBtnSize,this.isMultipleChoice=!1,this.needLayout=!1,this.isHide=!1;const e=Object.getPrototypeOf(this);e.bindEvent||(Object.keys(Tt).forEach(i=>{e[i]=Tt[i]}),Object.keys(Dt).forEach(i=>{e[i]=Dt[i]}),Object.keys(At).forEach(i=>{e[i]=At[i]}),Object.keys(St).forEach(i=>{e[i]=St[i]}),Object.keys(zt).forEach(i=>{e[i]=zt[i]}),this.mindMap.cooperate&&Object.keys(Ot).forEach(i=>{e[i]=Ot[i]}),Object.keys(It).forEach(i=>{e[i]=It[i]}),e.bindEvent=!0),this.getSize(),this.updateGeneralization(),this.initDragHandle()}get left(){return this.customLeft||this._left}set left(t){this._left=t}get top(){return this.customTop||this._top}set top(t){this._top=t}reset(){this.children=[],this.parent=null,this.isRoot=!1,this.layerIndex=0,this.left=0,this.top=0}resetWhenDelete(){this._isMouseenter=!1}handleData(t){return t.data.expand=t.data.expand!==!1,t.data.isActive=t.data.isActive===!0,t.children=t.children||[],t}createNodeData(t){const{isUseCustomNodeContent:e,customCreateNodeContent:i,createNodePrefixContent:n,createNodePostfixContent:s}=this.mindMap.opt,a=["custom","image","icon","text","hyperlink","tag","note","attachment","prefix","postfix",...this.mindMap.nodeInnerPrefixList.map(o=>o.name)],h={};if(Array.isArray(t)?a.forEach(o=>{t.includes(o)&&(h[o]=!0)}):a.forEach(o=>{h[o]=!0}),e&&i&&h.custom&&(this._customNodeContent=i(this)),this._customNodeContent){Z(this._customNodeContent);return}h.image&&(this._imgData=this.createImgNode()),h.icon&&(this._iconData=this.createIconNode()),h.text&&(this._textData=this.createTextNode()),h.hyperlink&&(this._hyperlinkData=this.createHyperlinkNode()),h.tag&&(this._tagData=this.createTagNode()),h.note&&(this._noteData=this.createNoteNode()),h.attachment&&(this._attachmentData=this.createAttachmentNode()),this.mindMap.nodeInnerPrefixList.forEach(o=>{h[o.name]&&(this[`_${o.name}Data`]=o.createContent(this))}),h.prefix&&(this._prefixData=n?n(this):null,this._prefixData&&this._prefixData.el&&Z(this._prefixData.el)),h.postfix&&(this._postfixData=s?s(this):null,this._postfixData&&this._postfixData.el&&Z(this._postfixData.el))}getSize(t,e={}){e.ignoreUpdateCustomTextWidth||!1||(this.customTextWidth=this.getData("customTextWidth")||void 0),this.customLeft=this.getData("customLeft")||void 0,this.customTop=this.getData("customTop")||void 0,this.createNodeData(t);const{width:n,height:s}=this.getNodeRect(),a=this.width!==n||this.height!==s;return this.width=n,this.height=s,a}getNodeRect(){if(this.isUseCustomNodeContent()){const x=this.measureCustomNodeContentSize(this._customNodeContent);return{width:this.hasCustomWidth()?this.customTextWidth:x.width,height:x.height}}const{tagPosition:t}=this.mindMap.opt,e=t===M.TAG_POSITION.BOTTOM;let i=0,n=0,s=0,a=0,h=0,o=0;if(this._imgData&&(this._rectInfo.imgContentWidth=i=this._imgData.width,this._rectInfo.imgContentHeight=n=this._imgData.height),this.mindMap.nodeInnerPrefixList.forEach(x=>{const E=this[`_${x.name}Data`];E&&(s+=E.width,a=Math.max(a,E.height))}),this._prefixData&&(s+=this._prefixData.width,a=Math.max(a,this._prefixData.height)),this._iconData.length>0&&(s+=this._iconData.reduce((x,E)=>(a=Math.max(a,E.height),x+=E.width+this.textContentItemMargin),0)),this._textData&&(s+=this._textData.width,a=Math.max(a,this._textData.height)),this._hyperlinkData&&(s+=this._hyperlinkData.width,a=Math.max(a,this._hyperlinkData.height)),this._tagData.length>0){let x=0;const E=this._tagData.reduce((N,v)=>(x=Math.max(x,v.height),N+=v.width+this.textContentItemMargin),0);e?(h=E,o=x):(s+=E,a=Math.max(a,x))}this._noteData&&(s+=this._noteData.width,a=Math.max(a,this._noteData.height)),this._attachmentData&&(s+=this._attachmentData.width,a=Math.max(a,this._attachmentData.height)),this._postfixData&&(s+=this._postfixData.width,a=Math.max(a,this._postfixData.height)),this._rectInfo.textContentWidth=s,this._rectInfo.textContentHeight=a;let r=n>0&&a>0?this.blockContentMargin:0;const{paddingX:c,paddingY:d}=this.getPaddingVale();let f=Math.max(i,s),g=n+a;e&&o>0&&a>0&&(r+=this.blockContentMargin,f=Math.max(f,h),g+=o);const{paddingX:l,paddingY:m}=this.shapeInstance.getShapePadding(f,g,c,d);this.shapePadding.paddingX=l,this.shapePadding.paddingY=m;const u=this.getBorderWidth();return{width:f+c*2+l*2+u,height:g+d*2+r+m*2+u}}layout(){if(!this.group)return;this.group.clear();const{hoverRectPadding:t,tagPosition:e,openRealtimeRenderOnNodeTextEdit:i}=this.mindMap.opt;let{width:n,height:s,textContentItemMargin:a}=this,{paddingY:h}=this.getPaddingVale();const o=this.getBorderWidth()/2;h+=this.shapePadding.paddingY+o,this.shapeNode=this.shapeInstance.createShape(),this.shapeNode.addClass("smm-node-shape"),this.shapeNode.translate(o,o),this.style.shape(this.shapeNode),this.group.add(this.shapeNode),this.renderExpandBtnPlaceholderRect(),this.createUserListNode&&this.createUserListNode(),this.isGeneralization&&this.generalizationBelongNode&&this.group.addClass("generalization_"+this.generalizationBelongNode.uid);const r=()=>{this.hoverNode=new O().size(n+t*2,s+t*2).x(-t).y(-t),this.hoverNode.addClass("smm-hover-node"),this.style.hoverNode(this.hoverNode,n,s),this.group.add(this.hoverNode)};if(this.isUseCustomNodeContent()){const x=q({el:this._customNodeContent,width:n,height:s});this.group.add(x),r();return}const c=e===M.TAG_POSITION.BOTTOM,{textContentHeight:d}=this._rectInfo;let f=0;this._imgData&&(f=this._imgData.height,this.group.add(this._imgData.node),this._imgData.node.cx(n/2).y(h));let g=new z,l=0;if(this.mindMap.nodeInnerPrefixList.forEach(x=>{const E=this[`_${x.name}Data`];E&&(E.node.x(l).y((d-E.height)/2),g.add(E.node),l+=E.width+a)}),this._prefixData){const x=q({el:this._prefixData.el,width:this._prefixData.width,height:this._prefixData.height});x.x(l).y((d-this._prefixData.height)/2),g.add(x),l+=this._prefixData.width+a}let m=new z;if(this._iconData&&this._iconData.length>0){let x=0;this._iconData.forEach(E=>{E.node.x(l+x).y((d-E.height)/2),m.add(E.node),x+=E.width+a}),g.add(m),l+=x}if(this._textData){const x=this._textData.node.attr("data-offsetx")||0;this._textData.node.attr("data-offsetx",l),(this._textData.nodeContent||this._textData.node).x(-x).x(l).y((d-this._textData.height)/2),i&&this._textData.node.opacity(this.mindMap.renderer.textEdit.getCurrentEditNode()===this?0:1),g.add(this._textData.node),l+=this._textData.width+a}this._hyperlinkData&&(this._hyperlinkData.node.x(l).y((d-this._hyperlinkData.height)/2),g.add(this._hyperlinkData.node),l+=this._hyperlinkData.width+a);let u=new z;if(this._tagData&&this._tagData.length>0)if(c){let x=0;this._tagData.forEach(E=>{E.node.x(x).y(0),u.add(E.node),x+=E.width+a}),u.cx(n/2).y(h+f+d+(f>0&&d>0?this.blockContentMargin:0)+this.blockContentMargin),this.group.add(u)}else{let x=0;this._tagData.forEach(E=>{E.node.x(l+x).y((d-E.height)/2),u.add(E.node),x+=E.width+a}),g.add(u),l+=x}if(this._noteData&&(this._noteData.node.x(l).y((d-this._noteData.height)/2),g.add(this._noteData.node),l+=this._noteData.width),this._attachmentData&&(this._attachmentData.node.x(l).y((d-this._attachmentData.height)/2),g.add(this._attachmentData.node),l+=this._attachmentData.width),this._postfixData){const x=q({el:this._postfixData.el,width:this._postfixData.width,height:this._postfixData.height});x.x(l).y((d-this._postfixData.height)/2),g.add(x),l+=this._postfixData.width}this.group.add(g),g.translate(n/2-g.bbox().width/2,h+f+(f>0&&d>0?this.blockContentMargin:0)),r(),this.mindMap.emit("node_layout_end",this)}bindGroupEvent(){this.group.on("click",t=>{if(this.mindMap.emit("node_click",this,t),this.isMultipleChoice){t.stopPropagation(),this.isMultipleChoice=!1;return}this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&this.userList.length>0||this.active(t)}),this.group.on("mousedown",t=>{const{readonly:e,enableCtrlKeyNodeSelection:i,useLeftKeySelectionRightKeyDrag:n,mousedownEventPreventDefault:s}=this.mindMap.opt;if(s&&t.preventDefault(),e||(this.isRoot?t.which===3&&!n&&t.stopPropagation():t.which!==2&&t.stopPropagation()),!e&&(t.ctrlKey||t.metaKey)&&i){this.isMultipleChoice=!0;const a=this.getData("isActive");a||this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.mindMap.renderer[a?"removeNodeFromActiveList":"addNodeToActiveList"](this,!0),this.renderer.emitNodeActiveEvent(a?null:this)}this.mindMap.emit("node_mousedown",this,t)}),this.group.on("mouseup",t=>{!this.isRoot&&t.which!==2&&!this.mindMap.opt.readonly&&t.stopPropagation(),this.mindMap.emit("node_mouseup",this,t)}),this.group.on("mouseenter",t=>{this.isDrag||(this._isMouseenter=!0,this.showExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseenter(),this.mindMap.emit("node_mouseenter",this,t))}),this.group.on("mouseleave",t=>{this._isMouseenter&&(this._isMouseenter=!1,this.hideExpandBtn(),this.isGeneralization&&this.handleGeneralizationMouseleave(),this.mindMap.emit("node_mouseleave",this,t))}),this.group.on("dblclick",t=>{const{readonly:e,onlyOneEnableActiveNodeOnCooperate:i}=this.mindMap.opt;e||t.ctrlKey||t.metaKey||(t.stopPropagation(),!(i&&this.userList.length>0)&&this.mindMap.emit("node_dblclick",this,t))}),this.group.on("contextmenu",t=>{const{readonly:e,useLeftKeySelectionRightKeyDrag:i}=this.mindMap.opt;e||t.ctrlKey||(t.stopPropagation(),t.preventDefault(),!(this.mindMap.select&&!i&&this.mindMap.select.hasSelectRange())&&(this.getData("isActive")&&this.renderer.activeNodeList.length===1||(this.renderer.clearActiveNodeList(),this.active(t)),this.mindMap.emit("node_contextmenu",t,this)))})}active(t){this.mindMap.opt.readonly||(t&&t.stopPropagation(),!this.getData("isActive")&&(this.mindMap.emit("before_node_active",this,this.renderer.activeNodeList),this.renderer.clearActiveNodeList(),this.renderer.addNodeToActiveList(this,!0),this.renderer.emitNodeActiveEvent(this)))}deactivate(){this.mindMap.renderer.removeNodeFromActiveList(this),this.mindMap.renderer.emitNodeActiveEvent()}update(t){if(!this.group)return;this.updateNodeActiveClass();const{alwaysShowExpandBtn:e,notShowExpandBtn:i}=this.mindMap.opt;if(!i){const s=this.nodeData.children.length;if(e)this._expandBtn&&s<=0?this.removeExpandBtn():this.renderExpandBtn();else{const{isActive:a,expand:h}=this.getData();s<=0?this.removeExpandBtn():h&&!a&&!this._isMouseenter?this.hideExpandBtn():this.showExpandBtn()}}this.updateDragHandle(),this.renderGeneralization(t),this.updateUserListNode&&this.updateUserListNode();const n=this.group.transform();this.nodeDataSnapshot=JSON.stringify(this.getData()),(this.left!==n.translateX||this.top!==n.translateY)&&this.group.translate(this.left-n.translateX,this.top-n.translateY)}getNodePosInClient(t,e){const i=this.mindMap.draw.transform(),{scaleX:n,scaleY:s,translateX:a,translateY:h}=i,o=t*n+a,r=e*s+h;return{left:o,top:r}}checkIsInClient(t=0){const{left:e,top:i}=this.getNodePosInClient(this.left,this.top);return e+this.width>0-t&&i+this.height>0-t&&e<this.mindMap.width+t&&i<this.mindMap.height+t}reRender(t,e){const i=this.getSize(t,e);return this.layout(),this.update(),i}updateNodeActiveClass(){if(!this.group)return;const t=this.getData("isActive");this.group[t?"addClass":"removeClass"]("active")}updateNodeByActive(t){this.group&&(t?this.showExpandBtn():this.hideExpandBtn(),this.updateNodeActiveClass(),this.updateDragHandle())}render(t=()=>{},e=!1,i=!1){this.renderLine();const{openPerformance:n,performanceConfig:s}=this.mindMap.opt;if(e||!n||this.checkIsInClient(s.padding)||this.isRoot?this.group?(this.nodeDraw.has(this.group)||this.nodeDraw.add(this.group),this.needLayout&&(this.needLayout=!1,this.layout()),this.updateExpandBtnPlaceholderRect(),this.update(e)):(this.group=new z,this.group.addClass("smm-node"),this.group.css({cursor:"default"}),this.bindGroupEvent(),this.nodeDraw.add(this.group),this.layout(),this.update(e)):n&&s.removeNodeWhenOutCanvas&&this.removeSelf(),this.children&&this.children.length&&this.getData("expand")!==!1){let a=0;this.children.forEach(h=>{const o=()=>{h.render(()=>{a++,a>=this.children.length&&t()},e,i)};i?setTimeout(o,0):o()})}else t();this.nodeData.inserting&&(delete this.nodeData.inserting,this.active(),this.mindMap.emit("node_dblclick",this,null,!0))}removeSelf(){this.group&&(this.group.remove(),this.removeGeneralization())}remove(){this.group&&(this.group.remove(),this.removeGeneralization(),this.removeLine(),this.children&&this.children.length&&this.children.forEach(t=>{t.remove()}))}destroy(){this.removeLine(),this.parent&&this.parent.removeLine(),this.group&&(this.emptyUser&&this.emptyUser(),this.resetWhenDelete(),this.group.remove(),this.removeGeneralization(),this.group=null,this.style.onRemove())}hide(){if(this.group&&this.group.hide(),this.hideGeneralization(),this.parent){const t=this.parent.children.indexOf(this);this.parent._lines[t]&&this.parent._lines[t].hide(),this._lines.forEach(e=>{e.hide()})}this.children&&this.children.length&&this.children.forEach(t=>{t.hide()})}show(){if(this.group){if(this.group.show(),this.showGeneralization(),this.parent){const t=this.parent.children.indexOf(this);this.parent._lines[t]&&this.parent._lines[t].show(),this._lines.forEach(e=>{e.show()})}this.children&&this.children.length&&this.children.forEach(t=>{t.show()})}}setOpacity(t){this.group&&this.group.opacity(t),this._lines.forEach(e=>{e.opacity(t)}),this.children.forEach(e=>{e.setOpacity(t)}),this.setGeneralizationOpacity(t)}hideChildren(){this._lines.forEach(t=>{t.hide()}),this.children&&this.children.length&&this.children.forEach(t=>{t.hide()})}showChildren(){this._lines.forEach(t=>{t.show()}),this.children&&this.children.length&&this.children.forEach(t=>{t.show()})}startDrag(){this.isDrag=!0,this.group&&this.group.addClass("smm-node-dragging")}endDrag(){this.isDrag=!1,this.group&&this.group.removeClass("smm-node-dragging")}renderLine(t=!1){if(this.getData("expand")===!1)return;let e=this.nodeData.children.length;this.mindMap.opt.layout===M.LAYOUT.FISHBONE&&(this.isRoot||this.layerIndex===1)&&(e=0),e>this._lines.length?new Array(e-this._lines.length).fill(0).forEach(()=>{this._lines.push(this.lineDraw.path())}):e<this._lines.length&&(this._lines.slice(e).forEach(i=>{i.remove()}),this._lines=this._lines.slice(0,e)),this.renderer.layout.renderLine(this,this._lines,(...i)=>{this.styleLine(...i)},this.style.getStyle("lineStyle",!0)),t&&this.children&&this.children.length>0&&this.children.forEach(i=>{i.renderLine(t)})}getShape(){return this.mindMap.themeConfig.nodeUseLineStyle?M.SHAPE.RECTANGLE:this.style.getStyle("shape",!1,!1)}hasCustomPosition(){return this.customLeft!==void 0&&this.customTop!==void 0}ancestorHasCustomPosition(){let t=this;for(;t;){if(t.hasCustomPosition())return!0;t=t.parent}return!1}ancestorHasGeneralization(){let t=this.parent;for(;t;){if(t.checkHasGeneralization())return!0;t=t.parent}return!1}addChildren(t){this.children.push(t)}styleLine(t,e,i){const n=e.getSelfInhertStyle("lineWidth")||e.getStyle("lineWidth",!0),s=e.getSelfInhertStyle("lineColor")||this.getRainbowLineColor(e)||e.getStyle("lineColor",!0),a=e.getSelfInhertStyle("lineDasharray")||e.getStyle("lineDasharray",!0);this.style.line(t,{width:n,color:s,dasharray:a},i,e)}getRainbowLineColor(t){return this.mindMap.rainbowLines?this.mindMap.rainbowLines.getNodeColor(t):""}removeLine(){this._lines.forEach(t=>{t.remove()}),this._lines=[]}isAncestor(t){if(this.uid===t.uid)return!1;let e=t.parent;for(;e;){if(this.uid===e.uid)return!0;e=e.parent}return!1}isParent(t){if(this.uid===t.uid)return!1;const e=t.parent;return!!(e&&this.uid===e.uid)}isBrother(t){return!this.parent||this.uid===t.uid?!1:this.parent.children.find(e=>e.uid===t.uid)}getIndexInBrothers(){return this.parent&&this.parent.children?this.parent.children.findIndex(t=>t.uid===this.uid):-1}getPaddingVale(){return{paddingX:this.getStyle("paddingX"),paddingY:this.getStyle("paddingY")}}getStyle(t,e){const i=this.style.merge(t,e);return i===void 0?"":i}getSelfStyle(t){return this.style.getSelfStyle(t)}getParentSelfStyle(t){return this.parent?this.parent.getSelfStyle(t)||this.parent.getParentSelfStyle(t):null}getSelfInhertStyle(t){return this.getSelfStyle(t)||this.getParentSelfStyle(t)}getBorderWidth(){return this.style.merge("borderWidth",!1)||0}getData(t){return t?this.nodeData.data[t]:this.nodeData.data}getPureData(t=!0,e=!1){return at({},this,t,e)}getAncestorNodes(){const t=[];let e=this.parent;for(;e;)t.unshift(e),e=e.parent;return t}hasCustomStyle(){return this.style.hasCustomStyle()}getRect(){return this.group?this.group.rbox():null}getRectInSvg(){const{scaleX:t,scaleY:e,translateX:i,translateY:n}=this.mindMap.draw.transform();let{left:s,top:a,width:h,height:o}=this;const r=(s+h)*t+i,c=(a+o)*e+n;return s=s*t+i,a=a*e+n,{left:s,right:r,top:a,bottom:c,width:h*t,height:o*e}}highlight(){this.group&&this.group.addClass("smm-node-highlight")}closeHighlight(){this.group&&this.group.removeClass("smm-node-highlight")}fakeClone(){const t=new tt({...this.opt,uid:B()});return Object.keys(this).forEach(e=>{t[e]=this[e]}),t}createSvgTextNode(t=""){return new k().text(t)}getSvgObjects(){return{SVG:D,G:z,Rect:O}}checkEnableDragModifyNodeWidth(){const{enableDragModifyNodeWidth:t,isUseCustomNodeContent:e,customCreateNodeContent:i}=this.mindMap.opt;return t&&(this.mindMap.richText||e&&i)}hasCustomWidth(){return this.checkEnableDragModifyNodeWidth()&&this.customTextWidth!==void 0}}class Ki{constructor(t){this.max=t||1e3,this.size=0,this.pool=new Map}add(t,e){return!this.has(t)&&this.size>=this.max?!1:(this.delete(t),this.pool.set(t,e),this.size++,!0)}delete(t){this.pool.has(t)&&(this.pool.delete(t),this.size--)}has(t){return this.pool.has(t)}get(t){if(this.pool.has(t))return this.pool.get(t)}clear(){this.size=0,this.pool=new Map}}class H{constructor(t){this.renderer=t,this.mindMap=t.mindMap,this.draw=this.mindMap.draw,this.lineDraw=this.mindMap.lineDraw,this.root=null,this.lru=new Ki(this.mindMap.opt.maxNodeCacheCount),this.rootNodeCenterOffset=null}doLayout(){throw new Error("【computed】方法为必要方法，需要子类进行重写！")}renderLine(){throw new Error("【renderLine】方法为必要方法，需要子类进行重写！")}renderExpandBtn(){throw new Error("【renderExpandBtn】方法为必要方法，需要子类进行重写！")}renderGeneralization(){}cacheNode(t,e){this.renderer.nodeCache[t]=e,this.lru.add(t,e)}checkIsNeedResizeSources(){return[M.CHANGE_THEME].includes(this.renderer.renderSource)}checkIsLayerTypeChange(t,e){if(t>=2&&e>=2)return!1;if(t>=2&&e<2||t<2&&e>=2)return!0}checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(t){this.renderer.renderSource===M.CHANGE_LAYOUT&&(t.needRerenderExpandBtnPlaceholderRect=!0)}checkIsNodeDataChange(t,e){return t&&(t=typeof t=="string"?JSON.parse(t):t,t.isActive=e.isActive,t.expand=e.expand,t=JSON.stringify(t)),t!==JSON.stringify(e)}createNode(t,e,i,n,s,a){const h={};this.mindMap.nodeInnerPrefixList.forEach(c=>{if(c.createNodeData){const[d,f]=c.createNodeData({data:t,parent:e,ancestors:a,layerIndex:n,index:s});h[d]=f}});const o=t.data.uid;let r=null;if(t&&t._node&&!this.renderer.reRender){r=t._node;const c=this.checkIsLayerTypeChange(r.layerIndex,n);r.reset(),r.layerIndex=n,i?r.isRoot=!0:r.parent=e._node,this.cacheNode(t._node.uid,r),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(r);let d=!1;this.mindMap.nodeInnerPrefixList.forEach(l=>{if(l.updateNodeData){const m=l.updateNodeData(r,h);m&&(d=m)}});const f=this.checkIsNeedResizeSources(),g=this.checkIsNodeDataChange(t._node.nodeDataSnapshot,t.data);(f||g||c||r.getData("resetRichText")||r.getData("needUpdate")||d)&&(r.getSize(),r.needLayout=!0),this.checkGetGeneralizationChange(r,f)}else if((this.lru.has(o)||this.renderer.lastNodeCache[o])&&!this.renderer.reRender){r=this.lru.get(o)||this.renderer.lastNodeCache[o];const c=JSON.stringify(r.getData()),d=this.checkIsLayerTypeChange(r.layerIndex,n);r.reset(),r.nodeData=r.handleData(t||{}),r.layerIndex=n,i?r.isRoot=!0:r.parent=e._node,this.cacheNode(o,r),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(r),t._node=r;const f=this.checkIsNeedResizeSources(),g=this.checkIsNodeDataChange(c,t.data);let l=!1;this.mindMap.nodeInnerPrefixList.forEach(m=>{if(m.updateNodeData){const u=m.updateNodeData(r,h);u&&(l=u)}}),(f||g||d||r.getData("resetRichText")||r.getData("needUpdate")||l)&&(r.getSize(),r.needLayout=!0),this.checkGetGeneralizationChange(r,f)}else{const c=o||B();r=new tt({data:t,uid:c,renderer:this.renderer,mindMap:this.mindMap,draw:this.draw,layerIndex:n,isRoot:i,parent:i?null:e._node,...h}),t.data.uid=c,this.cacheNode(c,r),t._node=r}return t.data.isActive&&this.renderer.addNodeToActiveList(r),this.mindMap.renderer.findActiveNodeIndex(r)!==-1&&r.setData({isActive:!0}),i?this.root=r:e._node.addChildren(r),r}checkGetGeneralizationChange(t,e){const i=t.getData("generalization");i&&t._generalizationList&&t._generalizationList.length>0&&t._generalizationList.forEach((n,s)=>{const a=n.generalizationNode,h=a.getData(),o=i[s];(e||o&&JSON.stringify(h)!==JSON.stringify(o))&&(o&&(a.nodeData.data=o),a.getSize(),a.needLayout=!0)})}formatPosition(t,e,i){return typeof t=="number"?t:gt[t]!==void 0?e*gt[t]:/^\d\d*%$/.test(t)?Number.parseFloat(t)/100*e:(e-i)/2}formatInitRootNodePosition(t){const{CENTER:e}=M.INIT_ROOT_NODE_POSITION;return(!t||!Array.isArray(t)||t.length<2)&&(t=[e,e]),t}setNodeCenter(t,e){let{initRootNodePosition:i}=this.mindMap.opt;i=this.formatInitRootNodePosition(e||i),t.left=this.formatPosition(i[0],this.mindMap.width,t.width),t.top=this.formatPosition(i[1],this.mindMap.height,t.height)}getRootCenterOffset(t,e){if(this.rootNodeCenterOffset)return this.rootNodeCenterOffset;let{initRootNodePosition:i}=this.mindMap.opt;const{CENTER:n}=M.INIT_ROOT_NODE_POSITION;if(i=this.formatInitRootNodePosition(i),i[0]===n&&i[1]===n)this.rootNodeCenterOffset={x:0,y:0};else{const s={width:t,height:e},a={width:t,height:e};this.setNodeCenter(s,[n,n]),this.setNodeCenter(a),this.rootNodeCenterOffset={x:a.left-s.left,y:a.top-s.top}}return this.rootNodeCenterOffset}updateChildren(t,e,i){t.forEach(n=>{n[e]+=i,n.children&&n.children.length&&!n.hasCustomPosition()&&this.updateChildren(n.children,e,i)})}updateChildrenPro(t,e){t.forEach(i=>{Object.keys(e).forEach(n=>{i[n]+=e[n]}),i.children&&i.children.length&&!i.hasCustomPosition()&&this.updateChildrenPro(i.children,e)})}getNodeAreaWidth(t,e=!1){let i=[],n=0,s=(a,h)=>{e&&a.checkHasGeneralization()&&(n+=a._generalizationNodeWidth),a.children.length?(h+=a.width/2,a.children.forEach(o=>{s(o,h)})):(h+=a.width,i.push(h))};return s(t,0),Math.max(...i)+n}quadraticCurvePath(t,e,i,n,s=!1){let a,h;return s?(a=t+(i-t)*.8,h=e+(n-e)*.2):(a=t+(i-t)*.2,h=e+(n-e)*.8),`M ${t},${e} Q ${a},${h} ${i},${n}`}cubicBezierPath(t,e,i,n,s=!1){let a,h,o,r;return s?(a=t,h=e+(n-e)/2,o=i,r=h):(a=t+(i-t)/2,h=e,o=a,r=n),`M ${t},${e} C ${a},${h} ${o},${r} ${i},${n}`}computeNewPoint(t,e,i=0){if(t[0]===e[0])return e[1]>t[1]?[e[0],e[1]-i]:[e[0],e[1]+i];if(t[1]===e[1])return e[0]>t[0]?[e[0]-i,e[1]]:[e[0]+i,e[1]]}createFoldLine(t){const{lineRadius:e}=this.mindMap.themeConfig,i=t.length;let n="",s="";if(i>=3&&e>0){const a=t[i-3],h=t[i-2],o=t[i-1];if(!(a[0].toFixed(0)===h[0].toFixed(0)&&h[0].toFixed(0)===o[0].toFixed(0)||a[1].toFixed(0)===h[1].toFixed(0)&&h[1].toFixed(0)===o[1].toFixed(0))){const c=this.computeNewPoint(a,h,e),d=this.computeNewPoint(o,h,e);s=`Q ${h[0]},${h[1]} ${d[0]},${d[1]}`,t.splice(i-2,1,c,s)}}return t.forEach((a,h)=>{if(typeof a=="string")n+=a;else{const[o,r]=a;h===0?n+=`M ${o},${r}`:n+=`L ${o},${r}`}}),n}getMarginX(t){const{themeConfig:e,opt:i}=this.mindMap,{second:n,node:s}=e,a=i.hoverRectPadding*2;return t===1?n.marginX+a:s.marginX+a}getMarginY(t){const{themeConfig:e,opt:i}=this.mindMap,{second:n,node:s}=e,a=i.hoverRectPadding*2;return t===1?n.marginY+a:s.marginY+a}getNodeWidthWithGeneralization(t){return Math.max(t.width,t.checkHasGeneralization()?t._generalizationNodeWidth:0)}getNodeHeightWithGeneralization(t){return Math.max(t.height,t.checkHasGeneralization()?t._generalizationNodeHeight:0)}getNodeBoundaries(t,e){let{generalizationLineMargin:i,generalizationNodeMargin:n}=this.mindMap.themeConfig,s=c=>{let d=1/0,f=-1/0,g=1/0,l=-1/0;c.children&&c.children.length>0&&c.children.forEach(u=>{let{left:x,right:E,top:N,bottom:v}=s(u),y=u.checkHasGeneralization()&&u.getData("expand")?u._generalizationNodeWidth+n:0,_=u.checkHasGeneralization()&&u.getData("expand")?u._generalizationNodeHeight+n:0;x-(e==="h"?y:0)<d&&(d=x-(e==="h"?y:0)),E+(e==="h"?y:0)>f&&(f=E+(e==="h"?y:0)),N<g&&(g=N),v+(e==="v"?_:0)>l&&(l=v+(e==="v"?_:0))});let m={left:c.left,right:c.left+c.width,top:c.top,bottom:c.top+c.height};return{left:m.left<d?m.left:d,right:m.right>f?m.right:f,top:m.top<g?m.top:g,bottom:m.bottom>l?m.bottom:l}},{left:a,right:h,top:o,bottom:r}=s(t);return{left:a,right:h,top:o,bottom:r,generalizationLineMargin:i,generalizationNodeMargin:n}}getChildrenBoundaries(t,e,i=0,n){let{generalizationLineMargin:s,generalizationNodeMargin:a}=this.mindMap.themeConfig;const h=t.children.slice(i,n+1);let o=1/0,r=-1/0,c=1/0,d=-1/0;return h.forEach(f=>{const g=this.getNodeBoundaries(f,e);o=g.left<o?g.left:o,r=g.right>r?g.right:r,c=g.top<c?g.top:c,d=g.bottom>d?g.bottom:d}),{left:o,right:r,top:c,bottom:d,generalizationLineMargin:s,generalizationNodeMargin:a}}getNodeGeneralizationRenderBoundaries(t,e){let i=null;return t.range?i=this.getChildrenBoundaries(t.node,e,t.range[0],t.range[1]):i=this.getNodeBoundaries(t.node,e),i}getNodeActChildrenLength(t){return t.nodeData.children&&t.nodeData.children.length}setLineStyle(t,e,i,n){e.plot(this.transformPath(i)),t&&t(e,n,!0)}transformPath(t){const{customTransformNodeLinePath:e}=this.mindMap.opt;return e?e(t):t}}class Ft extends H{constructor(t={},e){super(t),this.isUseLeft=e===M.LAYOUT.LOGICAL_STRUCTURE_LEFT}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{t(this.root)}])}computedBaseValue(){let t=0;w(this.renderer.renderTree,null,(e,i,n,s,a,h)=>{let o=this.createNode(e,i,n,s,a,h);if(o.sortIndex=t,t++,n?this.setNodeCenter(o):this.isUseLeft?o.left=i._node.left-o.width-this.getMarginX(s):o.left=i._node.left+i._node.width+this.getMarginX(s),!e.data.expand)return!0},(e,i,n,s)=>{let a=e.data.expand===!1?0:e._node.children.length;e._node.childrenAreaHeight=a?e._node.children.reduce((o,r)=>o+r.height,0)+(a+1)*this.getMarginY(s+1):0;let h=e._node.checkHasGeneralization()?e._node._generalizationNodeHeight+this.getMarginY(s+1):0;e._node.childrenAreaHeight2=Math.max(e._node.childrenAreaHeight,h)},!0,0)}computedTopValue(){w(this.root,null,(t,e,i,n)=>{if(t.getData("expand")&&t.children&&t.children.length){let s=this.getMarginY(n+1),h=t.top+t.height/2-t.childrenAreaHeight/2+s;t.children.forEach(o=>{o.top=h,h+=o.height+s})}},null,!0)}adjustTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;let s=t.childrenAreaHeight2-this.getMarginY(n+1)*2-t.height;s>0&&this.updateBrothers(t,s/2)},null,!0)}updateBrothers(t,e){if(t.parent){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.uid===t.uid||s.hasCustomPosition())return;let h=0;a<n?h=-e:a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.updateBrothers(t.parent,e)}}renderLine(t,e,i,n){n==="curve"?this.renderLineCurve(t,e,i):n==="direct"?this.renderLineDirect(t,e,i):this.renderLineStraight(t,e,i)}renderLineStraight(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);let f=(this.getMarginX(t.layerIndex+1)-o)*.6;this.isUseLeft&&(f*=-1);let g=this.mindMap.themeConfig.nodeUseLineStyle;t.children.forEach((l,m)=>{let u;this.isUseLeft?u=t.layerIndex===0?n:n-o:u=t.layerIndex===0?n+a:n+a+o;let x=s+h/2,E=this.isUseLeft?l.left+l.width:l.left,N=l.top+l.height/2,v=g?l.width*(this.isUseLeft?-1:1):0;x=g&&!t.isRoot?x+h/2:x,N=g?N+l.height/2:N;let y=this.createFoldLine([[u,x],[u+f,x],[u+f,N],[E+v,N]]);this.setLineStyle(i,e[m],y,l)})}renderLineDirect(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);const{nodeUseLineStyle:d}=this.mindMap.themeConfig;t.children.forEach((f,g)=>{t.layerIndex===0&&(o=0);let l=this.isUseLeft?n-o:n+a+o,m=s+h/2,u=this.isUseLeft?f.left+f.width:f.left,x=f.top+f.height/2;m=d&&!t.isRoot?m+h/2:m,x=d?x+f.height/2:x;let E=d?` L ${this.isUseLeft?f.left:f.left+f.width},${x}`:"",N=`M ${l},${m} L ${u},${x}`+E;this.setLineStyle(i,e[g],N,f)})}renderLineCurve(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);const{nodeUseLineStyle:d,rootLineStartPositionKeepSameInCurve:f,rootLineKeepSameInCurve:g}=this.mindMap.themeConfig;t.children.forEach((l,m)=>{t.layerIndex===0&&(o=0);let u;this.isUseLeft?u=t.layerIndex===0&&!f?n+a/2:n-o:u=t.layerIndex===0&&!f?n+a/2:n+a+o;let x=s+h/2,E=this.isUseLeft?l.left+l.width:l.left,N=l.top+l.height/2,v="";x=d&&!t.isRoot?x+h/2:x,N=d?N+l.height/2:N;let y;this.isUseLeft?y=d?` L ${l.left},${N}`:"":y=d?` L ${l.left+l.width},${N}`:"",t.isRoot&&!g?v=this.quadraticCurvePath(u,x,E,N)+y:v=this.cubicBezierPath(u,x,E,N)+y,this.setLineStyle(i,e[m],v,l)})}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s,layerIndex:a}=t;a===0&&(s=0);let{translateX:h,translateY:o}=e.transform(),r=this.mindMap.themeConfig.nodeUseLineStyle?n/2:0,c=this.isUseLeft?0-s:i,d=n/2+r;c===h&&d===o||e.translate(c-h,d-o)}renderGeneralization(t){t.forEach(e=>{let{left:i,top:n,bottom:s,right:a,generalizationLineMargin:h,generalizationNodeMargin:o}=this.getNodeGeneralizationRenderBoundaries(e,"h"),r=this.isUseLeft?i-h:a+h,c=r,d=n,f=r,g=s,l=c+(this.isUseLeft?-20:20),m=d+(g-d)/2,u=`M ${c},${d} Q ${l},${m} ${f},${g}`;e.generalizationLine.plot(u),e.generalizationNode.left=r+(this.isUseLeft?-o:o)-(this.isUseLeft?e.generalizationNode.width:0),e.generalizationNode.top=n+(s-n-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n){this.isUseLeft?t.size(e,n).x(-e).y(0):t.size(e,n).x(i).y(0)}}let Zi=class extends H{constructor(t={}){super(t)}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i?this.setNodeCenter(h):(e._node.dir?h.dir=e._node.dir:h.dir=h.getData("dir")||(s%2===0?M.LAYOUT_GROW_DIR.RIGHT:M.LAYOUT_GROW_DIR.LEFT),h.left=h.dir===M.LAYOUT_GROW_DIR.RIGHT?e._node.left+e._node.width+this.getMarginX(n):e._node.left-this.getMarginX(n)-h.width),!t.data.expand)return!0},(t,e,i,n)=>{if(!t.data.expand){t._node.leftChildrenAreaHeight=0,t._node.rightChildrenAreaHeight=0;return}let s=0,a=0,h=0,o=0;t._node.children.forEach(c=>{c.dir===M.LAYOUT_GROW_DIR.LEFT?(s++,h+=c.height):(a++,o+=c.height)}),t._node.leftChildrenAreaHeight=h+(s+1)*this.getMarginY(n+1),t._node.rightChildrenAreaHeight=o+(a+1)*this.getMarginY(n+1);let r=t._node.checkHasGeneralization()?t._node._generalizationNodeHeight+this.getMarginY(n+1):0;t._node.leftChildrenAreaHeight2=Math.max(t._node.leftChildrenAreaHeight,r),t._node.rightChildrenAreaHeight2=Math.max(t._node.rightChildrenAreaHeight,r)},!0,0)}computedTopValue(){w(this.root,null,(t,e,i,n)=>{if(t.getData("expand")&&t.children&&t.children.length){let s=this.getMarginY(n+1),a=t.top+t.height/2+s,h=a-t.leftChildrenAreaHeight/2,o=a-t.rightChildrenAreaHeight/2;t.children.forEach(r=>{r.dir===M.LAYOUT_GROW_DIR.LEFT?(r.top=h,h+=r.height+s):(r.top=o,o+=r.height+s)})}},null,!0)}adjustTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;let s=this.getMarginY(n+1)*2+t.height,a=t.leftChildrenAreaHeight2-s,h=t.rightChildrenAreaHeight2-s;(a>0||h>0)&&this.updateBrothers(t,a/2,h/2)},null,!0)}updateBrothers(t,e,i){if(t.parent){let n=t.parent.children.filter(a=>a.dir===t.dir),s=L(t,n);n.forEach((a,h)=>{if(a.hasCustomPosition())return;let o=0,r=a.dir===M.LAYOUT_GROW_DIR.LEFT?e:i;h<s?o=-r:h>s&&(o=r),a.top+=o,a.children&&a.children.length&&this.updateChildren(a.children,"top",o)}),this.updateBrothers(t.parent,e,i)}}renderLine(t,e,i,n){n==="curve"?this.renderLineCurve(t,e,i):n==="direct"?this.renderLineDirect(t,e,i):this.renderLineStraight(t,e,i)}renderLineStraight(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);let f=(this.getMarginX(t.layerIndex+1)-o)*.6,g=this.mindMap.themeConfig.nodeUseLineStyle;t.children.forEach((l,m)=>{let u=0,x=0,E=g?l.width:0;l.dir===M.LAYOUT_GROW_DIR.LEFT?(x=-f,u=t.layerIndex===0?n:n-o,E=-E):(x=f,u=t.layerIndex===0?n+a:n+a+o);let N=s+h/2,v=l.dir===M.LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,y=l.top+l.height/2;N=g&&!t.isRoot?N+h/2:N,y=g?y+l.height/2:y;let _=this.createFoldLine([[u,N],[u+x,N],[u+x,y],[v+E,y]]);this.setLineStyle(i,e[m],_,l)})}renderLineDirect(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);const{nodeUseLineStyle:d}=this.mindMap.themeConfig;t.children.forEach((f,g)=>{t.layerIndex===0&&(o=0);let l=f.dir===M.LAYOUT_GROW_DIR.LEFT?n-o:n+a+o,m=s+h/2,u=f.dir===M.LAYOUT_GROW_DIR.LEFT?f.left+f.width:f.left,x=f.top+f.height/2;m=d&&!t.isRoot?m+h/2:m,x=d?x+f.height/2:x;let E="";d&&(f.dir===M.LAYOUT_GROW_DIR.LEFT?E=` L ${f.left},${x}`:E=` L ${f.left+f.width},${x}`);let N=`M ${l},${m} L ${u},${x}`+E;this.setLineStyle(i,e[g],N,f)})}renderLineCurve(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);const{nodeUseLineStyle:d,rootLineKeepSameInCurve:f,rootLineStartPositionKeepSameInCurve:g}=this.mindMap.themeConfig;t.children.forEach((l,m)=>{t.layerIndex===0&&(o=0);let u=t.layerIndex===0&&!g?n+a/2:l.dir===M.LAYOUT_GROW_DIR.LEFT?n-o:n+a+o,x=s+h/2,E=l.dir===M.LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,N=l.top+l.height/2,v="";x=d&&!t.isRoot?x+h/2:x,N=d?N+l.height/2:N;let y="";d&&(l.dir===M.LAYOUT_GROW_DIR.LEFT?y=` L ${l.left},${N}`:y=` L ${l.left+l.width},${N}`),t.isRoot&&!f?v=this.quadraticCurvePath(u,x,E,N)+y:v=this.cubicBezierPath(u,x,E,N)+y,this.setLineStyle(i,e[m],v,l)})}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s}=t,{translateX:a,translateY:h}=e.transform(),o=this.mindMap.themeConfig.nodeUseLineStyle?n/2:0,r=t.dir===M.LAYOUT_GROW_DIR.LEFT?0-s:i,c=n/2+o;if(r===a&&c===h)return;let d=r-a,f=c-h;e.translate(d,f)}renderGeneralization(t){t.forEach(e=>{let i=e.node.dir===M.LAYOUT_GROW_DIR.LEFT,{top:n,bottom:s,left:a,right:h,generalizationLineMargin:o,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"h"),c=i?a-o:h+o,d=c,f=n,g=c,l=s,m=d+(i?-20:20),u=f+(l-f)/2,x=`M ${d},${f} Q ${m},${u} ${g},${l}`;e.generalizationLine.plot(x),e.generalizationNode.left=c+(i?-r:r)-(i?e.generalizationNode.width:0),e.generalizationNode.top=n+(s-n-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n,s){s.dir===M.LAYOUT_GROW_DIR.LEFT?t.size(e,n).x(-e).y(0):t.size(e,n).x(i).y(0)}};class qi extends H{constructor(t={}){super(t)}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i?this.setNodeCenter(h):e._node.isRoot&&(h.top=e._node.top+e._node.height+this.getMarginX(n)),!t.data.expand)return!0},(t,e,i,n)=>{if(i){let s=t.data.expand===!1?0:t._node.children.length;t._node.childrenAreaWidth=s?t._node.children.reduce((a,h)=>a+h.width,0)+(s+1)*this.getMarginX(n+1):0}},!0,0)}computedLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(t.getData("expand")&&t.children&&t.children.length){let s=this.getMarginX(n+1),a=this.getMarginY(n+1);if(i){let o=t.left+t.width/2-t.childrenAreaWidth/2+s;t.children.forEach(r=>{r.left=o,o+=r.width+s})}else{let h=t.top+this.getNodeHeightWithGeneralization(t)+a+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0);t.children.forEach(o=>{o.left=t.left+t.width*.5,o.top=h,h+=this.getNodeHeightWithGeneralization(o)+a+(this.getNodeActChildrenLength(o)>0?o.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;if(e&&e.isRoot){let h=this.getNodeAreaWidth(t,!0)-t.width;h>0&&this.updateBrothersLeft(t,h)}let s=t.children.length;if(e&&!e.isRoot&&s>0){let a=this.getMarginY(n+1),h=t.children.reduce((o,r)=>o+this.getNodeHeightWithGeneralization(r)+(this.getNodeActChildrenLength(r)>0?r.expandBtnSize:0),0)+s*a;this.updateBrothersTop(t,h)}},(t,e,i)=>{if(i){let{right:n,left:s}=this.getNodeBoundaries(t,"h"),a=n-s,h=t.left-s-(a-t.width)/2;this.updateChildren(t.children,"left",h)}},!0)}updateBrothersLeft(t,e){if(t.parent){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{s.hasCustomPosition()||a<=n||(s.left+=e,s.children&&s.children.length&&this.updateChildren(s.children,"left",e))}),this.updateBrothersLeft(t.parent,e)}}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let h=0;a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);let d=t.children.length,f=this.getMarginX(t.layerIndex+1);if(t.isRoot){let g=n+a/2,l=s+h,m=f*.7,u=1/0,x=-1/0;t.children.forEach((N,v)=>{let y=N.left+N.width/2,_=N.top;y<u&&(u=y),y>x&&(x=y);let T=this.mindMap.themeConfig.nodeUseLineStyle?` L ${N.left},${_} L ${N.left+N.width},${_}`:"",Y=`M ${y},${l+m} L ${y},${l+m>_?_+N.height:_}`+T;this.setLineStyle(i,e[v],Y,N)}),u=Math.min(u,g),x=Math.max(x,g);let E=this.lineDraw.path();if(t.style.line(E),E.plot(this.transformPath(`M ${g},${l} L ${g},${l+m}`)),t._lines.push(E),i&&i(E,t),d>0){let N=this.lineDraw.path();t.style.line(N),N.plot(this.transformPath(`M ${u},${l+m} L ${x},${l+m}`)),t._lines.push(N),i&&i(N,t)}}else{let g=s+h,l=-1/0,m=t.left+t.width*.3;if(t.children.forEach((u,x)=>{let E=u.top+u.height/2;E>l&&(l=E);let N="",v=u.left,y=u.left+u.width<m,_=!1;y?v=u.left+u.width:u.left<m&&u.left+u.width>m&&(_=!0,E=u.top,l=E),E>s&&E<g?N=`M ${y?t.left:t.left+t.width},${E} L ${v},${E}`:E<g?(_&&(E=u.top+u.height,v=m),N=`M ${m},${s} L ${m},${E} L ${v},${E}`):(_&&(v=m),N=`M ${m},${E} L ${v},${E}`);let T=this.mindMap.themeConfig.nodeUseLineStyle?` L ${v},${E-u.height/2} L ${v},${E+u.height/2}`:"";N+=T,this.setLineStyle(i,e[x],N,u)}),d>0){let u=this.lineDraw.path();o=d>0?o:0,t.style.line(u),l<g+o?u.hide():(u.plot(this.transformPath(`M ${m},${g+o} L ${m},${l}`)),u.show()),t._lines.push(u),i&&i(u,t)}}}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s,isRoot:a}=t;if(!a){let{translateX:h,translateY:o}=e.transform();e.translate(i*.3-s/2-h,n+s/2-o)}}renderGeneralization(t){t.forEach(e=>{let{top:i,bottom:n,right:s,generalizationLineMargin:a,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(e,"h"),o=s+a,r=i,c=s+a,d=n,f=o+20,g=r+(d-r)/2,l=`M ${o},${r} Q ${f},${g} ${c},${d}`;e.generalizationLine.plot(this.transformPath(l)),e.generalizationNode.left=s+h,e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n,s){t.size(i,e).x(0).y(n)}}class Ji extends H{constructor(t={}){super(t)}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedLeftValue()},()=>{this.adjustLeftValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i?this.setNodeCenter(h):h.top=e._node.top+e._node.height+this.getMarginX(n),!t.data.expand)return!0},(t,e,i,n)=>{let s=t.data.expand===!1?0:t._node.children.length;t._node.childrenAreaWidth=s?t._node.children.reduce((h,o)=>h+o.width,0)+(s+1)*this.getMarginY(n+1):0;let a=t._node.checkHasGeneralization()?t._node._generalizationNodeWidth+this.getMarginY(n+1):0;t._node.childrenAreaWidth2=Math.max(t._node.childrenAreaWidth,a)},!0,0)}computedLeftValue(){w(this.root,null,(t,e,i,n)=>{if(t.getData("expand")&&t.children&&t.children.length){let s=this.getMarginY(n+1),h=t.left+t.width/2-t.childrenAreaWidth/2+s;t.children.forEach(o=>{o.left=h,h+=o.width+s})}},null,!0)}adjustLeftValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;let s=t.childrenAreaWidth2-this.getMarginY(n+1)*2-t.width;s>0&&this.updateBrothers(t,s/2)},null,!0)}updateBrothers(t,e){if(t.parent){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let h=0;a<n?h=-e:a>n&&(h=e),s.left+=h,s.children&&s.children.length&&this.updateChildren(s.children,"left",h)}),this.updateBrothers(t.parent,e)}}renderLine(t,e,i,n){n==="curve"?this.renderLineCurve(t,e,i):n==="direct"?this.renderLineDirect(t,e,i):this.renderLineStraight(t,e,i)}renderLineCurve(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);const{nodeUseLineStyle:d,rootLineStartPositionKeepSameInCurve:f,rootLineKeepSameInCurve:g}=this.mindMap.themeConfig;t.children.forEach((l,m)=>{t.layerIndex===0&&(o=0);let u=n+a/2,x=t.layerIndex===0&&!f?s+h/2:s+h+o,E=l.left+l.width/2,N=l.top,v="",y=d?` L ${l.left},${N} L ${l.left+l.width},${N}`:"";t.isRoot&&!g?v=this.quadraticCurvePath(u,x,E,N,!0)+y:v=this.cubicBezierPath(u,x,E,N,!0)+y,this.setLineStyle(i,e[m],v,l)})}renderLineDirect(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h}=t;const{nodeUseLineStyle:o}=this.mindMap.themeConfig;let r=n+a/2,c=s+h;t.children.forEach((d,f)=>{let g=d.left+d.width/2,l=d.top,m=o?` L ${d.left},${l} L ${d.left+d.width},${l}`:"",u=`M ${r},${c} L ${g},${l}`+m;this.setLineStyle(i,e[f],u,d)})}renderLineStraight(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o,isRoot:r}=t;const{alwaysShowExpandBtn:c,notShowExpandBtn:d}=this.mindMap.opt;(!c||d)&&(o=0);let f=n+a/2,g=s+h,m=this.getMarginX(t.layerIndex+1)*.7,u=1/0,x=-1/0,E=t.children.length;t.children.forEach((v,y)=>{let _=v.left+v.width/2,T=g+m>v.top?v.top+v.height:v.top;_<u&&(u=_),_>x&&(x=_);let Y=this.mindMap.themeConfig.nodeUseLineStyle?` L ${v.left},${T} L ${v.left+v.width},${T}`:"",et=`M ${_},${g+m} L ${_},${T}`+Y;this.setLineStyle(i,e[y],et,v)}),u=Math.min(f,u),x=Math.max(f,x);let N=this.lineDraw.path();if(t.style.line(N),o=E>0&&!r?o:0,N.plot(this.transformPath(`M ${f},${g+o} L ${f},${g+m}`)),t._lines.push(N),i&&i(N,t),E>0){let v=this.lineDraw.path();t.style.line(v),v.plot(this.transformPath(`M ${u},${g+m} L ${x},${g+m}`)),t._lines.push(v),i&&i(v,t)}}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s}=t,{translateX:a,translateY:h}=e.transform();e.translate(i/2-s/2-a,n+s/2-h)}renderGeneralization(t){t.forEach(e=>{let{bottom:i,left:n,right:s,generalizationLineMargin:a,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(e,"v"),o=n,r=i+a,c=s,d=i+a,f=o+(c-o)/2,g=r+20,l=`M ${o},${r} Q ${f},${g} ${c},${d}`;e.generalizationLine.plot(this.transformPath(l)),e.generalizationNode.top=i+h,e.generalizationNode.left=n+(s-n-e.generalizationNode.width)/2})}renderExpandBtnRect(t,e,i,n,s){t.size(i,e).x(0).y(n)}}class Bt extends H{constructor(t={},e){super(t),this.layout=e}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i?this.setNodeCenter(h):(this.layout===M.LAYOUT.TIMELINE2?e._node.dir?h.dir=e._node.dir:h.dir=s%2===0?M.LAYOUT_GROW_DIR.BOTTOM:M.LAYOUT_GROW_DIR.TOP:h.dir="",e._node.isRoot&&(h.top=e._node.top+(t._node.height>e._node.height?-(t._node.height-e._node.height)/2:(e._node.height-t._node.height)/2))),!t.data.expand)return!0},null,!0,0)}computedLeftTopValue(){w(this.root,null,(t,e,i,n,s)=>{if(t.getData("expand")&&t.children&&t.children.length){let a=this.getMarginX(n+1),h=this.getMarginY(n+1);if(i){let r=t.left+t.width+a;t.children.forEach(c=>{c.left=r,r+=c.width+a})}else{let o=t.top+t.height+h+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0);t.children.forEach(r=>{r.left=t.left+t.width*.5,r.top=o,o+=r.height+h+(this.getNodeActChildrenLength(r)>0?r.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;t.isRoot&&this.updateBrothersLeft(t);let s=t.children.length;if(e&&!e.isRoot&&s>0){let a=this.getMarginY(n+1),h=t.children.reduce((o,r)=>o+r.height+(this.getNodeActChildrenLength(r)>0?r.expandBtnSize:0),0)+s*a;this.updateBrothersTop(t,h)}},(t,e,i,n)=>{e&&e.isRoot&&t.dir===M.LAYOUT_GROW_DIR.TOP&&t.children.forEach(s=>{let a=this.getNodeAreaHeight(s),h=s.top;s.top=t.top-(s.top-t.top)-a+t.height,this.updateChildren(s.children,"top",s.top-h)})},!0)}getNodeAreaHeight(t){let e=0,i=n=>{e+=n.height+(this.getNodeActChildrenLength(n)>0?n.expandBtnSize:0)+this.getMarginY(n.layerIndex),n.children.length&&n.children.forEach(s=>{i(s)})};return i(t),e}updateBrothersLeft(t){let e=t.children,i=0;e.forEach(n=>{n.left+=i,n.children&&n.children.length&&this.updateChildren(n.children,"left",i);let{left:s,right:a}=this.getNodeBoundaries(n,"h"),o=a-s-n.width;o>0&&(i+=o)})}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let h=0;a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0);let d=t.children.length;if(t.isRoot){let f=t;t.children.forEach((g,l)=>{let m=f.left+f.width,u=g.left,x=t.top+t.height/2,E=`M ${m},${x} L ${u},${x}`;this.setLineStyle(i,e[l],E,g),f=g})}else{let f=-1/0,g=1/0,l=t.left+t.width*.3;if(t.children.forEach((m,u)=>{let x=m.top+m.height/2;x>f&&(f=x),x<g&&(g=x);let E=`M ${l},${x} L ${m.left},${x}`;this.setLineStyle(i,e[u],E,m)}),d>0){let m=this.lineDraw.path();o=d>0?o:0,t.parent&&t.parent.isRoot&&t.dir===M.LAYOUT_GROW_DIR.TOP?m.plot(this.transformPath(`M ${l},${s} L ${l},${g}`)):m.plot(this.transformPath(`M ${l},${s+h+o} L ${l},${f}`)),t.style.line(m),t._lines.push(m),i&&i(m,t)}}}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s,isRoot:a}=t;if(!a){let{translateX:h,translateY:o}=e.transform();t.parent&&t.parent.isRoot&&t.dir===M.LAYOUT_GROW_DIR.TOP?e.translate(i*.3-s/2-h,-s/2-o):e.translate(i*.3-s/2-h,n+s/2-o)}}renderGeneralization(t){t.forEach(e=>{let{top:i,bottom:n,right:s,generalizationLineMargin:a,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(e,"h"),o=s+a,r=i,c=s+a,d=n,f=o+20,g=r+(d-r)/2,l=`M ${o},${r} Q ${f},${g} ${c},${d}`;e.generalizationLine.plot(this.transformPath(l)),e.generalizationNode.left=s+h,e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n,s){if(this.layout===M.LAYOUT.TIMELINE)t.size(i,e).x(0).y(n);else{let a="";s.dir===M.LAYOUT_GROW_DIR.TOP?a=s.layerIndex===1?M.LAYOUT_GROW_DIR.TOP:M.LAYOUT_GROW_DIR.BOTTOM:a=M.LAYOUT_GROW_DIR.BOTTOM,a===M.LAYOUT_GROW_DIR.TOP?t.size(i,e).x(0).y(-e):t.size(i,e).x(0).y(n)}}}class Qi extends H{constructor(t={},e){super(t),this.layout=e}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i?this.setNodeCenter(h):(e._node.dir?h.dir=e._node.dir:h.dir=s%2===0?M.LAYOUT_GROW_DIR.RIGHT:M.LAYOUT_GROW_DIR.LEFT,e._node.isRoot?h.left=e._node.left+(t._node.width>e._node.width?-(t._node.width-e._node.width)/2:(e._node.width-t._node.width)/2):h.left=h.dir===M.LAYOUT_GROW_DIR.RIGHT?e._node.left+e._node.width+this.getMarginX(n):e._node.left-this.getMarginX(n)-h.width),!t.data.expand)return!0},(t,e,i,n)=>{if(i)return;let s=t.data.expand===!1?0:t._node.children.length;t._node.childrenAreaHeight=s?t._node.children.reduce((a,h)=>a+h.height,0)+(s+1)*this.getMarginY(n+1):0},!0,0)}computedTopValue(){w(this.root,null,(t,e,i,n,s)=>{if(t.getData("expand")&&t.children&&t.children.length){let a=this.getMarginY(n+1);if(i){let o=t.top+t.height+a;t.children.forEach(r=>{r.top=o,o+=r.height+a})}else{let h=this.getMarginY(n+1),r=t.top+t.height/2+h-t.childrenAreaHeight/2;t.children.forEach(c=>{c.top=r,r+=c.height+h})}}},null,!0)}adjustLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand")||i)return;let s=this.getMarginY(n+1)*2+t.height,a=t.childrenAreaHeight-s;a>0&&this.updateBrothers(t,a/2)},null,!0)}updateBrothers(t,e){if(t.parent){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition()||!t.parent.isRoot&&s.uid===t.uid)return;let h=0;t.parent.isRoot?a<n?h=0:a>n?h=e*2:h=e:a<n?h=-e:a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.updateBrothers(t.parent,e)}}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let h=0;a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.updateBrothersTop(t.parent,e)}}renderLine(t,e,i,n){n==="curve"?this.renderLineCurve(t,e,i):n==="direct"?this.renderLineDirect(t,e,i):this.renderLineStraight(t,e,i)}renderLineStraight(t,e,i){if(t.children.length<=0)return[];let{expandBtnSize:n}=t;const{alwaysShowExpandBtn:s,notShowExpandBtn:a}=this.mindMap.opt;if((!s||a)&&(n=0),t.isRoot){let h=t;t.children.forEach((o,r)=>{let c=h.top+h.height,d=o.top,f=t.left+t.width/2,g=`M ${f},${c} L ${f},${d}`;this.setLineStyle(i,e[r],g,o),h=o})}else if(t.dir===M.LAYOUT_GROW_DIR.RIGHT){let h=t.left+t.width,o=t.top+t.height/2,c=(this.getMarginX(t.layerIndex+1)-n)*.6;t.children.forEach((d,f)=>{let g=d.left,l=d.top+d.height/2,m=this.createFoldLine([[h,o],[h+c,o],[h+c,l],[g,l]]);this.setLineStyle(i,e[f],m,d)})}else{let h=t.left,o=t.top+t.height/2,c=(this.getMarginX(t.layerIndex+1)-n)*.6;t.children.forEach((d,f)=>{let g=d.left+d.width,l=d.top+d.height/2,m=this.createFoldLine([[h,o],[h-c,o],[h-c,l],[g,l]]);this.setLineStyle(i,e[f],m,d)})}}renderLineDirect(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0),t.children.forEach((d,f)=>{if(t.isRoot){let g=t;t.children.forEach((l,m)=>{let u=g.top+g.height,x=l.top,E=t.left+t.width/2,N=`M ${E},${u} L ${E},${x}`;this.setLineStyle(i,e[m],N,l),g=l})}else{let g=d.dir===M.LAYOUT_GROW_DIR.LEFT?n-o:n+a+o,l=s+h/2,m=d.dir===M.LAYOUT_GROW_DIR.LEFT?d.left+d.width:d.left,u=d.top+d.height/2,x=`M ${g},${l} L ${m},${u}`;this.setLineStyle(i,e[f],x,d)}})}renderLineCurve(t,e,i){if(t.children.length<=0)return[];let{left:n,top:s,width:a,height:h,expandBtnSize:o}=t;const{alwaysShowExpandBtn:r,notShowExpandBtn:c}=this.mindMap.opt;(!r||c)&&(o=0),t.children.forEach((d,f)=>{if(t.isRoot){let g=t;t.children.forEach((l,m)=>{let u=g.top+g.height,x=l.top,E=t.left+t.width/2,N=`M ${E},${u} L ${E},${x}`;this.setLineStyle(i,e[m],N,l),g=l})}else{let g=d.dir===M.LAYOUT_GROW_DIR.LEFT?n-o:n+a+o,l=s+h/2,m=d.dir===M.LAYOUT_GROW_DIR.LEFT?d.left+d.width:d.left,u=d.top+d.height/2,x=this.cubicBezierPath(g,l,m,u);this.setLineStyle(i,e[f],x,d)}})}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s,isRoot:a}=t;if(!a){let{translateX:h,translateY:o}=e.transform();t.dir===M.LAYOUT_GROW_DIR.RIGHT?e.translate(i-h,n/2-o):e.translate(-s-h,n/2-o)}}renderGeneralization(t){t.forEach(e=>{let i=e.node.dir===M.LAYOUT_GROW_DIR.LEFT,{top:n,bottom:s,left:a,right:h,generalizationLineMargin:o,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"h"),c=i?a-o:h+o,d=c,f=n,g=c,l=s,m=d+(i?-20:20),u=f+(l-f)/2,x=`M ${d},${f} Q ${m},${u} ${g},${l}`;e.generalizationLine.plot(this.transformPath(x)),e.generalizationNode.left=c+(i?-r:r)-(i?e.generalizationNode.width:0),e.generalizationNode.top=n+(s-n-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n,s){s.dir===M.LAYOUT_GROW_DIR.LEFT?t.size(e,n).x(-e).y(0):t.size(e,n).x(i).y(0)}}const I={top:{renderExpandBtn({node:p,btn:t,expandBtnSize:e,translateX:i,translateY:n,width:s,height:a}){p.parent&&p.parent.isRoot?t.translate(s*.3-e/2-i,-e/2-n):t.translate(s*.3-e/2-i,a+e/2-n)},renderLine({node:p,line:t,top:e,x:i,lineLength:n,height:s,expandBtnSize:a,maxy:h,ctx:o}){p.parent&&p.parent.isRoot?t.plot(o.transformPath(`M ${i},${e} L ${i+n},${e-Math.tan(G(o.mindMap.opt.fishboneDeg))*n}`)):t.plot(o.transformPath(`M ${i},${e+s+a} L ${i},${h}`))},computedLeftTopValue({layerIndex:p,node:t,ctx:e}){if(p>=1&&t.children){let i=e.getMarginY(p+1),n=t.left+t.width*e.childIndent,s=t.top+t.height+(e.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+i;t.children.forEach(a=>{a.left=n,a.top+=s,s+=a.height+(e.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}},adjustLeftTopValueBefore({node:p,parent:t,ctx:e,layerIndex:i}){let n=p.children.length,s=e.getMarginY(i+1);if(t&&!t.isRoot&&n>0){let a=p.children.reduce((h,o)=>h+o.height+(e.getNodeActChildrenLength(o)>0?o.expandBtnSize:0)+s,0);e.updateBrothersTop(p,a)}},adjustLeftTopValueAfter({parent:p,node:t,ctx:e}){if(p&&p.isRoot){let i=e.getMarginY(t.layerIndex+1),n=t.expandBtnSize+i;t.children.forEach(s=>{let a=e.getNodeAreaHeight(s),h=s.top,o=s.left;s.top=t.top-(s.top-t.top)-a+t.height,s.left=t.left+t.width*e.indent+(a+n)/Math.tan(G(e.mindMap.opt.fishboneDeg)),n+=a,e.updateChildrenPro(s.children,{top:s.top-h,left:s.left-o})})}}},bottom:{renderExpandBtn({node:p,btn:t,expandBtnSize:e,translateX:i,translateY:n,width:s,height:a}){p.parent&&p.parent.isRoot?t.translate(s*.3-e/2-i,a+e/2-n):t.translate(s*.3-e/2-i,-e/2-n)},renderLine({node:p,line:t,top:e,x:i,lineLength:n,height:s,miny:a,ctx:h}){p.parent&&p.parent.isRoot?t.plot(h.transformPath(`M ${i},${e+s} L ${i+n},${e+s+Math.tan(G(h.mindMap.opt.fishboneDeg))*n}`)):t.plot(h.transformPath(`M ${i},${e} L ${i},${a}`))},computedLeftTopValue({layerIndex:p,node:t,ctx:e}){let i=e.getMarginY(p+1);if(p===1&&t.children){let n=t.left+t.width*e.childIndent,s=t.top+t.height+(e.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+i;t.children.forEach(a=>{a.left=n,a.top=s+(e.getNodeActChildrenLength(a)>0?a.expandBtnSize:0),s+=a.height+(e.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}if(p>1&&t.children){let n=t.left+t.width*e.childIndent,s=t.top-(e.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)-i;t.children.forEach(a=>{a.left=n,a.top=s-a.height,s-=a.height+(e.getNodeActChildrenLength(a)>0?a.expandBtnSize:0)+i})}},adjustLeftTopValueBefore({node:p,ctx:t,layerIndex:e}){let i=t.getMarginY(e+1),n=p.children.length;if(e>2&&n>0){let s=p.children.reduce((a,h)=>a+h.height+(t.getNodeActChildrenLength(h)>0?h.expandBtnSize:0)+i,0);t.updateBrothersTop(p,-s)}},adjustLeftTopValueAfter({parent:p,node:t,ctx:e}){if(p&&p.isRoot){let i=e.getMarginY(t.layerIndex+1),n=0,s=t.expandBtnSize;t.children.forEach(a=>{let h=e.getNodeActChildrenLength(a)>0,o=e.getNodeAreaHeight(a),r=h?o-a.height-(h?a.expandBtnSize:0):0;r-=h?i:0;let c=n+r,d=a.left;a.top+=c,a.left=t.left+t.width*e.indent+(o+s)/Math.tan(G(e.mindMap.opt.fishboneDeg)),n+=r,s+=o,e.updateChildrenPro(a.children,{top:c,left:a.left-d})})}}}};class tn extends H{constructor(t={}){super(t),this.indent=.3,this.childIndent=.5}doLayout(t){P([()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{t(this.root)}])}computedBaseValue(){w(this.renderer.renderTree,null,(t,e,i,n,s,a)=>{let h=this.createNode(t,e,i,n,s,a);if(i)this.setNodeCenter(h);else if(e._node.dir?h.dir=e._node.dir:h.dir=s%2===0?M.LAYOUT_GROW_DIR.TOP:M.LAYOUT_GROW_DIR.BOTTOM,e._node.isRoot){let o=this.getMarginY(n);this.checkIsTop(h)?h.top=e._node.top-h.height-o:h.top=e._node.top+e._node.height+o}if(!t.data.expand)return!0},null,!0,0)}computedLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(t.isRoot){let a=this.getMarginX(n+1),h=t.left+t.width+t.height+a,o=t.left+t.width+t.height+a;t.children.forEach(r=>{this.checkIsTop(r)?(r.left=h,h+=r.width+a):(r.left=o+20,o+=r.width+a)})}let s={layerIndex:n,node:t,ctx:this};this.checkIsTop(t)?I.top.computedLeftTopValue(s):I.bottom.computedLeftTopValue(s)},null,!0)}adjustLeftTopValue(){w(this.root,null,(t,e,i,n)=>{if(!t.getData("expand"))return;let s={node:t,parent:e,layerIndex:n,ctx:this};this.checkIsTop(t)?I.top.adjustLeftTopValueBefore(s):I.bottom.adjustLeftTopValueBefore(s)},(t,e)=>{let i={parent:e,node:t,ctx:this};if(this.checkIsTop(t)?I.top.adjustLeftTopValueAfter(i):I.bottom.adjustLeftTopValueAfter(i),t.isRoot){let n=0,s=0;t.children.forEach(a=>{if(this.checkIsTop(a)){a.left+=n,this.updateChildren(a.children,"left",n);let{left:h,right:o}=this.getNodeBoundaries(a,"h");n+=o-h}else{a.left+=s,this.updateChildren(a.children,"left",s);let{left:h,right:o}=this.getNodeBoundaries(a,"h");s+=o-h}})}},!0)}getNodeAreaHeight(t){let e=0,i=n=>{let s=this.getMarginY(n.layerIndex);e+=n.height+(this.getNodeActChildrenLength(n)>0?n.expandBtnSize:0)+s,n.children.length&&n.children.forEach(a=>{i(a)})};return i(t),e}updateBrothersLeft(t){let e=t.children,i=0;e.forEach(n=>{n.left+=i,n.children&&n.children.length&&this.updateChildren(n.children,"left",i);let{left:s,right:a}=this.getNodeBoundaries(n,"h"),o=a-s-n.width;o>0&&(i+=o)})}updateBrothersTop(t,e){if(t.parent&&!t.parent.isRoot){let i=t.parent.children,n=L(t,i);i.forEach((s,a)=>{if(s.hasCustomPosition())return;let h=0;a>n&&(h=e),s.top+=h,s.children&&s.children.length&&this.updateChildren(s.children,"top",h)}),this.checkIsTop(t)?this.updateBrothersTop(t.parent,e):this.updateBrothersTop(t.parent,t.layerIndex===3?0:e)}}checkIsTop(t){return t.dir===M.LAYOUT_GROW_DIR.TOP}renderLine(t,e,i){if(t.layerIndex!==1&&t.children.length<=0)return[];let{top:n,height:s,expandBtnSize:a}=t;const{alwaysShowExpandBtn:h,notShowExpandBtn:o}=this.mindMap.opt;(!h||o)&&(a=0);let r=t.children.length;if(t.isRoot){let c=-1/0;t.children.forEach(l=>{l.left>c&&(c=l.left);let m=this.getMarginY(l.layerIndex),u=l.left,x=t.height/2+m,E=x/Math.tan(G(this.mindMap.opt.fishboneDeg)),N=this.lineDraw.path();this.checkIsTop(l)?N.plot(this.transformPath(`M ${u-E},${l.top+l.height+x} L ${l.left},${l.top+l.height}`)):N.plot(this.transformPath(`M ${u-E},${l.top-x} L ${u},${l.top}`)),t.style.line(N),t._lines.push(N),i&&i(N,t)});let d=t.top+t.height/2,f=t.height/2+this.getMarginY(t.layerIndex+1),g=this.lineDraw.path();g.plot(this.transformPath(`M ${t.left+t.width},${d} L ${c-f/Math.tan(G(this.mindMap.opt.fishboneDeg))},${d}`)),t.style.line(g),t._lines.push(g),i&&i(g,t)}else{let c=-1/0,d=1/0,f=-1/0,g=t.left+t.width*this.indent;if(t.children.forEach((l,m)=>{l.left>f&&(f=l.left);let u=l.top+l.height/2;if(u>c&&(c=u),u<d&&(d=u),t.layerIndex>1){let x=`M ${g},${u} L ${l.left},${u}`;this.setLineStyle(i,e[m],x,l)}}),r>=0){let l=this.lineDraw.path();a=r>0?a:0;let m=f-t.left-t.width*this.indent;m=Math.max(m,0);let u={node:t,line:l,top:n,x:g,lineLength:m,height:s,expandBtnSize:a,maxy:c,miny:d,ctx:this};this.checkIsTop(t)?I.top.renderLine(u):I.bottom.renderLine(u),t.style.line(l),t._lines.push(l),i&&i(l,t)}}}renderExpandBtn(t,e){let{width:i,height:n,expandBtnSize:s,isRoot:a}=t;if(!a){let{translateX:h,translateY:o}=e.transform(),r={node:t,btn:e,expandBtnSize:s,translateX:h,translateY:o,width:i,height:n};this.checkIsTop(t)?I.top.renderExpandBtn(r):I.bottom.renderExpandBtn(r)}}renderGeneralization(t){t.forEach(e=>{let{top:i,bottom:n,right:s,generalizationLineMargin:a,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(e,"h"),o=s+a,r=i,c=s+a,d=n,f=o+20,g=r+(d-r)/2,l=`M ${o},${r} Q ${f},${g} ${c},${d}`;e.generalizationLine.plot(this.transformPath(l)),e.generalizationNode.left=s+h,e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(t,e,i,n,s){let a="";s.dir===M.LAYOUT_GROW_DIR.TOP?a=s.layerIndex===1?M.LAYOUT_GROW_DIR.TOP:M.LAYOUT_GROW_DIR.BOTTOM:a=s.layerIndex===1?M.LAYOUT_GROW_DIR.BOTTOM:M.LAYOUT_GROW_DIR.TOP,a===M.LAYOUT_GROW_DIR.TOP?t.size(i,e).x(0).y(-e):t.size(i,e).x(0).y(n)}}class en{constructor(t){this.renderer=t,this.mindMap=t.mindMap,this.currentNode=null,this.textEditNode=null,this.showTextEdit=!1,this.cacheEditingText="",this.hasBodyMousedown=!1,this.textNodePaddingX=5,this.textNodePaddingY=3,this.isNeedUpdateTextEditNode=!1,this.bindEvent()}bindEvent(){this.show=this.show.bind(this),this.onScale=this.onScale.bind(this),this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("node_dblclick",(t,e,i)=>{this.show({node:t,e,isInserting:i})}),this.mindMap.on("draw_click",()=>{this.hideEditTextBox()}),this.mindMap.on("body_mousedown",()=>{this.hasBodyMousedown=!0}),this.mindMap.on("body_click",()=>{this.hasBodyMousedown&&(this.hasBodyMousedown=!1,this.mindMap.opt.isEndNodeTextEditOnClickOuter&&this.hideEditTextBox())}),this.mindMap.on("svg_mousedown",()=>{this.hideEditTextBox()}),this.mindMap.on("expand_btn_click",()=>{this.hideEditTextBox()}),this.mindMap.on("before_node_active",()=>{this.hideEditTextBox()}),this.mindMap.on("mousewheel",()=>{this.mindMap.opt.mousewheelAction===M.MOUSE_WHEEL_ACTION.MOVE&&this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("F2",()=>{this.renderer.activeNodeList.length<=0||this.show({node:this.renderer.activeNodeList[0]})}),this.mindMap.on("scale",this.onScale),this.mindMap.opt.enableAutoEnterTextEditWhenKeydown&&window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()}),this.mindMap.on("after_update_config",(t,e)=>{t.openRealtimeRenderOnNodeTextEdit!==e.openRealtimeRenderOnNodeTextEdit&&(this.mindMap.richText?this.mindMap.richText.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t.openRealtimeRenderOnNodeTextEdit):this.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t.openRealtimeRenderOnNodeTextEdit)),t.enableAutoEnterTextEditWhenKeydown!==e.enableAutoEnterTextEditWhenKeydown&&window[t.enableAutoEnterTextEditWhenKeydown?"addEventListener":"removeEventListener"]("keydown",this.onKeydown)}),this.mindMap.on("afterExecCommand",()=>{this.isShowTextEdit()&&(this.isNeedUpdateTextEditNode=!0)}),this.mindMap.on("node_tree_render_end",()=>{this.isShowTextEdit()&&this.isNeedUpdateTextEditNode&&(this.isNeedUpdateTextEditNode=!1,this.updateTextEditNode())})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}onKeydown(t){if(t.target!==document.body)return;const e=this.mindMap.renderer.activeNodeList;if(e.length<=0||e.length>1)return;const i=e[0];i&&this.checkIsAutoEnterTextEditKey(t)&&(t.preventDefault(),this.show({node:i,e:t,isInserting:!1,isFromKeyDown:!0}))}checkIsAutoEnterTextEditKey(t){const e=t.keyCode;return(e===229||e>=65&&e<=90||e>=48&&e<=57)&&!this.mindMap.keyCommand.hasCombinationKey(t)}registerTmpShortcut(){this.mindMap.keyCommand.addShortcut("Enter",()=>{this.hideEditTextBox()}),this.mindMap.keyCommand.addShortcut("Tab",()=>{this.hideEditTextBox()})}isShowTextEdit(){return this.mindMap.richText?this.mindMap.richText.showTextEdit:this.showTextEdit}async show({node:t,isInserting:e=!1,isFromKeyDown:i=!1,isFromScale:n=!1}){if(t.isUseCustomNodeContent())return;this.getCurrentEditNode()&&this.hideEditTextBox();const{beforeTextEdit:a,openRealtimeRenderOnNodeTextEdit:h}=this.mindMap.opt;if(typeof a=="function"){let g=!1;try{g=await a(t,e)}catch(l){g=!1,this.mindMap.opt.errorHandler(W.BEFORE_TEXT_EDIT_ERROR,l)}if(!g)return}const{offsetLeft:o,offsetTop:r}=ne(this.mindMap,t);this.mindMap.view.translateXY(o,r);const c=t._textData.node;h&&c.show();const d=c.node.getBoundingClientRect();h&&c.hide();const f={node:t,rect:d,isInserting:e,isFromKeyDown:i,isFromScale:n};if(this.mindMap.richText){this.mindMap.richText.showEditText(f);return}this.currentNode=t,this.showEditTextBox(f)}onOpenRealtimeRenderOnNodeTextEditConfigUpdate(t){this.textEditNode&&(this.textEditNode.style.background=t?"transparent":this.currentNode?this.getBackground(this.currentNode):"",this.textEditNode.style.boxShadow=t?"none":"0 0 20px rgba(0,0,0,.5)")}onScale(){const t=this.getCurrentEditNode();t&&(this.mindMap.richText?(this.mindMap.richText.cacheEditingText=this.mindMap.richText.getEditText(),this.mindMap.richText.showTextEdit=!1):(this.cacheEditingText=this.getEditText(),this.showTextEdit=!1),this.show({node:t,isFromScale:!0}))}showEditTextBox({node:t,rect:e,isInserting:i,isFromKeyDown:n,isFromScale:s}){if(this.showTextEdit)return;const{nodeTextEditZIndex:a,textAutoWrapWidth:h,selectTextOnEnterEditText:o,openRealtimeRenderOnNodeTextEdit:r,autoEmptyTextWhenKeydownEnterEdit:c}=this.mindMap.opt;s||this.mindMap.emit("before_show_text_edit"),this.registerTmpShortcut(),this.textEditNode||(this.textEditNode=document.createElement("div"),this.textEditNode.classList.add(M.EDIT_NODE_CLASS.SMM_NODE_EDIT_WRAP),this.textEditNode.style.cssText=`
        position: fixed;
        box-sizing: border-box;
        ${r?"":"box-shadow: 0 0 20px rgba(0,0,0,.5);"}
        padding: ${this.textNodePaddingY}px ${this.textNodePaddingX}px;
        margin-left: -${this.textNodePaddingX}px;
        margin-top: -${this.textNodePaddingY}px;
        outline: none; 
        word-break: break-all;
        line-break: anywhere;
      `,this.textEditNode.setAttribute("contenteditable",!0),this.textEditNode.addEventListener("keyup",u=>{u.stopPropagation()}),this.textEditNode.addEventListener("click",u=>{u.stopPropagation()}),this.textEditNode.addEventListener("mousedown",u=>{u.stopPropagation()}),this.textEditNode.addEventListener("keydown",u=>{this.checkIsAutoEnterTextEditKey(u)&&u.stopPropagation()}),this.textEditNode.addEventListener("paste",u=>{const x=u.clipboardData.getData("text"),{isSmm:E,data:N}=ht(x);E&&N[0]&&N[0].data?mt(u,se(N[0].data.text)):mt(u),this.emitTextChangeEvent()}),this.textEditNode.addEventListener("input",()=>{this.emitTextChangeEvent()}),(this.mindMap.opt.customInnerElsAppendTo||document.body).appendChild(this.textEditNode));const d=this.mindMap.view.scale,f=t.style.merge("fontSize"),g=(this.cacheEditingText||t.getData("text")).split(/\n/gim).map(m=>$t(m)),l=t._textData.node.attr("data-ismultiLine")==="true";t.style.domText(this.textEditNode,d),r||(this.textEditNode.style.background=this.getBackground(t)),this.textEditNode.style.zIndex=a,n&&c?this.textEditNode.innerHTML="":this.textEditNode.innerHTML=g.join("<br>"),this.textEditNode.style.minWidth=e.width+this.textNodePaddingX*2+"px",this.textEditNode.style.minHeight=e.height+"px",this.textEditNode.style.left=Math.floor(e.left)+"px",this.textEditNode.style.top=Math.floor(e.top)+"px",this.textEditNode.style.display="block",this.textEditNode.style.maxWidth=h*d+"px",l?(this.textEditNode.style.lineHeight=J,this.textEditNode.style.transform=`translateY(${(J-1)*f/2*d}px)`):this.textEditNode.style.lineHeight="normal",this.showTextEdit=!0,i||o&&!n?ae(this.textEditNode):he(this.textEditNode),this.cacheEditingText=""}emitTextChangeEvent(){this.mindMap.emit("node_text_edit_change",{node:this.currentNode,text:this.getEditText(),richText:!1})}updateTextEditNode(){if(this.mindMap.richText){this.mindMap.richText.updateTextEditNode();return}if(!this.showTextEdit||!this.currentNode)return;const t=this.currentNode._textData.node.node.getBoundingClientRect();this.textEditNode.style.minWidth=t.width+this.textNodePaddingX*2+"px",this.textEditNode.style.minHeight=t.height+this.textNodePaddingY*2+"px",this.textEditNode.style.left=Math.floor(t.left)+"px",this.textEditNode.style.top=Math.floor(t.top)+"px"}getBackground(t){if(t.style.merge("gradientStyle")){const i=t.style.merge("startColor"),n=t.style.merge("endColor");return`linear-gradient(to right, ${i}, ${n})`}else{const i=t.style.merge("fillColor"),n=t.style.merge("color");return i==="transparent"?oe(n)?re(this.mindMap.themeConfig):"#fff":i}}removeTextEditEl(){if(this.mindMap.richText){this.mindMap.richText.removeTextEditEl();return}if(!this.textEditNode)return;(this.mindMap.opt.customInnerElsAppendTo||document.body).removeChild(this.textEditNode)}getEditText(){return de(this.textEditNode.innerHTML)}hideEditTextBox(){if(this.mindMap.richText)return this.mindMap.richText.hideEditText();if(!this.showTextEdit)return;const t=this.currentNode,e=this.getEditText();this.currentNode=null,this.textEditNode.style.display="none",this.textEditNode.innerHTML="",this.textEditNode.style.fontFamily="inherit",this.textEditNode.style.fontSize="inherit",this.textEditNode.style.fontWeight="normal",this.textEditNode.style.transform="translateY(0)",this.showTextEdit=!1,this.mindMap.execCommand("SET_NODE_TEXT",t,e),this.mindMap.render(),this.mindMap.emit("hide_text_edit",this.textEditNode,this.renderer.activeNodeList,t)}getCurrentEditNode(){return this.mindMap.richText?this.mindMap.richText.node:this.currentNode}}const nt={[M.LAYOUT.LOGICAL_STRUCTURE]:Ft,[M.LAYOUT.LOGICAL_STRUCTURE_LEFT]:Ft,[M.LAYOUT.MIND_MAP]:Zi,[M.LAYOUT.CATALOG_ORGANIZATION]:qi,[M.LAYOUT.ORGANIZATION_STRUCTURE]:Ji,[M.LAYOUT.TIMELINE]:Bt,[M.LAYOUT.TIMELINE2]:Bt,[M.LAYOUT.VERTICAL_TIMELINE]:Qi,[M.LAYOUT.FISHBONE]:tn};class nn{constructor(t={}){this.opt=t,this.mindMap=t.mindMap,this.themeConfig=this.mindMap.themeConfig,this.renderTree=this.mindMap.opt.data?ot({},this.mindMap.opt.data):null,this.reRender=!1,this.isRendering=!1,this.hasWaitRendering=!1,this.waitRenderingParams=[],this.nodeCache={},this.lastNodeCache={},this.renderSource="",this.activeNodeList=[],this.root=null,this.textEdit=new en(this),this.beingCopyData=null,this.highlightBoxNode=null,this.highlightBoxNodeStyle=null,this.lastActiveNodeList=[],this.setLayout(),this.bindEvent(),this.registerCommands(),this.registerShortcutKeys()}setLayout(){const{layout:t}=this.mindMap.opt;this.layout=new(nt[t]?nt[t]:nt[M.LAYOUT.LOGICAL_STRUCTURE])(this,t)}setData(t){this.renderTree=t||null}bindEvent(){const{openPerformance:t,performanceConfig:e,openRealtimeRenderOnNodeTextEdit:i}=this.mindMap.opt;this.mindMap.on("draw_click",s=>{this.clearActiveNodeListOnDrawClick(s,"click")}),this.mindMap.on("contextmenu",s=>{this.clearActiveNodeListOnDrawClick(s,"contextmenu")}),this.mindMap.svg.on("dblclick",()=>{this.mindMap.opt.enableDblclickBackToRootNode&&this.setRootNodeCenter()});const n=Gt(()=>{this.root&&(this.mindMap.emit("node_tree_render_start"),this.root.render(()=>{this.mindMap.emit("node_tree_render_end")},!1,!0))},e.time);t&&this.mindMap.on("view_data_change",n),this.onNodeTextEditChange=le(this.onNodeTextEditChange,100,this),i&&this.mindMap.on("node_text_edit_change",this.onNodeTextEditChange),this.mindMap.on("after_update_config",(s,a)=>{s.openPerformance!==a.openPerformance&&(this.mindMap[s.openPerformance?"on":"off"]("view_data_change",n),this.forceLoadNode()),s.openRealtimeRenderOnNodeTextEdit!==a.openRealtimeRenderOnNodeTextEdit&&this.mindMap[s.openRealtimeRenderOnNodeTextEdit?"on":"off"]("node_text_edit_change",this.onNodeTextEditChange)})}onNodeTextEditChange({node:t,text:e}){t._textData=t.createTextNode(e);const{width:i,height:n}=t.getNodeRect();t.width=i,t.height=n,t.layout(),this.mindMap.render(()=>{this.textEdit.updateTextEditNode()})}forceLoadNode(t){t=t||this.root,t&&(this.mindMap.emit("node_tree_render_start"),t.render(()=>{this.mindMap.emit("node_tree_render_end")},!0))}registerCommands(){this.selectAll=this.selectAll.bind(this),this.mindMap.command.add("SELECT_ALL",this.selectAll),this.back=this.back.bind(this),this.mindMap.command.add("BACK",this.back),this.forward=this.forward.bind(this),this.mindMap.command.add("FORWARD",this.forward),this.insertNode=this.insertNode.bind(this),this.mindMap.command.add("INSERT_NODE",this.insertNode),this.insertMultiNode=this.insertMultiNode.bind(this),this.mindMap.command.add("INSERT_MULTI_NODE",this.insertMultiNode),this.insertChildNode=this.insertChildNode.bind(this),this.mindMap.command.add("INSERT_CHILD_NODE",this.insertChildNode),this.insertMultiChildNode=this.insertMultiChildNode.bind(this),this.mindMap.command.add("INSERT_MULTI_CHILD_NODE",this.insertMultiChildNode),this.insertParentNode=this.insertParentNode.bind(this),this.mindMap.command.add("INSERT_PARENT_NODE",this.insertParentNode),this.upNode=this.upNode.bind(this),this.mindMap.command.add("UP_NODE",this.upNode),this.downNode=this.downNode.bind(this),this.mindMap.command.add("DOWN_NODE",this.downNode),this.moveUpOneLevel=this.moveUpOneLevel.bind(this),this.mindMap.command.add("MOVE_UP_ONE_LEVEL",this.moveUpOneLevel),this.insertAfter=this.insertAfter.bind(this),this.mindMap.command.add("INSERT_AFTER",this.insertAfter),this.insertBefore=this.insertBefore.bind(this),this.mindMap.command.add("INSERT_BEFORE",this.insertBefore),this.moveNodeTo=this.moveNodeTo.bind(this),this.mindMap.command.add("MOVE_NODE_TO",this.moveNodeTo),this.removeNode=this.removeNode.bind(this),this.mindMap.command.add("REMOVE_NODE",this.removeNode),this.removeCurrentNode=this.removeCurrentNode.bind(this),this.mindMap.command.add("REMOVE_CURRENT_NODE",this.removeCurrentNode),this.pasteNode=this.pasteNode.bind(this),this.mindMap.command.add("PASTE_NODE",this.pasteNode),this.cutNode=this.cutNode.bind(this),this.mindMap.command.add("CUT_NODE",this.cutNode),this.setNodeStyle=this.setNodeStyle.bind(this),this.mindMap.command.add("SET_NODE_STYLE",this.setNodeStyle),this.setNodeStyles=this.setNodeStyles.bind(this),this.mindMap.command.add("SET_NODE_STYLES",this.setNodeStyles),this.setNodeActive=this.setNodeActive.bind(this),this.mindMap.command.add("SET_NODE_ACTIVE",this.setNodeActive),this.clearActiveNode=this.clearActiveNode.bind(this),this.mindMap.command.add("CLEAR_ACTIVE_NODE",this.clearActiveNode),this.setNodeExpand=this.setNodeExpand.bind(this),this.mindMap.command.add("SET_NODE_EXPAND",this.setNodeExpand),this.expandAllNode=this.expandAllNode.bind(this),this.mindMap.command.add("EXPAND_ALL",this.expandAllNode),this.unexpandAllNode=this.unexpandAllNode.bind(this),this.mindMap.command.add("UNEXPAND_ALL",this.unexpandAllNode),this.expandToLevel=this.expandToLevel.bind(this),this.mindMap.command.add("UNEXPAND_TO_LEVEL",this.expandToLevel),this.setNodeData=this.setNodeData.bind(this),this.mindMap.command.add("SET_NODE_DATA",this.setNodeData),this.setNodeText=this.setNodeText.bind(this),this.mindMap.command.add("SET_NODE_TEXT",this.setNodeText),this.setNodeImage=this.setNodeImage.bind(this),this.mindMap.command.add("SET_NODE_IMAGE",this.setNodeImage),this.setNodeIcon=this.setNodeIcon.bind(this),this.mindMap.command.add("SET_NODE_ICON",this.setNodeIcon),this.setNodeHyperlink=this.setNodeHyperlink.bind(this),this.mindMap.command.add("SET_NODE_HYPERLINK",this.setNodeHyperlink),this.setNodeNote=this.setNodeNote.bind(this),this.mindMap.command.add("SET_NODE_NOTE",this.setNodeNote),this.setNodeAttachment=this.setNodeAttachment.bind(this),this.mindMap.command.add("SET_NODE_ATTACHMENT",this.setNodeAttachment),this.setNodeTag=this.setNodeTag.bind(this),this.mindMap.command.add("SET_NODE_TAG",this.setNodeTag),this.insertFormula=this.insertFormula.bind(this),this.mindMap.command.add("INSERT_FORMULA",this.insertFormula),this.addGeneralization=this.addGeneralization.bind(this),this.mindMap.command.add("ADD_GENERALIZATION",this.addGeneralization),this.removeGeneralization=this.removeGeneralization.bind(this),this.mindMap.command.add("REMOVE_GENERALIZATION",this.removeGeneralization),this.setNodeCustomPosition=this.setNodeCustomPosition.bind(this),this.mindMap.command.add("SET_NODE_CUSTOM_POSITION",this.setNodeCustomPosition),this.resetLayout=this.resetLayout.bind(this),this.mindMap.command.add("RESET_LAYOUT",this.resetLayout),this.setNodeShape=this.setNodeShape.bind(this),this.mindMap.command.add("SET_NODE_SHAPE",this.setNodeShape),this.goTargetNode=this.goTargetNode.bind(this),this.mindMap.command.add("GO_TARGET_NODE",this.goTargetNode),this.removeCustomStyles=this.removeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_CUSTOM_STYLES",this.removeCustomStyles),this.removeAllNodeCustomStyles=this.removeAllNodeCustomStyles.bind(this),this.mindMap.command.add("REMOVE_ALL_NODE_CUSTOM_STYLES",this.removeAllNodeCustomStyles)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Tab",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Insert",()=>{this.mindMap.execCommand("INSERT_CHILD_NODE")}),this.mindMap.keyCommand.addShortcut("Enter",()=>{this.mindMap.execCommand("INSERT_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Tab",()=>{this.mindMap.execCommand("INSERT_PARENT_NODE")}),this.mindMap.keyCommand.addShortcut("Control+g",()=>{this.mindMap.execCommand("ADD_GENERALIZATION")}),this.toggleActiveExpand=this.toggleActiveExpand.bind(this),this.mindMap.keyCommand.addShortcut("/",this.toggleActiveExpand),this.mindMap.keyCommand.addShortcut("Del|Backspace",()=>{this.mindMap.execCommand("REMOVE_NODE")}),this.mindMap.keyCommand.addShortcut("Shift+Backspace",()=>{this.mindMap.execCommand("REMOVE_CURRENT_NODE")}),this.mindMap.on("before_show_text_edit",()=>{this.startTextEdit()}),this.mindMap.on("hide_text_edit",()=>{this.endTextEdit()}),this.mindMap.keyCommand.addShortcut("Control+a",()=>{this.mindMap.execCommand("SELECT_ALL")}),this.mindMap.keyCommand.addShortcut("Control+l",()=>{this.mindMap.execCommand("RESET_LAYOUT")}),this.mindMap.keyCommand.addShortcut("Control+Up",()=>{this.mindMap.execCommand("UP_NODE")}),this.mindMap.keyCommand.addShortcut("Control+Down",()=>{this.mindMap.execCommand("DOWN_NODE")}),this.mindMap.keyCommand.addShortcut("Control+c",()=>{this.copy()}),this.mindMap.keyCommand.addShortcut("Control+x",()=>{this.cut()}),this.mindMap.keyCommand.addShortcut("Control+v",()=>{this.paste()}),this.mindMap.keyCommand.addShortcut("Control+Enter",()=>{this.setRootNodeCenter()})}emitNodeActiveEvent(t=null,e=[...this.activeNodeList]){ce(this.lastActiveNodeList,e)||(this.lastActiveNodeList=[...e],this.mindMap.batchExecution.push("emitNodeActiveEvent",()=>{this.mindMap.emit("node_active",t,e)}))}clearActiveNodeListOnDrawClick(t,e){if(this.activeNodeList.length<=0)return;let i=!0;const{useLeftKeySelectionRightKeyDrag:n}=this.mindMap.opt;if(e==="contextmenu"?!n:n){const s=this.mindMap.event.mousedownPos;i=Math.abs(t.clientX-s.x)<=5&&Math.abs(t.clientY-s.y)<=5}i&&this.mindMap.execCommand("CLEAR_ACTIVE_NODE")}startTextEdit(){this.mindMap.keyCommand.save()}endTextEdit(){this.mindMap.keyCommand.restore()}clearCache(){this.layout.lru.clear(),this.nodeCache={},this.lastNodeCache={}}render(t=()=>{},e){if(e===M.CHANGE_THEME&&this.resetUnExpandNodeStyle(),this.isRendering){this.hasWaitRendering=!0,this.waitRenderingParams=[t,e];return}if(this.isRendering=!0,this.renderSource=e,this.lastNodeCache=this.nodeCache,this.nodeCache={},this.reRender&&this.clearActiveNodeList(),!this.renderTree){this.isRendering=!1,this.mindMap.emit("node_tree_render_end");return}this.mindMap.emit("node_tree_render_start"),this.root=null,this.layout.doLayout(i=>{Object.keys(this.lastNodeCache).forEach(n=>{this.nodeCache[n]||(this.removeNodeFromActiveList(this.lastNodeCache[n]),this.emitNodeActiveEvent(),this.lastNodeCache[n].destroy())}),this.root=i,this.root.render(()=>{if(this.isRendering=!1,t&&t(),this.hasWaitRendering){const n=this.waitRenderingParams;this.hasWaitRendering=!1,this.waitRenderingParams=[],this.render(...n)}else this.renderSource="",this.reRender&&(this.reRender=!1);this.mindMap.emit("node_tree_render_end")})}),this.emitNodeActiveEvent()}resetUnExpandNodeStyle(){this.renderTree&&w(this.renderTree,null,t=>{if(!t.data.expand)return w(t,null,e=>{e.data.needUpdate=!0}),!0})}clearActiveNode(){this.activeNodeList.length<=0||(this.clearActiveNodeList(),this.emitNodeActiveEvent(null,[]))}clearActiveNodeList(){this.activeNodeList.forEach(t=>{this.mindMap.execCommand("SET_NODE_ACTIVE",t,!1)}),this.activeNodeList=[]}addNodeToActiveList(t,e=!1){if(this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate&&t.userList.length>0)return;this.findActiveNodeIndex(t)===-1&&(e||this.mindMap.emit("before_node_active",t,this.activeNodeList),this.mindMap.execCommand("SET_NODE_ACTIVE",t,!0),this.activeNodeList.push(t))}removeNodeFromActiveList(t){let e=this.findActiveNodeIndex(t);e!==-1&&(this.mindMap.execCommand("SET_NODE_ACTIVE",t,!1),this.activeNodeList.splice(e,1))}activeMultiNode(t=[]){t.forEach(e=>{this.mindMap.emit("before_node_active",e,this.activeNodeList),this.addNodeToActiveList(e,!0),this.emitNodeActiveEvent(e)})}cancelActiveMultiNode(t=[]){t.forEach(e=>{this.removeNodeFromActiveList(e),this.emitNodeActiveEvent(null)})}findActiveNodeIndex(t){return L(t,this.activeNodeList)}selectAll(){this.mindMap.opt.readonly||(w(this.root,null,t=>{t.getData("isActive")||this.addNodeToActiveList(t),t._generalizationList&&t._generalizationList.length>0&&t._generalizationList.forEach(e=>{const i=e.generalizationNode;i.getData("isActive")||this.addNodeToActiveList(i)})},null,!0,0,0),this.emitNodeActiveEvent())}back(t){this.backForward("back",t)}forward(t){this.backForward("forward",t)}backForward(t,e){this.mindMap.execCommand("CLEAR_ACTIVE_NODE");const i=this.mindMap.command[t](e);i&&(this.renderTree=i,this.mindMap.render()),this.mindMap.emit("data_change",i)}getNewNodeBehavior(t=!1,e=!1){const{createNewNodeBehavior:i}=this.mindMap.opt;let n=!1,s=!1;switch(i){case M.CREATE_NEW_NODE_BEHAVIOR.DEFAULT:n=e||!t,s=e?!1:t;break;case M.CREATE_NEW_NODE_BEHAVIOR.NOT_ACTIVE:n=!1,s=!1;break;case M.CREATE_NEW_NODE_BEHAVIOR.ACTIVE_ONLY:n=!0,s=!1;break}return{focusNewNode:n,inserting:s}}insertNode(t=!0,e=[],i=null,n=[]){if(e=S(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:s,defaultInsertBelowSecondLevelNodeText:a}=this.mindMap.opt,h=e.length>0?e:this.activeNodeList,o=h.length>1,r=this.hasRichTextPlugin(),{focusNewNode:c,inserting:d}=this.getNewNodeBehavior(t,o),f={expand:!0,richText:r,isActive:c};r&&(f.resetRichText=!0),n=X(n,f);const g=i&&i.richText;let l=!1;h.forEach(m=>{if(m.isGeneralization||m.isRoot)return;n=R(n);const u=m.parent,E=m.layerIndex===1?s:a,N=j(m);g&&f.resetRichText&&delete f.resetRichText;const v={inserting:d,data:{text:E,...f,uid:B(),...i||{}},children:[...K(n,l)]};l=!0,u.nodeData.children.splice(N+1,0,v)}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiNode(t,e){if(!e||e.length<=0||(t=S(t),this.activeNodeList.length<=0&&t.length<=0))return;this.textEdit.hideEditTextBox();const i=t.length>0?t:this.activeNodeList,n=this.hasRichTextPlugin(),{focusNewNode:s}=this.getNewNodeBehavior(!1,!0),a={expand:!0,richText:n,isActive:s};n&&(a.resetRichText=!0),e=X(e,a);let h=!1;i.forEach(o=>{if(o.isGeneralization||o.isRoot)return;e=R(e);const r=o.parent,c=j(o),d=K(e,h);h=!0,r.nodeData.children.splice(c+1,0,...d)}),s&&this.clearActiveNodeList(),this.mindMap.render()}insertChildNode(t=!0,e=[],i=null,n=[]){if(e=S(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:s,defaultInsertBelowSecondLevelNodeText:a}=this.mindMap.opt,h=e.length>0?e:this.activeNodeList,o=h.length>1,r=this.hasRichTextPlugin(),{focusNewNode:c,inserting:d}=this.getNewNodeBehavior(t,o),f={expand:!0,richText:r,isActive:c};r&&(f.resetRichText=!0),n=X(n,f);const g=i&&i.richText;let l=!1;h.forEach(m=>{if(m.isGeneralization)return;n=R(n),m.nodeData.children||(m.nodeData.children=[]);const u=m.isRoot?s:a;g&&f.resetRichText&&delete f.resetRichText;const x={inserting:d,data:{text:u,uid:B(),...f,...i||{}},children:[...K(n,l)]};l=!0,m.nodeData.children.push(x),m.setData({expand:!0})}),c&&this.clearActiveNodeList(),this.mindMap.render()}insertMultiChildNode(t,e){if(!e||e.length<=0||(t=S(t),this.activeNodeList.length<=0&&t.length<=0))return;this.textEdit.hideEditTextBox();const i=t.length>0?t:this.activeNodeList,n=this.hasRichTextPlugin(),{focusNewNode:s}=this.getNewNodeBehavior(!1,!0),a={expand:!0,richText:n,isActive:s};n&&(a.resetRichText=!0),e=X(e,a);let h=!1;i.forEach(o=>{o.isGeneralization||(e=R(e),o.nodeData.children||(o.nodeData.children=[]),e=K(e,h),h=!0,o.nodeData.children.push(...e),o.setData({expand:!0}))}),s&&this.clearActiveNodeList(),this.mindMap.render()}insertParentNode(t=!0,e,i){if(e=S(e),this.activeNodeList.length<=0&&e.length<=0)return;this.textEdit.hideEditTextBox();const{defaultInsertSecondLevelNodeText:n,defaultInsertBelowSecondLevelNodeText:s}=this.mindMap.opt,a=e.length>0?e:this.activeNodeList,h=a.length>1,o=this.hasRichTextPlugin(),{focusNewNode:r,inserting:c}=this.getNewNodeBehavior(t,h),d={expand:!0,richText:o,isActive:r};o&&(d.resetRichText=!0);const f=i&&i.richText;a.forEach(g=>{if(g.isGeneralization||g.isRoot)return;const l=g.layerIndex===1?n:s;f&&d.resetRichText&&delete d.resetRichText;const m={inserting:c,data:{text:l,uid:B(),...d,...i||{}},children:[g.nodeData]},u=g.parent,x=j(g);u.nodeData.children.splice(x,1,m)}),r&&this.clearActiveNodeList(),this.mindMap.render()}upNode(t){if(this.activeNodeList.length<=0&&!t)return;const i=(t?[t]:this.activeNodeList)[0];if(i.isRoot)return;let n=i.parent,s=n.children,a=L(i,s);if(a===-1||a===0)return;let h=a-1;s.splice(a,1),s.splice(h,0,i),n.nodeData.children.splice(a,1),n.nodeData.children.splice(h,0,i.nodeData),this.mindMap.render()}downNode(t){if(this.activeNodeList.length<=0&&!t)return;const i=(t?[t]:this.activeNodeList)[0];if(i.isRoot)return;let n=i.parent,s=n.children,a=L(i,s);if(a===-1||a===s.length-1)return;let h=a+1;s.splice(a,1),s.splice(h,0,i),n.nodeData.children.splice(a,1),n.nodeData.children.splice(h,0,i.nodeData),this.mindMap.render()}moveUpOneLevel(t){if(t=t||this.activeNodeList[0],!t||t.isRoot||t.layerIndex<=1)return;const e=t.parent,i=e.parent,n=L(t,e.children),s=L(e,i.children);e.nodeData.children.splice(n,1),i.nodeData.children.splice(s+1,0,t.nodeData),this.mindMap.render()}_handleRemoveCustomStyles(t){let e=!1;return Object.keys(t).forEach(i=>{st(i)&&(e=!0,delete t[i])}),this.hasRichTextPlugin()&&(e=!0,t.resetRichText=!0),e}removeCustomStyles(t){if(t=t||this.activeNodeList[0],!t)return;this._handleRemoveCustomStyles(t.getData())&&this.reRenderNodeCheckChange(t)}removeAllNodeCustomStyles(t){t=S(t);let e=!1;if(t.length>0)t.forEach(i=>{this._handleRemoveCustomStyles(i.getData())&&(e=!0)});else{if(!this.renderTree)return;w(this.renderTree,null,i=>{this._handleRemoveCustomStyles(i.data)&&(e=!0);const s=yt(i.data);s.length>0&&s.forEach(a=>{this._handleRemoveCustomStyles(a)&&(e=!0)})})}e&&this.mindMap.reRender()}copy(){this.beingCopyData=this.copyNode(),this.beingCopyData&&(this.mindMap.opt.disabledClipboard||xt(Mt(this.beingCopyData)))}cut(){this.mindMap.execCommand("CUT_NODE",t=>{this.beingCopyData=t,this.mindMap.opt.disabledClipboard||xt(Mt(t))})}handlePaste(t){const{disabledClipboard:e}=this.mindMap.opt;if(e)return;const i=t.clipboardData||t.originalEvent.clipboardData,n=i.items;Array.from(n).forEach(s=>{s.type.indexOf("image")>-1&&s.getAsFile(),s.type.indexOf("text")>-1&&i.getData("text")}),this.paste()}async paste(){const{errorHandler:t,handleIsSplitByWrapOnPasteCreateNewNode:e,handleNodePasteImg:i,disabledClipboard:n,onlyPasteTextWhenHasImgAndText:s}=this.mindMap.opt;if(!n&&pe())try{const a=await fe();let h=a.text||"",o=a.img||null;if(h){let r=null,c=!0;if(this.mindMap.opt.customHandleClipboardText)try{const d=await this.mindMap.opt.customHandleClipboardText(h);if(!U(d)){c=!1;const f=ht(d);f.isSmm?r=f.data:h=f.data}}catch(d){t(W.CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR,d)}if(c){const d=ht(h);d.isSmm?r=d.data:h=d.data}if(r)this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],Array.isArray(r)?r:[r]);else{this.hasRichTextPlugin()&&(h=$t(h));const d=h.split(new RegExp(`\r?
|(?<!
)\r`,"g")).filter(f=>!!f);d.length>1&&e?e().then(()=>{this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],d.map(f=>({data:{text:f},children:[]})))}).catch(()=>{this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:h})}):this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{text:h})}}if(o&&(!h||!s))try{let r=null;i&&typeof i=="function"?r=await i(o):r=await ue(o),this.activeNodeList.length>0&&this.activeNodeList.forEach(c=>{this.mindMap.execCommand("SET_NODE_IMAGE",c,{url:r.url,title:"",width:r.size.width,height:r.size.height})})}catch(r){t(W.LOAD_CLIPBOARD_IMAGE_ERROR,r)}}catch(a){t(W.READ_CLIPBOARD_ERROR,a)}else this.beingCopyData&&this.mindMap.execCommand("PASTE_NODE",this.beingCopyData)}insertBefore(t,e){this.insertTo(t,e,"before")}insertAfter(t,e){this.insertTo(t,e,"after")}insertTo(t,e,i="before"){let n=S(t);n=n.filter(s=>!s.isRoot),i==="after"&&n.reverse(),n.forEach(s=>{let a=s.parent,h=a.children,o=L(s,h);if(o===-1)return;h.splice(o,1),a.nodeData.children.splice(o,1);let r=e.parent,c=r.children,d=L(e,c);d!==-1&&(i==="after"&&d++,c.splice(d,0,s),r.nodeData.children.splice(d,0,s.nodeData))}),this.mindMap.render()}removeNode(t=[]){if(t=S(t),this.activeNodeList.length<=0&&t.length<=0)return;let e=null,i=t.length>0,n=i?t:this.activeNodeList,s=n.find(a=>a.isRoot);if(s)this.clearActiveNodeList(),s.children=[],s.nodeData.children=[];else{e=this.getNextActiveNode(n);for(let a=0;a<n.length;a++){const h=n[a],o=this.textEdit.getCurrentEditNode();o&&o.getData("uid")===h.getData("uid")&&this.textEdit.hideEditTextBox(),i&&n.splice(a,1),h.isGeneralization?(this.deleteNodeGeneralization(h),this.removeNodeFromActiveList(h),a--):(this.removeNodeFromActiveList(h),it(h),a--)}}this.activeNodeList=[],e&&this.addNodeToActiveList(e),this.emitNodeActiveEvent(),this.mindMap.render()}deleteNodeGeneralization(t){const e=t.generalizationBelongNode,i=e.getGeneralizationNodeIndex(t);let n=e.getData("generalization");Array.isArray(n)?n.splice(i,1):n=null,this.mindMap.execCommand("SET_NODE_DATA",e,{generalization:n}),this.closeHighlightNode()}removeCurrentNode(t=[]){if(t=S(t),this.activeNodeList.length<=0&&t.length<=0)return;let i=t.length>0?t:this.activeNodeList;i=i.filter(s=>!s.isRoot);let n=this.getNextActiveNode(i);for(let s=0;s<i.length;s++){let a=i[s];if(a.isGeneralization)this.deleteNodeGeneralization(a);else{const h=a.parent,o=j(a);h.nodeData.children.splice(o,1,...a.nodeData.children||[])}}this.activeNodeList=[],n&&this.addNodeToActiveList(n),this.emitNodeActiveEvent(),this.mindMap.render()}getNextActiveNode(t){if(t.length!==1||this.findActiveNodeIndex(t[0])===-1)return null;let e=null;if(this.activeNodeList.length===1&&!this.activeNodeList[0].isGeneralization&&this.mindMap.opt.deleteNodeActive){const i=this.activeNodeList[0],n=i.parent.children,s=L(i,n);s<n.length-1?e=n[s+1]:s>0?e=n[s-1]:e=i.parent}return e}copyNode(){if(this.activeNodeList.length<=0)return null;let t=Et(this.activeNodeList);return t=Nt(t),t.map(e=>at({},e,!0))}cutNode(t){if(this.activeNodeList.length<=0)return;let e=Et(this.activeNodeList).filter(n=>!n.isRoot);e=Nt(e);const i=e.map(n=>at({},n,!0));e.forEach(n=>{it(n)}),this.clearActiveNodeList(),this.mindMap.render(),t&&typeof t=="function"&&t(i)}moveNodeTo(t,e){let i=S(t);i=i.filter(n=>!n.isRoot),i.forEach(n=>{this.removeNodeFromActiveList(n),it(n),e.setData({expand:!0}),e.nodeData.children.push(n.nodeData)}),this.emitNodeActiveEvent(),this.mindMap.render()}pasteNode(t){t=S(t),this.mindMap.execCommand("INSERT_MULTI_CHILD_NODE",[],t)}setNodeStyle(t,e,i){const n={[e]:i};this.setNodeDataRender(t,n),vt.includes(e)&&(t.parent||t).renderLine(!0)}setNodeStyles(t,e){const i={...e};this.setNodeDataRender(t,i);let n=Object.keys(e),s=!1;n.forEach(a=>{vt.includes(a)&&(s=!0)}),s&&(t.parent||t).renderLine(!0)}setNodeActive(t,e){this.mindMap.execCommand("SET_NODE_DATA",t,{isActive:e}),t.updateNodeByActive(e)}setNodeExpand(t,e){this.mindMap.execCommand("SET_NODE_DATA",t,{expand:e}),this.mindMap.render()}expandAllNode(t=""){if(!this.renderTree)return;const e=(i,n)=>{!n&&i.data.uid===t&&(n=!0),n&&!i.data.expand&&(i.data.expand=!0),i.children&&i.children.length>0&&i.children.forEach(s=>{e(s,n)})};e(this.renderTree,!t),this.mindMap.render()}unexpandAllNode(t=!0,e=""){if(!this.renderTree)return;const i=(n,s,a)=>{!a&&n.data.uid===e&&(a=!0),a&&!s&&n.children&&n.children.length>0&&(n.data.expand=!1),n.children&&n.children.length>0&&n.children.forEach(h=>{i(h,!1,a)})};i(this.renderTree,!0,!e),this.mindMap.render(()=>{t&&this.setRootNodeCenter()})}expandToLevel(t){this.renderTree&&(w(this.renderTree,null,(e,i,n,s)=>{s<t?e.data.expand=!0:!n&&e.children&&e.children.length>0&&(e.data.expand=!1)},null,!0,0,0),this.mindMap.render())}toggleActiveExpand(){this.activeNodeList.forEach(t=>{t.nodeData.children.length<=0||t.isRoot||this.toggleNodeExpand(t)})}toggleNodeExpand(t){this.mindMap.execCommand("SET_NODE_EXPAND",t,!t.getData("expand"))}setNodeText(t,e,i,n){i=i===void 0?t.getData("richText"):i,this.setNodeDataRender(t,{text:e,richText:i,resetRichText:n})}setNodeImage(t,e){const{url:i,title:n,width:s,height:a,custom:h=!1}=e||{url:"",title:"",width:0,height:0,custom:!1};this.setNodeDataRender(t,{image:i,imageTitle:n||"",imageSize:{width:s,height:a,custom:h}})}setNodeIcon(t,e){this.setNodeDataRender(t,{icon:e})}setNodeHyperlink(t,e,i=""){this.setNodeDataRender(t,{hyperlink:e,hyperlinkTitle:i})}setNodeNote(t,e){this.setNodeDataRender(t,{note:e})}setNodeAttachment(t,e,i=""){this.setNodeDataRender(t,{attachmentUrl:e,attachmentName:i})}setNodeTag(t,e){this.setNodeDataRender(t,{tag:e})}insertFormula(t,e=[]){if(!this.hasRichTextPlugin()||!this.mindMap.formula)return;e=S(e),(e.length>0?e:this.activeNodeList).forEach(n=>{this.mindMap.formula.insertFormulaToNode(n,t)})}addGeneralization(t,e=!0){if(this.activeNodeList.length<=0)return;const i=this.activeNodeList.filter(c=>!c.isRoot&&!c.isGeneralization&&!c.checkHasSelfGeneralization()),n=ge(i);if(n.length<=0)return;const s=this.hasRichTextPlugin(),{focusNewNode:a,inserting:h}=this.getNewNodeBehavior(e,n.length>1);let o=!1;const r=t&&t.richText;n.forEach(c=>{const d={inserting:h,...t||{text:this.mindMap.opt.defaultGeneralizationText},range:c.range||null,uid:B(),richText:s,isActive:a};s&&!r&&(d.resetRichText=s);let f=c.node.getData("generalization");if(f=f?Array.isArray(f)?f:[f]:[],c.range){if(!!f.find(l=>l.range&&l.range[0]===c.range[0]&&l.range[1]===c.range[1]))return;f.push(d)}else f.push(d);o=!0,this.mindMap.execCommand("SET_NODE_DATA",c.node,{generalization:f}),c.node.setData({expand:!0})}),o&&(a&&this.clearActiveNodeList(),this.mindMap.render(()=>{this.mindMap.render()}))}removeGeneralization(){this.activeNodeList.length<=0||(this.activeNodeList.forEach(t=>{t.checkHasGeneralization()&&this.mindMap.execCommand("SET_NODE_DATA",t,{generalization:null})}),this.mindMap.render(),this.closeHighlightNode())}setNodeCustomPosition(t,e=void 0,i=void 0){[t].forEach(s=>{this.mindMap.execCommand("SET_NODE_DATA",s,{customLeft:e,customTop:i})})}resetLayout(){w(this.root,null,t=>{t.customLeft=void 0,t.customTop=void 0,this.mindMap.execCommand("SET_NODE_DATA",t,{customLeft:void 0,customTop:void 0}),this.mindMap.render()},null,!0,0,0)}setNodeShape(t,e){if(!e||!Ae.includes(e))return;[t].forEach(n=>{this.setNodeStyle(n,"shape",e)})}goTargetNode(t,e=()=>{}){let i=typeof t=="string"?t:t.getData("uid");i&&this.expandToNodeUid(i,()=>{let n=this.findNodeByUid(i);n&&(n.active(),this.moveNodeToCenter(n),e(n))})}setNodeData(t,e){Object.keys(e).forEach(i=>{t.nodeData.data[i]=e[i]})}setNodeDataRender(t,e,i=!1){if(this.mindMap.execCommand("SET_NODE_DATA",t,e),me(e)){this.mindMap.emit("node_tree_render_end");return}this.reRenderNodeCheckChange(t,i)}reRenderNodeCheckChange(t,e){t.reRender()?e||this.mindMap.render():this.mindMap.emit("node_tree_render_end")}moveNodeToCenter(t,e){let{resetScaleOnMoveNodeToCenter:i}=this.mindMap.opt;e!==void 0&&(i=e);let{transform:n,state:s}=this.mindMap.view.getTransformData(),{left:a,top:h,width:o,height:r}=t;i||(a*=n.scaleX,h*=n.scaleY,o*=n.scaleX,r*=n.scaleY);let c=this.mindMap.width/2,d=this.mindMap.height/2,f=a+o/2,g=h+r/2,l=c-s.x,m=d-s.y,u=l-f,x=m-g;this.mindMap.view.translateX(u),this.mindMap.view.translateY(x),i&&this.mindMap.view.setScale(1)}setRootNodeCenter(){this.moveNodeToCenter(this.root)}expandToNodeUid(t,e=()=>{}){if(!this.renderTree){e();return}let i=[],n=!1;const s={};xe(this.renderTree,(h,o)=>{if(h.data.uid===t)return i=o?[...s[o.data.uid],o]:[],"stop";if(yt(h.data).forEach(c=>{c.uid===t&&(i=o?[...s[o.data.uid],o,h]:[],n=!0)}),n)return"stop";s[h.data.uid]=o?[...s[o.data.uid],o]:[]});let a=!1;if(i.forEach(h=>{h.data.expand||(a=!0,h.data.expand=!0)}),n){const h=i[i.length-1];h&&w(h,null,o=>{o.data.expand||(a=!0,o.data.expand=!0)})}a?this.mindMap.render(e):e()}findNodeByUid(t){if(!this.root)return;let e=null;return w(this.root,null,i=>{if(i.getData("uid")===t)return e=i,!0;let n=!1;if((i._generalizationList||[]).forEach(s=>{s.generalizationNode.getData("uid")===t&&(e=s.generalizationNode,n=!0)}),n)return!0}),e}highlightNode(t,e,i){if(this.isRendering)return;i={stroke:"rgb(94, 200, 248)",fill:"transparent",...i||{}},this.highlightBoxNode?this.highlightBoxNodeStyle&&(this.highlightBoxNodeStyle.stroke!==i.stroke||this.highlightBoxNodeStyle.fill!==i.fill)&&this.highlightBoxNode.stroke({color:i.stroke||"transparent"}).fill({color:i.fill||"transparent"}):this.highlightBoxNode=new kt().stroke({color:i.stroke||"transparent"}).fill({color:i.fill||"transparent"}),this.highlightBoxNodeStyle={...i};let n=1/0,s=1/0,a=-1/0,h=-1/0;e?t.children.slice(e[0],e[1]+1).forEach(r=>{r.left<n&&(n=r.left),r.top<s&&(s=r.top);const c=r.left+r.width,d=r.top+r.height;c>a&&(a=c),d>h&&(h=d)}):(n=t.left,s=t.top,a=t.left+t.width,h=t.top+t.height),this.highlightBoxNode.plot([[n,s],[a,s],[a,h],[n,h]]),this.mindMap.otherDraw.add(this.highlightBoxNode)}closeHighlightNode(){this.highlightBoxNode&&this.highlightBoxNode.remove()}hasRichTextPlugin(){return!!this.mindMap.richText}}const b={default:Wt},dt={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(let p=0;p<=9;p++)dt[p]=p+48;"abcdefghijklmnopqrstuvwxyz".split("").forEach((p,t)=>{dt[p]=t+65});const F=dt;class sn{constructor(t){this.opt=t,this.mindMap=t.mindMap,this.shortcutMap={},this.shortcutMapCache={},this.isPause=!1,this.isInSvg=!1,this.bindEvent()}extendKeyMap(t,e){F[t]=e}removeKeyMap(t){typeof F[t]<"u"&&delete F[t]}pause(){this.isPause=!0}recovery(){this.isPause=!1}save(){Object.keys(this.shortcutMapCache).length>0||(this.shortcutMapCache=this.shortcutMap,this.shortcutMap={})}restore(){Object.keys(this.shortcutMapCache).length<=0||(this.shortcutMap=this.shortcutMapCache,this.shortcutMapCache={})}bindEvent(){this.onKeydown=this.onKeydown.bind(this),this.mindMap.on("svg_mouseenter",()=>{this.isInSvg=!0}),this.mindMap.on("svg_mouseleave",()=>{this.mindMap.renderer.textEdit.isShowTextEdit()||this.mindMap.associativeLine&&this.mindMap.associativeLine.showTextEdit||(this.isInSvg=!1)}),window.addEventListener("keydown",this.onKeydown),this.mindMap.on("beforeDestroy",()=>{this.unBindEvent()})}unBindEvent(){window.removeEventListener("keydown",this.onKeydown)}defaultEnableCheck(t){const e=t.target;return e===document.body||e.classList.contains(M.EDIT_NODE_CLASS.SMM_NODE_EDIT_WRAP)||e.classList.contains(M.EDIT_NODE_CLASS.RICH_TEXT_EDIT_WRAP)||e.classList.contains(M.EDIT_NODE_CLASS.ASSOCIATIVE_LINE_TEXT_EDIT_WRAP)}onKeydown(t){const{enableShortcutOnlyWhenMouseInSvg:e,beforeShortcutRun:i,customCheckEnableShortcut:n}=this.mindMap.opt;(typeof n=="function"?n:this.defaultEnableCheck)(t)&&(this.isPause||e&&!this.isInSvg||Object.keys(this.shortcutMap).forEach(a=>{if(this.checkKey(t,a)){if(this.checkKey(t,"Control+v")||(t.stopPropagation(),t.preventDefault()),typeof i=="function"&&i(a,[...this.mindMap.renderer.activeNodeList]))return;this.shortcutMap[a].forEach(h=>{h()})}}))}checkKey(t,e){let i=this.getOriginEventCodeArr(t),n=this.getKeyCodeArr(e);if(i.length!==n.length)return!1;for(let s=0;s<i.length;s++){let a=n.findIndex(h=>h===i[s]);if(a===-1)return!1;n.splice(a,1)}return!0}getOriginEventCodeArr(t){let e=[];return(t.ctrlKey||t.metaKey)&&e.push(F.Control),t.altKey&&e.push(F.Alt),t.shiftKey&&e.push(F.Shift),e.includes(t.keyCode)||e.push(t.keyCode),e}hasCombinationKey(t){return t.ctrlKey||t.metaKey||t.altKey||t.shiftKey}getKeyCodeArr(t){let e=t.split(/\s*\+\s*/),i=[];return e.forEach(n=>{i.push(F[n])}),i}addShortcut(t,e){t.split(/\s*\|\s*/).forEach(i=>{this.shortcutMap[i]?this.shortcutMap[i].push(e):this.shortcutMap[i]=[e]})}removeShortcut(t,e){t.split(/\s*\|\s*/).forEach(i=>{if(this.shortcutMap[i])if(e){let n=this.shortcutMap[i].findIndex(s=>s===e);n!==-1&&this.shortcutMap[i].splice(n,1)}else this.shortcutMap[i]=[],delete this.shortcutMap[i]})}getShortcutFn(t){let e=[];return t.split(/\s*\|\s*/).forEach(i=>{e=this.shortcutMap[i]||[]}),e}}const an="simple-mind-map",hn="0.13.0",on="一个简单的web在线思维导图",rn=[{name:"街角小林",email:"1013335014@qq.com"},{name:"理想青年实验室",url:"http://lxqnsys.com/"}],dn="./types/index.d.ts",ln="./types/index.d.ts",cn="MIT",pn={type:"git",url:"https://github.com/wanglin2/mind-map"},fn={lint:"eslint src/",format:"prettier --write .",types:"npx -p typescript tsc index.js --declaration --allowJs --emitDeclarationOnly --outDir types --target es2017 --skipLibCheck & node ./bin/createPluginsTypeFiles.js",wsServe:"node ./bin/wsServer.mjs"},un="index.js",gn="./dist/simpleMindMap.umd.min.js",mn={"@svgdotjs/svg.js":"3.2.0",deepmerge:"^1.5.2",eventemitter3:"^4.0.7",jszip:"^3.10.1",katex:"^0.16.8","mdast-util-from-markdown":"^1.3.0","pdf-lib":"^1.17.1",quill:"^2.0.3",tern:"^0.24.3",uuid:"^9.0.0",ws:"^7.5.9","xml-js":"^1.6.11","y-webrtc":"^10.2.5",yjs:"^13.6.8"},xn=["javascript","svg","mind-map","mindMap","MindMap"],Mn={eslint:"^8.25.0",prettier:"^2.7.1"},En={name:an,version:hn,description:on,authors:rn,types:dn,typings:ln,license:cn,repository:pn,scripts:fn,module:un,main:gn,dependencies:mn,keywords:xn,devDependencies:Mn};class Nn{constructor(t={}){this.opt=t,this.mindMap=t.mindMap,this.commands={},this.history=[],this.activeHistoryIndex=0,this.registerShortcutKeys(),this.originAddHistory=this.addHistory.bind(this),this.addHistory=Gt(this.addHistory,this.mindMap.opt.addHistoryTime,this),this.isPause=!1}pause(){this.isPause=!0}recovery(){this.isPause=!1}clearHistory(){this.history=[],this.activeHistoryIndex=0,this.mindMap.emit("back_forward",0,0)}registerShortcutKeys(){this.mindMap.keyCommand.addShortcut("Control+z",()=>{this.mindMap.execCommand("BACK")}),this.mindMap.keyCommand.addShortcut("Control+y",()=>{this.mindMap.execCommand("FORWARD")})}exec(t,...e){if(this.commands[t]){if(this.commands[t].forEach(i=>{i(...e)}),this.mindMap.emit("afterExecCommand",t,...e),["BACK","FORWARD","SET_NODE_ACTIVE","CLEAR_ACTIVE_NODE"].includes(t))return;this.addHistory()}}add(t,e){this.commands[t]?this.commands[t].push(e):this.commands[t]=[e]}remove(t,e){if(this.commands[t])if(!e)this.commands[t]=[],delete this.commands[t];else{let i=this.commands[t].find(n=>n===e);i!==-1&&this.commands[t].splice(i,1)}}addHistory(){if(this.mindMap.opt.readonly||this.isPause)return;const t=this.history.length>0?this.history[this.activeHistoryIndex]:null,e=this.getCopyData();t!==e&&(t&&JSON.stringify(t)===JSON.stringify(e)||(this.emitDataUpdatesEvent(t,e),this.history=this.history.slice(0,this.activeHistoryIndex+1),this.history.push(R(e)),this.history.length>this.mindMap.opt.maxHistoryCount&&this.history.shift(),this.activeHistoryIndex=this.history.length-1,this.mindMap.emit("data_change",e),this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length)))}back(t=1){if(!this.mindMap.opt.readonly&&this.activeHistoryIndex-t>=0){const e=this.history[this.activeHistoryIndex];this.activeHistoryIndex-=t,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const i=R(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(e,i),i}}forward(t=1){if(this.mindMap.opt.readonly)return;let e=this.history.length;if(this.activeHistoryIndex+t<=e-1){const i=this.history[this.activeHistoryIndex];this.activeHistoryIndex+=t,this.mindMap.emit("back_forward",this.activeHistoryIndex,this.history.length);const n=R(this.history[this.activeHistoryIndex]);return this.emitDataUpdatesEvent(i,n),n}}getCopyData(){if(!this.mindMap.renderer.renderTree)return null;const t=Me({},this.mindMap.renderer.renderTree,!0);return t.smmVersion=En.version,t}removeDataUid(t){t=R(t);let e=i=>{delete i.data.uid,i.children&&i.children.length>0&&i.children.forEach(n=>{e(n)})};return e(t),t}emitDataUpdatesEvent(t,e){try{const i="data_change_detail";if(this.mindMap.event.listenerCount(i)>0&&t&&e){const s=R(wt(t)),a=R(wt(e)),h=[],o=(r,c)=>(r.children&&r.children.length>0&&r.children.forEach((d,f)=>{r.children[f]=typeof d=="string"?c[d]:c[d.data.uid],o(r.children[f],c)}),r);Object.keys(a).forEach(r=>{s[r]?Ee(s[r],a[r])||h.push({action:"update",oldData:o(s[r],s),data:o(a[r],a)}):h.push({action:"create",data:o(a[r],a)})}),Object.keys(s).forEach(r=>{a[r]||h.push({action:"delete",data:o(s[r],s)})}),this.mindMap.emit(i,h)}}catch(i){this.mindMap.opt.errorHandler(W.DATA_CHANGE_DETAIL_EVENT_ERROR,i)}}}class vn{constructor(){this.has={},this.queue=[],this.nextTick=Ne(this.flush,this)}push(t,e){if(this.has[t]){this.replaceTask(t,e);return}this.has[t]=!0,this.queue.push({name:t,fn:e}),this.nextTick()}replaceTask(t,e){const i=this.queue.findIndex(n=>n.name===t);i!==-1&&(this.queue[i]={name:t,fn:e})}flush(){let t=this.queue.slice(0);this.queue=[],t.forEach(({name:e,fn:i})=>{this.has[e]=!1,i()})}}const bt={el:null,data:null,viewData:null,readonly:!1,layout:M.LAYOUT.LOGICAL_STRUCTURE,fishboneDeg:45,theme:"default",themeConfig:{},scaleRatio:.2,translateRatio:1,minZoomRatio:20,maxZoomRatio:400,customCheckIsTouchPad:null,mouseScaleCenterUseMousePosition:!0,maxTag:5,tagPosition:M.TAG_POSITION.RIGHT,expandBtnSize:20,imgTextMargin:5,textContentMargin:2,customNoteContentShow:null,textAutoWrapWidth:500,customHandleMousewheel:null,mousewheelAction:M.MOUSE_WHEEL_ACTION.MOVE,mousewheelMoveStep:100,mousewheelZoomActionReverse:!0,defaultInsertSecondLevelNodeText:"二级节点",defaultInsertBelowSecondLevelNodeText:"分支主题",expandBtnStyle:{color:"#808080",fill:"#fff",fontSize:13,strokeColor:"#333333"},expandBtnIcon:{open:"",close:""},expandBtnNumHandler:null,isShowExpandNum:!0,enableShortcutOnlyWhenMouseInSvg:!0,customCheckEnableShortcut:null,initRootNodePosition:null,nodeTextEditZIndex:3e3,nodeNoteTooltipZIndex:3e3,isEndNodeTextEditOnClickOuter:!0,maxHistoryCount:500,alwaysShowExpandBtn:!1,notShowExpandBtn:!1,iconList:[],maxNodeCacheCount:1e3,fitPadding:50,enableCtrlKeyNodeSelection:!0,useLeftKeySelectionRightKeyDrag:!1,beforeTextEdit:null,isUseCustomNodeContent:!1,customCreateNodeContent:null,customInnerElsAppendTo:null,enableAutoEnterTextEditWhenKeydown:!1,autoEmptyTextWhenKeydownEnterEdit:!1,customHandleClipboardText:null,disableMouseWheelZoom:!1,errorHandler:(p,t)=>{console.error(p,t)},enableDblclickBackToRootNode:!1,hoverRectColor:"rgb(94, 200, 248)",hoverRectPadding:2,selectTextOnEnterEditText:!1,deleteNodeActive:!0,fit:!1,tagsColorMap:{},cooperateStyle:{avatarSize:22,fontSize:12},onlyOneEnableActiveNodeOnCooperate:!1,defaultGeneralizationText:"概要",handleIsSplitByWrapOnPasteCreateNewNode:null,addHistoryTime:100,isDisableDrag:!1,createNewNodeBehavior:M.CREATE_NEW_NODE_BEHAVIOR.DEFAULT,defaultNodeImage:"",isLimitMindMapInCanvas:!1,handleNodePasteImg:null,customCreateNodePath:null,customCreateNodePolygon:null,customTransformNodeLinePath:null,beforeShortcutRun:null,resetScaleOnMoveNodeToCenter:!1,createNodePrefixContent:null,createNodePostfixContent:null,disabledClipboard:!1,customHyperlinkJump:null,openPerformance:!1,performanceConfig:{time:250,padding:100,removeNodeWhenOutCanvas:!0},emptyTextMeasureHeightText:"abc123我和你",openRealtimeRenderOnNodeTextEdit:!1,mousedownEventPreventDefault:!1,onlyPasteTextWhenHasImgAndText:!0,enableDragModifyNodeWidth:!0,minNodeTextModifyWidth:20,maxNodeTextModifyWidth:-1,customHandleLine:null,addHistoryOnInit:!0,noteIcon:{icon:"",style:{}},hyperlinkIcon:{icon:"",style:{}},attachmentIcon:{icon:"",style:{}},selectTranslateStep:3,selectTranslateLimit:20,enableFreeDrag:!1,autoMoveWhenMouseInEdgeOnDrag:!0,dragMultiNodeRectConfig:{width:40,height:20,fill:"rgb(94, 200, 248)"},dragPlaceholderRectFill:"rgb(94, 200, 248)",dragPlaceholderLineConfig:{color:"rgb(94, 200, 248)",width:2},dragOpacityConfig:{cloneNodeOpacity:.5,beingDragNodeOpacity:.3},handleDragCloneNode:null,beforeDragEnd:null,beforeDragStart:null,watermarkConfig:{onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"#999",opacity:.5,fontSize:14},belowNode:!1},exportPaddingX:10,exportPaddingY:10,resetCss:`
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
  `,minExportImgCanvasScale:2,addContentToHeader:null,addContentToFooter:null,handleBeingExportSvg:null,maxCanvasSize:16384,defaultAssociativeLineText:"关联",associativeLineIsAlwaysAboveNode:!0,associativeLineInitPointsPosition:{from:"",to:""},enableAdjustAssociativeLinePoints:!0,beforeAssociativeLineConnection:null,disableTouchZoom:!1,minTouchZoomScale:20,maxTouchZoomScale:-1,isLimitMindMapInCanvasWhenHasScrollbar:!0,isOnlySearchCurrentRenderNodes:!1,beforeCooperateUpdate:null,rainbowLinesConfig:{open:!1,colorsList:[]},demonstrateConfig:null,enableEditFormulaInRichTextEdit:!0,katexFontPath:"https://unpkg.com/katex@0.16.11/dist/",getKatexOutputType:null,transformRichTextOnEnterEdit:null,beforeHideRichTextEdit:null,outerFramePaddingX:10,outerFramePaddingY:10,onlyPainterNodeCustomStyles:!1,beforeDeleteNodeImg:null,imgResizeBtnSize:25,minImgResizeWidth:50,minImgResizeHeight:50,maxImgResizeWidthInheritTheme:!1,maxImgResizeWidth:1/0,maxImgResizeHeight:1/0};class C{constructor(t={}){if(C.instanceCount++,this.opt=this.handleOpt(ot(bt,t)),this.opt.data=this.handleData(this.opt.data),this.el=this.opt.el,!this.el)throw new Error("缺少容器元素el");this.getElRectInfo(),this.initWidth=this.width,this.initHeight=this.height,this.cssEl=null,this.cssTextMap={},this.nodeInnerPrefixList=[],this.initContainer(),this.initTheme(),this.initCache(),this.event=new Re({mindMap:this}),this.keyCommand=new sn({mindMap:this}),this.command=new Nn({mindMap:this}),this.renderer=new nn({mindMap:this}),this.view=new Te({mindMap:this}),this.batchExecution=new vn,C.pluginList.forEach(e=>{this.initPlugin(e)}),this.addCss(),this.render(this.opt.fit?()=>this.view.fit():()=>{}),this.opt.addHistoryOnInit&&this.opt.data&&this.command.addHistory()}handleOpt(t){return _t.includes(t.layout)||(t.layout=M.LAYOUT.LOGICAL_STRUCTURE),t.theme=t.theme&&b[t.theme]?t.theme:"default",t}handleData(t){return U(t)||Object.keys(t).length<=0?null:(t=R(t||{}),t.data&&!t.data.expand&&(t.data.expand=!0),t)}initContainer(){const{associativeLineIsAlwaysAboveNode:t}=this.opt;this.el.classList.add("smm-mind-map-container");const e=()=>{this.associativeLineDraw=this.draw.group(),this.associativeLineDraw.addClass("smm-associative-line-container")};this.svg=D().addTo(this.el).size(this.width,this.height),this.draw=this.svg.group(),this.draw.addClass("smm-container"),this.lineDraw=this.draw.group(),this.lineDraw.addClass("smm-line-container"),t||e(),this.nodeDraw=this.draw.group(),this.nodeDraw.addClass("smm-node-container"),t&&e(),this.otherDraw=this.draw.group(),this.otherDraw.addClass("smm-other-container")}clearDraw(){this.lineDraw.clear(),this.associativeLineDraw.clear(),this.nodeDraw.clear(),this.otherDraw.clear()}appendCss(t,e){this.cssTextMap[t]=e,this.removeCss(),this.addCss()}removeAppendCss(t){this.cssTextMap[t]&&(delete this.cssTextMap[t],this.removeCss(),this.addCss())}joinCss(){return ve+Object.keys(this.cssTextMap).map(t=>this.cssTextMap[t]).join(`
`)}addCss(){this.cssEl=document.createElement("style"),this.cssEl.type="text/css",this.cssEl.innerHTML=this.joinCss(),document.head.appendChild(this.cssEl)}removeCss(){this.cssEl&&document.head.removeChild(this.cssEl)}render(t,e=""){this.batchExecution.push("render",()=>{this.initTheme(),this.renderer.render(t,e)})}reRender(t,e=""){this.renderer.reRender=!0,this.renderer.clearCache(),this.clearDraw(),this.render(t,e)}getElRectInfo(){if(this.elRect=this.el.getBoundingClientRect(),this.width=this.elRect.width,this.height=this.elRect.height,this.width<=0||this.height<=0)throw new Error("容器元素el的宽高不能为0")}resize(){const t=this.width,e=this.height;this.getElRectInfo(),this.svg.size(this.width,this.height),(t!==this.width||e!==this.height)&&(this.demonstrate?this.demonstrate.isInDemonstrate||this.render():this.render()),this.emit("resize")}on(t,e){this.event.on(t,e)}emit(t,...e){this.event.emit(t,...e)}off(t,e){this.event.off(t,e)}initCache(){this.commonCaches={measureCustomNodeContentSizeEl:null,measureRichtextNodeTextSizeEl:null}}initTheme(){this.themeConfig=Ut(b[this.opt.theme]||b.default,this.opt.themeConfig),A.setBackgroundStyle(this.el,this.themeConfig)}setTheme(t,e=!1){this.execCommand("CLEAR_ACTIVE_NODE"),this.opt.theme=t,e||this.render(null,M.CHANGE_THEME),this.emit("view_theme_change",t)}getTheme(){return this.opt.theme}setThemeConfig(t,e=!1){const i=ye(this.themeConfig,t);if(this.opt.themeConfig=t,!e){const n=we(i);this.render(null,n?"":M.CHANGE_THEME)}}getCustomThemeConfig(){return this.opt.themeConfig}getThemeConfig(t){return t===void 0?this.themeConfig:this.themeConfig[t]}getConfig(t){return t===void 0?this.opt:this.opt[t]}updateConfig(t={}){this.emit("before_update_config",this.opt);const e={...this.opt};this.opt=this.handleOpt(ot.all([bt,this.opt,t])),this.emit("after_update_config",this.opt,e)}getLayout(){return this.opt.layout}setLayout(t,e=!1){_t.includes(t)||(t=M.LAYOUT.LOGICAL_STRUCTURE),this.opt.layout=t,this.view.reset(),this.renderer.setLayout(),e||this.render(null,M.CHANGE_LAYOUT),this.emit("layout_change",t)}execCommand(...t){this.command.exec(...t)}updateData(t){this.emit("before_update_data",t),this.renderer.setData(t),this.render(),this.command.addHistory(),this.emit("update_data",t)}setData(t){t=this.handleData(t),this.emit("before_set_data",t),this.opt.data=t,this.execCommand("CLEAR_ACTIVE_NODE"),this.command.clearHistory(),this.command.addHistory(),this.renderer.setData(t),this.reRender(()=>{},M.SET_DATA),this.emit("set_data",t)}setFullData(t){t.root&&this.setData(t.root),t.layout&&this.setLayout(t.layout),t.theme&&(t.theme.template&&this.setTheme(t.theme.template),t.theme.config&&this.setThemeConfig(t.theme.config)),t.view&&this.view.setTransformData(t.view)}getData(t){let e=this.command.getCopyData(),i={};return t?i={layout:this.getLayout(),root:e,theme:{template:this.getTheme(),config:this.getCustomThemeConfig()},view:this.view.getTransformData()}:i=e,R(i)}async export(...t){try{if(!this.doExport)throw new Error("请注册Export插件！");return await this.doExport.export(...t)}catch(e){this.opt.errorHandler(W.EXPORT_ERROR,e)}}toPos(t,e){return{x:t-this.elRect.left,y:e-this.elRect.top}}setMode(t){if(![M.MODE.READONLY,M.MODE.EDIT].includes(t))return;const e=t===M.MODE.READONLY;e!==this.opt.readonly&&(e&&(this.renderer.textEdit.isShowTextEdit()&&(this.renderer.textEdit.hideEditTextBox(),this.command.originAddHistory()),this.execCommand("CLEAR_ACTIVE_NODE")),this.opt.readonly=e,!e&&this.command.history.length<=0&&this.command.originAddHistory(),this.emit("mode_change",t))}getSvgData({paddingX:t=0,paddingY:e=0,ignoreWatermark:i=!1,addContentToHeader:n,addContentToFooter:s,node:a}={}){const{watermarkConfig:h,openPerformance:o}=this.opt;o&&this.renderer.forceLoadNode(a);const{cssTextList:r,header:c,headerHeight:d,footer:f,footerHeight:g}=_e({addContentToHeader:n,addContentToFooter:s}),l=this.svg,m=this.draw,u=l.width(),x=l.height(),E=m.transform(),N=this.elRect;m.scale(1/E.scaleX,1/E.scaleY);const v=m.rbox();let y=null;a&&(y=Ce(a,v.x,v.y,t,e));const _=0;v.width+=t*2,v.height+=e*2+_+d+g,m.translate(t,e),l.size(v.width,v.height),m.translate(-v.x+N.left,-v.y+N.top);let T=l.clone();const Y=this.watermark&&this.watermark.hasWatermark();if(!i&&Y){this.watermark.isInExport=!0;const{onlyExport:$}=h;v.width>u||v.height>x?(this.width=v.width,this.height=v.height,this.watermark.onResize(),T=l.clone(),this.width=u,this.height=x,this.watermark.onResize()):$&&(this.watermark.onResize(),T=l.clone()),$&&this.watermark.clear(),this.watermark.isInExport=!1}[this.joinCss(),...r].forEach($=>{T.add(D(`<style>${$}</style>`))}),c&&d>0&&(T.findOne(".smm-container").translate(0,d),c.width(v.width),c.y(e),T.add(c,0)),f&&g>0&&(f.width(v.width),f.y(v.height-e-g),T.add(f));const et=l.find("defs"),Xt=T.find("defs");return et.forEach(($,lt)=>{const ct=Xt[lt];if(!ct)return;const pt=$.children(),jt=ct.children();for(let V=0;V<pt.length;V++){const ft=pt[V],ut=jt[V];ft&&ut&&ut.attr("id",ft.attr("id"))}}),l.size(u,x),m.transform(E),{svg:T,svgHTML:T.svg(),clipData:y,rect:{...v,ratio:v.width/v.height},origWidth:u,origHeight:x,scaleX:E.scaleX,scaleY:E.scaleY}}addPlugin(t,e){C.hasPlugin(t)===-1&&C.usePlugin(t,e),this.initPlugin(t)}removePlugin(t){let e=C.hasPlugin(t);e!==-1&&(C.pluginList.splice(e,1),this[t.instanceName]&&(this[t.instanceName].beforePluginRemove&&this[t.instanceName].beforePluginRemove(),delete this[t.instanceName]))}initPlugin(t){this[t.instanceName]||(this[t.instanceName]=new t({mindMap:this,pluginOpt:t.pluginOpt}))}destroy(){this.emit("beforeDestroy"),this.renderer.textEdit.hideEditTextBox(),this.renderer.textEdit.removeTextEditEl(),[...C.pluginList].forEach(t=>{this[t.instanceName]&&this[t.instanceName].beforePluginDestroy&&this[t.instanceName].beforePluginDestroy(),this[t.instanceName]=null}),this.event.unbind(),this.svg.remove(),A.removeBackgroundStyle(this.el),this.el.classList.remove("smm-mind-map-container"),this.el.innerHTML="",this.el=null,this.removeCss(),C.instanceCount--}}C.pluginList=[];C.usePlugin=(p,t={})=>(C.hasPlugin(p)!==-1||(p.pluginOpt=t,C.pluginList.push(p)),C);C.hasPlugin=p=>C.pluginList.findIndex(t=>t===p);C.instanceCount=0;C.defineTheme=(p,t={})=>{if(b[p])return new Error("该主题名称已存在");b[p]=Ut(Wt,t)};C.removeTheme=p=>{b[p]&&(b[p]=null)};export{C as default};
